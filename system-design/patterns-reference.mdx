---
title: "System Design Patterns Reference"
description: "Quick reference for all essential system design patterns"
icon: "book"
---

## How to Use This Reference

This is a quick-lookup guide for system design patterns. Use it to:
- Refresh your memory before interviews
- Find the right pattern for a problem
- Understand trade-offs at a glance

## ðŸ—ï¸ Architecture Patterns

### Layered Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Presentation Layer    â”‚  UI, API endpoints
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    Business Layer       â”‚  Business logic
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Persistence Layer     â”‚  Data access
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     Database Layer      â”‚  Storage
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Use: Traditional applications
Pros: Simple, separation of concerns
Cons: Tight coupling, hard to scale parts
```

### Microservices

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Service â”‚ â”‚ Service â”‚ â”‚ Service â”‚
â”‚    A    â”‚ â”‚    B    â”‚ â”‚    C    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚           â”‚           â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
         Message Bus / API Gateway

Use: Large systems, multiple teams
Pros: Independent scaling, deployment
Cons: Distributed complexity, latency
```

### Event-Driven

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     Event      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Producer â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  Event   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚   Bus    â”‚
                            â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                     â”‚                     â”‚
      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
      â”‚Consumer â”‚          â”‚Consumer â”‚          â”‚Consumer â”‚
      â”‚    A    â”‚          â”‚    B    â”‚          â”‚    C    â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Use: Decoupled systems, real-time
Pros: Loose coupling, scalable
Cons: Eventual consistency, debugging
```

### CQRS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Client                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                 â”‚
      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
      â”‚ Command â”‚       â”‚  Query  â”‚
      â”‚   API   â”‚       â”‚   API   â”‚
      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
           â”‚                 â”‚
      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
      â”‚  Write  â”‚â”€â”€â”€â”€â”€â”€â–ºâ”‚  Read   â”‚
      â”‚  Model  â”‚ sync  â”‚  Model  â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Use: Complex domains, high read/write ratio
Pros: Optimized models, scalable
Cons: Complexity, eventual consistency
```

## ðŸ’¾ Data Patterns

### Database per Service

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Service Aâ”‚    â”‚Service Bâ”‚    â”‚Service Câ”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚              â”‚              â”‚
â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
â”‚   DB A  â”‚    â”‚   DB B  â”‚    â”‚   DB C  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Use: Microservices
Pros: Independence, right tool per service
Cons: Cross-service queries complex
```

### Saga Pattern

```
Order Service    Payment Service    Inventory Service
     â”‚                  â”‚                   â”‚
     â”œâ”€â”€â”€â”€â”€Create Orderâ”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                  â”‚                   â”‚
     â”‚                  â”œâ”€â”€â”€Charge Paymentâ”€â”€â”¤
     â”‚                  â”‚                   â”‚
     â”‚                  â”‚                   â”œâ”€â”€Reserve Stock
     â”‚                  â”‚                   â”‚
     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ Success
     â”‚                  â”‚                   â”‚
     â”‚   If failure:    â”‚                   â”‚
     â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€Refundâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚   â”‚              â”‚                   â”‚
     â”‚   â”œâ”€â”€Cancel Orderâ”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                  â”‚                   â”‚

Use: Distributed transactions
Types: Choreography (events), Orchestration (coordinator)
Pros: No distributed locks
Cons: Complex rollback logic
```

### Event Sourcing

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Event Store                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. AccountCreated(id=123, balance=0)        â”‚
â”‚ 2. MoneyDeposited(id=123, amount=100)       â”‚
â”‚ 3. MoneyWithdrawn(id=123, amount=30)        â”‚
â”‚ 4. MoneyDeposited(id=123, amount=50)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Current State = Replay Events â†’ Balance: 120â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Use: Audit trails, temporal queries
Pros: Full history, rebuild state
Cons: Complexity, storage growth
```

### Sharding Strategies

```
Range Sharding:          Hash Sharding:           Directory Sharding:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ A-M â†’ S1  â”‚           â”‚hash(key)  â”‚            â”‚ Lookup    â”‚
â”‚ N-Z â†’ S2  â”‚           â”‚  % N      â”‚            â”‚ Service   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Use: Range for scans, Hash for distribution
Pros: Horizontal scaling
Cons: Cross-shard queries, resharding
```

## ðŸ”„ Communication Patterns

### API Gateway

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              API Gateway                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Rate limiting      â€¢ Authentication   â”‚
â”‚ â€¢ Request routing    â€¢ Load balancing   â”‚
â”‚ â€¢ Response caching   â€¢ SSL termination  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚              â”‚              â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”     â”Œâ”€â”€â”€â–¼â”€â”€â”€â”     â”Œâ”€â”€â”€â–¼â”€â”€â”€â”
â”‚Svc A  â”‚     â”‚Svc B  â”‚     â”‚Svc C  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”˜

Use: Microservices entry point
Pros: Centralized concerns
Cons: Single point of failure
```

### Service Mesh

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚Service Aâ”‚â—„â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚Service Bâ”‚       â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â” â”‚         â”‚ â”Œâ”€â”€â”€â”€â”€â” â”‚       â”‚
â”‚  â”‚ â”‚Proxyâ”‚ â”‚         â”‚ â”‚Proxyâ”‚ â”‚       â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”˜ â”‚         â”‚ â””â”€â”€â”€â”€â”€â”˜ â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                         â”‚
â”‚  Control Plane (Istio/Linkerd)         â”‚
â”‚  â€¢ Traffic management â€¢ Security       â”‚
â”‚  â€¢ Observability     â€¢ Policy          â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Use: Complex microservices
Pros: Consistent networking, observability
Cons: Operational complexity
```

### Circuit Breaker

```
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                             â”‚
         â”‚   CLOSED â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚     â”‚                       â”‚
         â”‚     â”‚ failures > threshold  â”‚
         â”‚     â–¼                       â”‚
         â”‚   OPEN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚     â”‚                       â”‚
         â”‚     â”‚ timeout expires       â”‚
         â”‚     â–¼                       â”‚
         â”‚  HALF-OPEN                  â”‚
         â”‚     â”‚                       â”‚
         â”‚     â”œâ”€â”€ success â†’ CLOSED    â”‚
         â”‚     â””â”€â”€ failure â†’ OPEN      â”‚
         â”‚                             â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Use: Prevent cascade failures
Pros: Fast fails, recovery time
Cons: Needs tuning
```

### Retry with Backoff

```
Attempt 1: Immediate
Attempt 2: Wait 1s
Attempt 3: Wait 2s
Attempt 4: Wait 4s  (exponential)
Attempt 5: Wait 8s + random jitter

With jitter to prevent thundering herd:
delay = min(cap, base * 2^attempt) + random(0, 1)

Use: Transient failures
Pros: Handles temporary issues
Cons: Increased latency on failure
```

## ðŸ“Š Scaling Patterns

### Horizontal Scaling

```
                Load Balancer
                     â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                â”‚                â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”       â”Œâ”€â”€â”€â–¼â”€â”€â”€â”       â”Œâ”€â”€â”€â–¼â”€â”€â”€â”
â”‚Server â”‚       â”‚Server â”‚       â”‚Server â”‚
â”‚   1   â”‚       â”‚   2   â”‚       â”‚   N   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”˜

Use: Stateless services
Pros: Linear scaling, redundancy
Cons: State management, complexity
```

### Vertical Scaling

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Small VM     â”‚ â†’   â”‚    Large VM     â”‚
â”‚  2 CPU, 4GB     â”‚     â”‚  16 CPU, 64GB   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Use: Quick fix, databases
Pros: Simple, no code changes
Cons: Hardware limits, downtime
```

### Auto-Scaling

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Auto-Scaling Group           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Min: 2    Desired: 4    Max: 10        â”‚
â”‚                                         â”‚
â”‚ Scale Out: CPU > 70% for 5 min         â”‚
â”‚ Scale In:  CPU < 30% for 10 min        â”‚
â”‚                                         â”‚
â”‚ Cooldown: 300 seconds                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Use: Variable load
Pros: Cost efficiency, handles spikes
Cons: Cold start, configuration complexity
```

## ðŸ”’ Reliability Patterns

### Health Checks

```
/health/live   â†’ Is process running?
/health/ready  â†’ Can handle traffic?
/health/deep   â†’ Are dependencies OK?

Response: {"status": "healthy", "checks": {...}}

Use: Load balancers, orchestrators
Pros: Automated recovery
Cons: False positives/negatives
```

### Bulkhead

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Application                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Thread Poolâ”‚ Thread Poolâ”‚ Thread Pool  â”‚
â”‚     A      â”‚     B      â”‚     C        â”‚
â”‚ (critical) â”‚ (normal)   â”‚ (background) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Use: Resource isolation
Pros: Contains failures
Cons: Resource overhead
```

### Graceful Degradation

```
100% Load:  Full features
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚ 80%: Disable recommendations
â”‚ 60%: Serve cached content
â”‚ 40%: Text-only mode
â”‚ 20%: Maintenance page
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Use: Overload protection
Pros: Partial service better than none
Cons: Feature complexity
```

## ðŸ’¨ Caching Patterns

### Cache-Aside

```
1. App checks cache
2. Cache miss â†’ Read from DB
3. App writes to cache
4. Return data

â”Œâ”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”
â”‚ App â”‚â”€â”€â”€â”€â”€â–ºâ”‚Cacheâ”‚      â”‚ DB â”‚
â””â”€â”€â”¬â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”˜      â””â”€â”€â–²â”€â”˜
   â”‚                         â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         Cache miss

Use: General purpose
Pros: Simple, lazy loading
Cons: Cache misses slow
```

### Write-Through

```
1. App writes to cache
2. Cache writes to DB
3. Both updated synchronously

â”Œâ”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”
â”‚ App â”‚â”€â”€â”€â”€â”€â–ºâ”‚Cacheâ”‚â”€â”€â”€â”€â”€â–ºâ”‚ DB â”‚
â””â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”˜

Use: Strong consistency needed
Pros: Data always in sync
Cons: Write latency
```

### Write-Behind

```
1. App writes to cache
2. Cache ACKs immediately
3. Cache writes to DB async

â”Œâ”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”  async  â”Œâ”€â”€â”€â”€â”
â”‚ App â”‚â”€â”€â”€â”€â”€â–ºâ”‚Cacheâ”‚ â”€ â”€ â”€ â”€â–ºâ”‚ DB â”‚
â””â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”˜

Use: Write-heavy workloads
Pros: Fast writes
Cons: Data loss risk
```

## ðŸ” Security Patterns

### Rate Limiting Algorithms

```
Token Bucket:
â€¢ Bucket fills at constant rate
â€¢ Request takes a token
â€¢ No token = rejected

Sliding Window:
â€¢ Count requests in time window
â€¢ Window slides forward
â€¢ Smoother than fixed window

Leaky Bucket:
â€¢ Requests queue up
â€¢ Process at constant rate
â€¢ Queue full = rejected
```

### Authentication Patterns

```
Session-Based:               Token-Based (JWT):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Session â”‚ â—„â”€â”€â”€ Cookie      â”‚  JWT    â”‚ â—„â”€â”€â”€ Header
â”‚  Store  â”‚                  â”‚ Payload â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â€¢ Stateful                   â€¢ Stateless
â€¢ Easy revocation            â€¢ No DB lookup
â€¢ Scaling needs sync         â€¢ Scales easily
```

## ðŸ“¨ Messaging Patterns

### Pub/Sub

```
Publisher â”€â”€â”€â”€â”€â–º Topic â”€â”€â”€â”€â”€â–º Subscriber A
                   â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â–º Subscriber B

Use: Event broadcasting
Pros: Decoupled, scalable
Cons: No delivery guarantee
```

### Message Queue

```
Producer â”€â”€â”€â”€â”€â–º Queue â”€â”€â”€â”€â”€â–º Consumer

Use: Work distribution
Pros: Load leveling, reliability
Cons: Single consumer per message
```

### Request-Reply

```
Client â”€â”€â”€ Request â”€â”€â–º Service
       â—„â”€â”€ Reply â”€â”€â”€â”€â”€

Async version:
Client â”€â”€â”€ Request â”€â”€â–º Request Queue â”€â–º Service
       â—„â”€â”€ Reply â”€â”€â”€â”€â”€ Reply Queue â—„â”€â”€â”€â”€

Use: RPC-style communication
Pros: Familiar pattern
Cons: Coupling, latency
```

## ðŸ“ˆ Observability Patterns

### Distributed Tracing

```
Request ID: abc-123
â”œâ”€â”€ API Gateway (10ms)
â”‚   â””â”€â”€ Auth Service (5ms)
â”œâ”€â”€ Order Service (50ms)
â”‚   â”œâ”€â”€ Inventory Service (20ms)
â”‚   â””â”€â”€ Payment Service (25ms)
â””â”€â”€ Notification Service (15ms)

Total: 100ms

Use: Debugging distributed systems
Tools: Jaeger, Zipkin, X-Ray
```

### Log Aggregation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Service Aâ”‚  â”‚Service Bâ”‚  â”‚Service Câ”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚            â”‚            â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
           â”‚ Log Shipper â”‚  (Filebeat, Fluentd)
           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
           â”‚  Search &   â”‚  (Elasticsearch)
           â”‚   Index     â”‚
           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
           â”‚ Visualizationâ”‚ (Kibana, Grafana)
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Use: Centralized logging
Pros: Searchable, correlated
```

## Quick Pattern Selection Guide

| Problem | Pattern |
|---------|---------|
| API entry point | API Gateway |
| Database bottleneck | Caching, Read Replicas |
| Service failures cascade | Circuit Breaker |
| Distributed transactions | Saga |
| High read/write ratio | CQRS |
| Audit requirements | Event Sourcing |
| Variable load | Auto-scaling |
| Independent teams | Microservices |
| Real-time updates | Event-Driven, WebSockets |
| Search functionality | Elasticsearch |
| Session management | Redis |
| File storage | Object Storage (S3) |
| Time-series data | InfluxDB, TimescaleDB |
| Graph relationships | Neo4j |
