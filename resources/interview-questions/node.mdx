---
title: "Node.js"
description: "Runtime, Events, Streams, and Backend Scaling"
icon: "node"
---

# Node.js Interview Questions (50+ Detailed Q&A)

## 1. Runtime & Core Architecture

<AccordionGroup>
<Accordion title="1. What is Node.js? Is it a framework?">
**Answer**:
No, it is a **Runtime Environment** for executing JS outside the browser.
Built on **Chrome V8 Engine** (JS -> Machine Code) and **Libuv** (Async I/O, Event Loop).
Single-threaded, Non-blocking I/O model.
</Accordion>

<Accordion title="2. Single Threaded but Scalable? How?">
**Answer**:
Node uses a **Single Main Thread** for JS execution (Event Loop).
Heavy I/O (File, Network) is delegated to **Libuv** which uses the OS Kernel (epoll/kqueue) or a C++ Thread Pool (default 4 threads) for blocking ops.
The main thread creates requests and handles callbacks, never blocking.
</Accordion>

<Accordion title="3. Event Loop Phases (Deep Dive)">
**Answer**:
1.  **Timers**: `setTimeout`, `setInterval`.
2.  **Pending Callbacks**: OS system errors.
3.  **Idle/Prepare**: Internal.
4.  **Poll**: Retrieve new I/O events, execute I/O callbacks. (Main phase).
5.  **Check**: `setImmediate`.
6.  **Close Callbacks**: `socket.on('close')`.
**Microtasks** (`nextTick`, Promises) run *between* phases.
</Accordion>

<Accordion title="4. `process.nextTick` vs `setImmediate`">
**Answer**:
*   `nextTick`: Runs **immediately** after current operation, before the loop continues. (Starvation risk).
*   `setImmediate`: Runs in the **Check** phase (next tick of the loop technically).
</Accordion>

<Accordion title="5. V8 Engine Memory Limit">
**Answer**:
Defaults (approx): 1.4GB (64-bit).
Can increase: `node --max-old-space-size=4096 app.js`.
</Accordion>

<Accordion title="6. Garbage Collection in Node">
**Answer**:
V8 uses **Generational GC**.
*   **Scavenge**: Minor GC (New Space). Fast. Moves live objects to Old Space.
*   **Mark-Sweep-Compact**: Major GC (Old Space). Stops execution.
</Accordion>

<Accordion title="7. Global Objects">
**Answer**:
`global`, `process`, `Buffer`, `__dirname` (Module scope), `__filename`, `require`, `module`.
(Window is not available).
</Accordion>

<Accordion title="8. CommonJS vs ESM">
**Answer**:
*   CJS: `require()`. Sync. Dynamic. `module.exports`.
*   ESM: `import`. Async. Static. `export default`.
</Accordion>

<Accordion title="9. `exports` vs `module.exports`">
**Answer**:
`exports` is a reference to `module.exports`.
`exports.a = 1` works.
`exports = { a: 1 }` BREAKS the link. Always use `module.exports` if assigning object.
</Accordion>

<Accordion title="10. Handling CPU Intensive Tasks">
**Answer**:
Node is bad for CPU tasks (blocks Event Loop).
**Solutions**:
1.  **Worker Threads** (Parallel execution).
2.  **Child Process** (Fork new process).
3.  **Offload** to other service (Go/Rust/Queue).
</Accordion>
</AccordionGroup>

## 2. Streams, Buffers, I/O

<AccordionGroup>
<Accordion title="11. What is a Buffer?">
**Answer**:
Fixed-size chunk of memory allocated **outside** the V8 Heap (C++ side).
Used to handle raw binary data (Streams, File I/O).
`Buffer.from('hello')`.
</Accordion>

<Accordion title="12. Streams: 4 Types">
**Answer**:
1.  **Readable**: `fs.createReadStream`.
2.  **Writable**: `res` (Response), `fs.createWriteStream`.
3.  **Duplex**: Sockets (Read/Write).
4.  **Transform**: Zlib (Compress), Crypto. (Modify data passing through).
</Accordion>

<Accordion title="13. Pipe & Backpressure">
**Answer**:
**Backpressure**: Data coming faster than can be written. RAM fills up.
`read.pipe(write)` handles this automatically (Pauses read until write drains).
</Accordion>

<Accordion title="14. `fs.readFile` vs `fs.createReadStream`">
**Answer**:
*   `readFile`: Loads **entire file** into RAM (Buffer). Crashes on large files.
*   `readStream`: Reads in **Chunks**. Memory efficient. Constant RAM usage regardless of file size.
</Accordion>

<Accordion title="15. Event Emitter Pattern">
**Answer**:
`events` module. Pub/Sub.
`const e = new EventEmitter();`
`e.on('event', cb)`;
`e.emit('event', data)`.
Node streams/server inherit from this.
</Accordion>

<Accordion title="16. Handling uncaught exceptions">
**Answer**:
`process.on('uncaughtException')`.
**Best Practice**: Log error and **Restart Process** (State might be corrupted).
`process.on('unhandledRejection')` for Promises.
</Accordion>

<Accordion title="17. Synchronous vs Asynchronous API">
**Answer**:
`fs.readFileSync` blocks the thread.
Only use Sync methods at **Startup** (config loading). Never in Request Handler.
</Accordion>

<Accordion title="18. Zlib and Compression">
**Answer**:
Module for Gzip/Deflate.
Can be piped: `src.pipe(zlib.createGzip()).pipe(dest)`.
</Accordion>

<Accordion title="19. REPL">
**Answer**:
Read-Eval-Print-Loop. The Node console shell for testing.
</Accordion>

<Accordion title="20. OS Module">
**Answer**:
`os.cpus()`, `os.freemem()`, `os.networkInterfaces()`.
Used for Cluster setup or monitoring.
</Accordion>
</AccordionGroup>

## 3. Web & Network (HTTP/Express)

<AccordionGroup>
<Accordion title="21. Anatomy of HTTP Server">
**Answer**:
`http.createServer((req, res) => ...)`
`req`: Readable Stream (Incoming data).
`res`: Writable Stream (Outgoing data).
</Accordion>

<Accordion title="22. Middleware (Express)">
**Answer**:
Function with access to `req, res, next`.
Chain of responsibility.
Global (`app.use`) or Route specific.
Calls `next()` to pass control.
</Accordion>

<Accordion title="23. Error Handling Middleware">
**Answer**:
Must have **4 arguments**: `(err, req, res, next)`.
Express recognizes arity.
Placed at the **end** of the stack.
</Accordion>

<Accordion title="24. Body Parsing">
**Answer**:
Native: Listen to `data` events on `req` stream and concatenate.
Express: `express.json()` middleware. Parsing JSON/URL-encoded bodies.
</Accordion>

<Accordion title="25. CORS in Node">
**Answer**:
Set headers: `Access-Control-Allow-Origin`.
Middleware: `cors` package.
Handle `OPTIONS` preflight requests.
</Accordion>

<Accordion title="26. JWT (JSON Web Token)">
**Answer**:
Stateless auth.
**Structure**: Header.Payload.Signature.
**Storage**: HttpOnly Cookie (Best) or LocalStorage.
**Verification**: `jwt.verify(token, secret)`.
</Accordion>

<Accordion title="27. Cookies vs Sessions">
**Answer**:
*   **Session**: ID stored in cookie. Data stored in Server Memory/Redis. Stateful.
*   **Cookie**: Data stored in Browser. Sent with requests.
</Accordion>

<Accordion title="28. File Uploads">
**Answer**:
Streams (`busbody`) or Middleware (`multer`).
Handle `multipart/form-data`.
Don't save to Disk in serverless. Stream to S3.
</Accordion>

<Accordion title="29. WebSockets (`socket.io`)">
**Answer**:
Persistent bi-directional connection.
Handshake (HTTP Upgrade) -> TCP Socket.
Real-time chat, notifications.
</Accordion>

<Accordion title="30. Keep-Alive Agent">
**Answer**:
HTTP/1.1 creates new TCP connection per request by default in old Node.
Use `http.Agent({ keepAlive: true })` to reuse connections (Connection Pooling).
</Accordion>
</AccordionGroup>

## 4. Scaling & Performance

<AccordionGroup>
<Accordion title="31. Cluster Module">
**Answer**:
Spawns child processes (Workers) sharing same Port.
Master process balances load (Round Robin).
Utilizes all CPU cores.
</Accordion>

<Accordion title="32. PM2 Process Manager">
**Answer**:
Deamonizes app.
Features: Auto-restart on crash, Cluster mode (`-i max`), Logs, Monitoring.
</Accordion>

<Accordion title="33. Worker Threads">
**Answer**:
Threads sharing memory.
For CPU tasks (Crypto, Compression, Image).
Unlike Cluster (Separate Memory), Workers are lightweight but complex (Locking needed if sharing ArrayBuffer).
</Accordion>

<Accordion title="34. Memory Leaks Causes">
**Answer**:
1.  Global variables.
2.  Unclosed Event Listeners (adding listener on every req).
3.  Closures holding large objects.
4.  Cache without TTL.
</Accordion>

<Accordion title="35. N+1 Problem (GraphQL/ORM)">
**Answer**:
Fetching list of 10 users (1 query).
Looping to fetch address for each (10 queries). total 11.
**Fix**: DataLoader (Batching).
</Accordion>

<Accordion title="36. Database Connection Pooling">
**Answer**:
Opening TCP connection is expensive (Handshake).
Pool maintains open connections. Reuses them.
`pg.Pool` or Mongoose built-in pool.
</Accordion>

<Accordion title="37. Caching Strategies">
**Answer**:
1.  **In-Memory (Node)**: Fast, but clears on restart, duplicates RAM in cluster.
2.  **Distributed (Redis)**: Shared, Persistent, Fast.
</Accordion>

<Accordion title="38. Profiling Node App">
**Answer**:
`--inspect`. Chrome DevTools.
Flame Graphs (0x, Clinic.js). shows CPU time per function.
</Accordion>

<Accordion title="39. Event Loop Block Loophole">
**Answer**:
`JSON.parse` or `JSON.stringify` on massive objects blocks the loop.
Regex DoD (Denial of Service).
</Accordion>

<Accordion title="40. Microservices Communication">
**Answer**:
*   **HTTP/REST**: Simple, slow (JSON).
*   **gRPC**: Protobuf (Binary), fast, strict contract.
*   **Message Queues** (RabbitMQ/Kafka): Async, Decoupled.
</Accordion>
</AccordionGroup>

## 5. Security & Testing

<AccordionGroup>
<Accordion title="41. SQL Injection & NoSQL Injection">
**Answer**:
*   **SQL**: User input concatenating query. Fix: Prepared Statements.
*   **NoSQL**: Mongo query `{ username: req.body.user }`. If user sends `{"$ne": null}`, they bypass login. Fix: Sanitize input.
</Accordion>

<Accordion title="42. XSS (Cross Site Scripting)">
**Answer**:
Attacker injects script.
Backend defense: Sanitize output, set CSP (Content Security Policy) headers.
</Accordion>

<Accordion title="43. CSRF (Cross Site Request Forgery)">
**Answer**:
Malicious site forces user browser to request bank.com.
Defense: CSRF Token, SameSite=Strict cookies.
</Accordion>

<Accordion title="44. Helmet.js">
**Answer**:
Middleware setting security headers (HSTS, X-Frame-Options, No-Sniff).
</Accordion>

<Accordion title="45. Rate Limiting">
**Answer**:
Prevent DDOS / Brute Force.
`express-rate-limit` (Memory/Redis).
Strategies: Fixed Window, Token Bucket.
</Accordion>

<Accordion title="46. Unit Testing (Jest/Mocha)">
**Answer**:
Testing functions in isolation.
Mocking dependencies/DB calls.
</Accordion>

<Accordion title="47. Dependency Injection">
**Answer**:
Passing dependencies (DB, Config) into function/class instead of requiring them.
Makes testing easy (Pass mock DB).
`class Service { constructor(db) ... }`
</Accordion>

<Accordion title="48. TDD (Test Driven Development)">
**Answer**:
Red (Fail) -> Green (Pass) -> Refactor.
</Accordion>

<Accordion title="49. Environment Variables">
**Answer**:
`.env` files. `dotenv` package.
Separates Config from Code. Secrets (API Keys) should never be in git.
</Accordion>

<Accordion title="50. Logging Best Practices">
**Answer**:
Don't use `console.log` (Sync, blocking in TTY).
Use Logger (Winston/Pino) -> JSON output -> Stdout.
Log Levels (Info, Error, Debug).
Correlation IDs for tracing.
</Accordion>
</AccordionGroup>
