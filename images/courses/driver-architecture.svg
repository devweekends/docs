<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600">
  <defs>
    <linearGradient id="user-grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3498db;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2980b9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="kernel-grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#e74c3c;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#c0392b;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="hw-grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f1c40f;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#f39c12;stop-opacity:1" />
    </linearGradient>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#2C3E50" />
    </marker>
  </defs>

  <rect width="800" height="600" fill="#f8f9fa" rx="10" ry="10" />
  <text x="400" y="30" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="#2C3E50">Linux Device Driver Architecture</text>

  <!-- User Space -->
  <g transform="translate(200, 60)">
    <rect width="400" height="80" rx="8" ry="8" fill="url(#user-grad)" filter="drop-shadow(3px 3px 2px rgba(0,0,0,0.2))" />
    <text x="200" y="30" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">User Space Application</text>
    <text x="200" y="55" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">open(), read(), write(), ioctl()</text>
  </g>

  <!-- System Call Interface -->
  <line x1="400" y1="140" x2="400" y2="180" stroke="#2C3E50" stroke-width="2" marker-end="url(#arrow)" />
  <text x="410" y="165" font-family="Arial, sans-serif" font-size="12" fill="#7f8c8d">System Call</text>

  <!-- VFS Layer -->
  <g transform="translate(200, 180)">
    <rect width="400" height="80" rx="8" ry="8" fill="url(#kernel-grad)" filter="drop-shadow(3px 3px 2px rgba(0,0,0,0.2))" />
    <text x="200" y="30" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">Virtual File System (VFS)</text>
    <text x="200" y="55" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">Common Interface for all Files</text>
  </g>

  <!-- Pointer to Driver -->
  <line x1="400" y1="260" x2="400" y2="300" stroke="#2C3E50" stroke-width="2" marker-end="url(#arrow)" />

  <!-- Device Driver -->
  <g transform="translate(200, 300)">
    <rect width="400" height="150" rx="8" ry="8" fill="url(#kernel-grad)" filter="drop-shadow(3px 3px 2px rgba(0,0,0,0.2))" />
    <text x="200" y="30" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">Device Driver (Kernel Module)</text>
    
    <!-- File Operations Struct -->
    <rect x="50" y="50" width="300" height="80" fill="white" opacity="0.9" rx="4" ry="4" />
    <text x="60" y="70" font-family="Courier New, monospace" font-size="12" fill="#2C3E50">struct file_operations {</text>
    <text x="80" y="85" font-family="Courier New, monospace" font-size="12" fill="#2C3E50">.open = my_driver_open,</text>
    <text x="80" y="100" font-family="Courier New, monospace" font-size="12" fill="#2C3E50">.read = my_driver_read,</text>
    <text x="60" y="115" font-family="Courier New, monospace" font-size="12" fill="#2C3E50">};</text>
  </g>

  <!-- Hardware Interface -->
  <line x1="400" y1="450" x2="400" y2="490" stroke="#2C3E50" stroke-width="2" marker-end="url(#arrow)" />
  <text x="410" y="475" font-family="Arial, sans-serif" font-size="12" fill="#7f8c8d">I/O Ports / MMIO</text>

  <!-- Hardware -->
  <g transform="translate(200, 490)">
    <rect width="400" height="80" rx="8" ry="8" fill="url(#hw-grad)" filter="drop-shadow(3px 3px 2px rgba(0,0,0,0.2))" />
    <text x="200" y="30" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#2C3E50">Hardware Device</text>
    <text x="200" y="55" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#2C3E50">Registers & Memory</text>
  </g>

</svg>
