<svg viewBox="0 0 1080 1080" xmlns="http://www.w3.org/2000/svg">
  <rect width="1080" height="1080" fill="#FAFAFA"/>
  
  <!-- Branding -->
  <text x="60" y="80" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#18181B" letter-spacing="3">DEV WEEKENDS</text>
  
  <!-- Title -->
  <text x="540" y="140" font-family="system-ui, sans-serif" font-size="36" font-weight="700" fill="#18181B" text-anchor="middle">Extension Development</text>
  <text x="540" y="175" font-family="system-ui, sans-serif" font-size="18" fill="#71717A" text-anchor="middle">Building PostgreSQL extensions — hooks, types, operators, and FDWs</text>
  
  <!-- Extension Structure -->
  <rect x="80" y="210" width="440" height="250" rx="16" fill="#3B82F6" opacity="0.1" stroke="#3B82F6" stroke-width="2"/>
  <text x="300" y="245" font-family="system-ui, sans-serif" font-size="18" font-weight="600" fill="#3B82F6" text-anchor="middle">Extension Components</text>
  
  <!-- Files -->
  <rect x="110" y="270" width="180" height="65" rx="8" fill="#3B82F6"/>
  <text x="200" y="297" font-family="monospace" font-size="12" fill="#FAFAFA" font-weight="600" text-anchor="middle">myext.control</text>
  <text x="200" y="320" font-family="system-ui, sans-serif" font-size="9" fill="#FAFAFA" text-anchor="middle">Metadata, version, deps</text>
  
  <rect x="310" y="270" width="180" height="65" rx="8" fill="#22C55E"/>
  <text x="400" y="297" font-family="monospace" font-size="12" fill="#FAFAFA" font-weight="600" text-anchor="middle">myext--1.0.sql</text>
  <text x="400" y="320" font-family="system-ui, sans-serif" font-size="9" fill="#FAFAFA" text-anchor="middle">SQL objects, types, funcs</text>
  
  <rect x="110" y="350" width="180" height="65" rx="8" fill="#F97316"/>
  <text x="200" y="377" font-family="monospace" font-size="12" fill="#FAFAFA" font-weight="600" text-anchor="middle">myext.c</text>
  <text x="200" y="400" font-family="system-ui, sans-serif" font-size="9" fill="#FAFAFA" text-anchor="middle">C implementation</text>
  
  <rect x="310" y="350" width="180" height="65" rx="8" fill="#A855F7"/>
  <text x="400" y="377" font-family="monospace" font-size="12" fill="#FAFAFA" font-weight="600" text-anchor="middle">myext.so</text>
  <text x="400" y="400" font-family="system-ui, sans-serif" font-size="9" fill="#FAFAFA" text-anchor="middle">Shared library</text>
  
  <!-- Load flow -->
  <text x="300" y="440" font-family="system-ui, sans-serif" font-size="11" fill="#71717A" text-anchor="middle">CREATE EXTENSION myext → Load .so → Call _PG_init()</text>
  
  <!-- Hook System -->
  <rect x="560" y="210" width="440" height="250" rx="16" fill="#EF4444" opacity="0.1" stroke="#EF4444" stroke-width="2"/>
  <text x="780" y="245" font-family="system-ui, sans-serif" font-size="18" font-weight="600" fill="#EF4444" text-anchor="middle">Hook System</text>
  
  <!-- Hooks -->
  <rect x="590" y="270" width="190" height="50" rx="6" fill="#EF4444"/>
  <text x="685" y="295" font-family="monospace" font-size="10" fill="#FAFAFA" text-anchor="middle">ExecutorStart_hook</text>
  <text x="685" y="312" font-family="system-ui, sans-serif" font-size="8" fill="#FAFAFA" text-anchor="middle">Query execution start</text>
  
  <rect x="800" y="270" width="190" height="50" rx="6" fill="#EF4444"/>
  <text x="895" y="295" font-family="monospace" font-size="10" fill="#FAFAFA" text-anchor="middle">planner_hook</text>
  <text x="895" y="312" font-family="system-ui, sans-serif" font-size="8" fill="#FAFAFA" text-anchor="middle">Query planning</text>
  
  <rect x="590" y="330" width="190" height="50" rx="6" fill="#F97316"/>
  <text x="685" y="355" font-family="monospace" font-size="10" fill="#FAFAFA" text-anchor="middle">ProcessUtility_hook</text>
  <text x="685" y="372" font-family="system-ui, sans-serif" font-size="8" fill="#FAFAFA" text-anchor="middle">DDL commands</text>
  
  <rect x="800" y="330" width="190" height="50" rx="6" fill="#F97316"/>
  <text x="895" y="355" font-family="monospace" font-size="10" fill="#FAFAFA" text-anchor="middle">emit_log_hook</text>
  <text x="895" y="372" font-family="system-ui, sans-serif" font-size="8" fill="#FAFAFA" text-anchor="middle">Log interception</text>
  
  <rect x="590" y="390" width="190" height="50" rx="6" fill="#A855F7"/>
  <text x="685" y="415" font-family="monospace" font-size="10" fill="#FAFAFA" text-anchor="middle">ClientAuth_hook</text>
  <text x="685" y="432" font-family="system-ui, sans-serif" font-size="8" fill="#FAFAFA" text-anchor="middle">Authentication</text>
  
  <rect x="800" y="390" width="190" height="50" rx="6" fill="#A855F7"/>
  <text x="895" y="415" font-family="monospace" font-size="10" fill="#FAFAFA" text-anchor="middle">shmem_startup_hook</text>
  <text x="895" y="432" font-family="system-ui, sans-serif" font-size="8" fill="#FAFAFA" text-anchor="middle">Shared memory</text>
  
  <!-- Custom Types -->
  <rect x="80" y="480" width="440" height="200" rx="16" fill="#22C55E" opacity="0.1" stroke="#22C55E" stroke-width="2"/>
  <text x="300" y="515" font-family="system-ui, sans-serif" font-size="18" font-weight="600" fill="#22C55E" text-anchor="middle">Custom Data Types</text>
  
  <!-- Type components -->
  <rect x="110" y="540" width="120" height="60" rx="6" fill="#22C55E"/>
  <text x="170" y="565" font-family="system-ui, sans-serif" font-size="11" fill="#FAFAFA" font-weight="600" text-anchor="middle">type_in()</text>
  <text x="170" y="585" font-family="system-ui, sans-serif" font-size="8" fill="#FAFAFA" text-anchor="middle">text → internal</text>
  
  <rect x="240" y="540" width="120" height="60" rx="6" fill="#22C55E"/>
  <text x="300" y="565" font-family="system-ui, sans-serif" font-size="11" fill="#FAFAFA" font-weight="600" text-anchor="middle">type_out()</text>
  <text x="300" y="585" font-family="system-ui, sans-serif" font-size="8" fill="#FAFAFA" text-anchor="middle">internal → text</text>
  
  <rect x="370" y="540" width="120" height="60" rx="6" fill="#3B82F6"/>
  <text x="430" y="565" font-family="system-ui, sans-serif" font-size="11" fill="#FAFAFA" font-weight="600" text-anchor="middle">send/recv</text>
  <text x="430" y="585" font-family="system-ui, sans-serif" font-size="8" fill="#FAFAFA" text-anchor="middle">Binary I/O</text>
  
  <!-- Operators -->
  <rect x="110" y="615" width="180" height="50" rx="6" fill="#18181B"/>
  <text x="200" y="640" font-family="system-ui, sans-serif" font-size="11" fill="#FAFAFA" font-weight="600" text-anchor="middle">CREATE OPERATOR</text>
  <text x="200" y="658" font-family="monospace" font-size="8" fill="#71717A" text-anchor="middle">+ - * / = < > @</text>
  
  <rect x="310" y="615" width="180" height="50" rx="6" fill="#A855F7"/>
  <text x="400" y="640" font-family="system-ui, sans-serif" font-size="11" fill="#FAFAFA" font-weight="600" text-anchor="middle">OPERATOR CLASS</text>
  <text x="400" y="658" font-family="system-ui, sans-serif" font-size="8" fill="#FAFAFA" text-anchor="middle">Enable indexing</text>
  
  <!-- FDW -->
  <rect x="560" y="480" width="440" height="200" rx="16" fill="#A855F7" opacity="0.1" stroke="#A855F7" stroke-width="2"/>
  <text x="780" y="515" font-family="system-ui, sans-serif" font-size="18" font-weight="600" fill="#A855F7" text-anchor="middle">Foreign Data Wrappers</text>
  
  <!-- FDW flow -->
  <rect x="590" y="540" width="140" height="60" rx="6" fill="#A855F7"/>
  <text x="660" y="565" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" font-weight="600" text-anchor="middle">FdwRoutine</text>
  <text x="660" y="585" font-family="system-ui, sans-serif" font-size="8" fill="#FAFAFA" text-anchor="middle">Function pointers</text>
  
  <path d="M735 570 L765 570" stroke="#18181B" stroke-width="2" marker-end="url(#arrow)"/>
  
  <rect x="770" y="540" width="100" height="60" rx="6" fill="#3B82F6"/>
  <text x="820" y="565" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" font-weight="600" text-anchor="middle">Plan</text>
  <text x="820" y="585" font-family="system-ui, sans-serif" font-size="8" fill="#FAFAFA" text-anchor="middle">GetPaths</text>
  
  <path d="M875 570 L905 570" stroke="#18181B" stroke-width="2" marker-end="url(#arrow)"/>
  
  <rect x="910" y="540" width="80" height="60" rx="6" fill="#22C55E"/>
  <text x="950" y="565" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" font-weight="600" text-anchor="middle">Scan</text>
  <text x="950" y="585" font-family="system-ui, sans-serif" font-size="8" fill="#FAFAFA" text-anchor="middle">Iterate</text>
  
  <!-- FDW examples -->
  <rect x="590" y="615" width="130" height="50" rx="6" fill="#18181B"/>
  <text x="655" y="640" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" text-anchor="middle">postgres_fdw</text>
  <text x="655" y="657" font-family="system-ui, sans-serif" font-size="8" fill="#71717A" text-anchor="middle">Remote PG</text>
  
  <rect x="730" y="615" width="130" height="50" rx="6" fill="#18181B"/>
  <text x="795" y="640" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" text-anchor="middle">file_fdw</text>
  <text x="795" y="657" font-family="system-ui, sans-serif" font-size="8" fill="#71717A" text-anchor="middle">CSV files</text>
  
  <rect x="870" y="615" width="120" height="50" rx="6" fill="#18181B"/>
  <text x="930" y="640" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" text-anchor="middle">Custom</text>
  <text x="930" y="657" font-family="system-ui, sans-serif" font-size="8" fill="#71717A" text-anchor="middle">APIs, etc.</text>
  
  <!-- Background Workers -->
  <rect x="80" y="700" width="440" height="180" rx="16" fill="#F97316" opacity="0.1" stroke="#F97316" stroke-width="2"/>
  <text x="300" y="735" font-family="system-ui, sans-serif" font-size="18" font-weight="600" fill="#F97316" text-anchor="middle">Background Workers</text>
  
  <rect x="110" y="760" width="190" height="100" rx="8" fill="#F97316"/>
  <text x="205" y="795" font-family="system-ui, sans-serif" font-size="12" fill="#FAFAFA" font-weight="600" text-anchor="middle">Static Workers</text>
  <text x="205" y="820" font-family="system-ui, sans-serif" font-size="9" fill="#FAFAFA" text-anchor="middle">RegisterBackgroundWorker</text>
  <text x="205" y="840" font-family="system-ui, sans-serif" font-size="9" fill="#FAFAFA" text-anchor="middle">Start at server boot</text>
  <text x="205" y="855" font-family="monospace" font-size="8" fill="#FAFAFA" text-anchor="middle">_PG_init()</text>
  
  <rect x="320" y="760" width="190" height="100" rx="8" fill="#3B82F6"/>
  <text x="415" y="795" font-family="system-ui, sans-serif" font-size="12" fill="#FAFAFA" font-weight="600" text-anchor="middle">Dynamic Workers</text>
  <text x="415" y="820" font-family="system-ui, sans-serif" font-size="9" fill="#FAFAFA" text-anchor="middle">RegisterDynamic...</text>
  <text x="415" y="840" font-family="system-ui, sans-serif" font-size="9" fill="#FAFAFA" text-anchor="middle">Started on demand</text>
  <text x="415" y="855" font-family="system-ui, sans-serif" font-size="9" fill="#FAFAFA" text-anchor="middle">Parallel queries</text>
  
  <!-- Function Manager -->
  <rect x="560" y="700" width="440" height="180" rx="16" fill="#18181B" opacity="0.1" stroke="#18181B" stroke-width="2"/>
  <text x="780" y="735" font-family="system-ui, sans-serif" font-size="18" font-weight="600" fill="#18181B" text-anchor="middle">Function Manager (fmgr)</text>
  
  <rect x="590" y="760" width="190" height="100" rx="8" fill="#18181B"/>
  <text x="685" y="795" font-family="monospace" font-size="11" fill="#FAFAFA" font-weight="600" text-anchor="middle">PG_FUNCTION_INFO_V1</text>
  <text x="685" y="820" font-family="monospace" font-size="9" fill="#71717A" text-anchor="middle">PG_GETARG_INT32(0)</text>
  <text x="685" y="840" font-family="monospace" font-size="9" fill="#71717A" text-anchor="middle">PG_GETARG_TEXT_PP(1)</text>
  <text x="685" y="855" font-family="monospace" font-size="9" fill="#71717A" text-anchor="middle">PG_RETURN_INT32(x)</text>
  
  <rect x="800" y="760" width="190" height="100" rx="8" fill="#22C55E"/>
  <text x="895" y="795" font-family="system-ui, sans-serif" font-size="12" fill="#FAFAFA" font-weight="600" text-anchor="middle">SRF (Set Return)</text>
  <text x="895" y="820" font-family="monospace" font-size="9" fill="#FAFAFA" text-anchor="middle">SRF_IS_FIRSTCALL()</text>
  <text x="895" y="840" font-family="monospace" font-size="9" fill="#FAFAFA" text-anchor="middle">SRF_RETURN_NEXT()</text>
  <text x="895" y="855" font-family="monospace" font-size="9" fill="#FAFAFA" text-anchor="middle">SRF_RETURN_DONE()</text>
  
  <!-- Popular Extensions -->
  <rect x="80" y="900" width="920" height="70" rx="12" fill="#FAFAFA" stroke="#71717A"/>
  <text x="540" y="930" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#18181B" text-anchor="middle">Popular Extensions: pg_stat_statements • PostGIS • pgcrypto • uuid-ossp • hstore • pgvector</text>
  <text x="540" y="955" font-family="system-ui, sans-serif" font-size="11" fill="#71717A" text-anchor="middle">All built using the same extension architecture</text>
  
  <!-- Arrow marker -->
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#18181B"/>
    </marker>
  </defs>
  
  <!-- Footer -->
  <text x="540" y="1040" font-family="system-ui, sans-serif" font-size="14" fill="#71717A" text-anchor="middle">@devweekends</text>
</svg>