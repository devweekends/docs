<svg viewBox="0 0 1080 1080" xmlns="http://www.w3.org/2000/svg">
  <rect width="1080" height="1080" fill="#FAFAFA"/>
  
  <!-- Branding -->
  <text x="60" y="80" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#18181B" letter-spacing="3">DEV WEEKENDS</text>
  
  <!-- Title -->
  <text x="540" y="140" font-family="system-ui, sans-serif" font-size="36" font-weight="700" fill="#18181B" text-anchor="middle">Query Optimization Workflow</text>
  <text x="540" y="175" font-family="system-ui, sans-serif" font-size="18" fill="#71717A" text-anchor="middle">Systematic approach to diagnose and fix slow queries</text>
  
  <!-- Workflow Steps -->
  <!-- Step 1 -->
  <rect x="80" y="210" width="920" height="90" rx="12" fill="#3B82F6" opacity="0.1" stroke="#3B82F6" stroke-width="2"/>
  <circle cx="130" cy="255" r="25" fill="#3B82F6"/>
  <text x="130" y="262" font-family="system-ui, sans-serif" font-size="18" fill="#FAFAFA" text-anchor="middle" font-weight="700">1</text>
  <text x="180" y="245" font-family="system-ui, sans-serif" font-size="18" fill="#18181B" font-weight="600">MEASURE: Identify Slow Queries</text>
  <text x="180" y="275" font-family="system-ui, sans-serif" font-size="14" fill="#71717A">Use pg_stat_statements, log_min_duration_statement, or APM tools to find problematic queries</text>
  
  <!-- Arrow down -->
  <path d="M540 300 L540 320" stroke="#71717A" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  
  <!-- Step 2 -->
  <rect x="80" y="330" width="920" height="90" rx="12" fill="#22C55E" opacity="0.1" stroke="#22C55E" stroke-width="2"/>
  <circle cx="130" cy="375" r="25" fill="#22C55E"/>
  <text x="130" y="382" font-family="system-ui, sans-serif" font-size="18" fill="#FAFAFA" text-anchor="middle" font-weight="700">2</text>
  <text x="180" y="365" font-family="system-ui, sans-serif" font-size="18" fill="#18181B" font-weight="600">EXPLAIN ANALYZE: Get Execution Plan</text>
  <text x="180" y="395" font-family="system-ui, sans-serif" font-size="14" fill="#71717A">Run EXPLAIN (ANALYZE, BUFFERS) to see actual timings, row counts, and I/O stats</text>
  
  <!-- Arrow down -->
  <path d="M540 420 L540 440" stroke="#71717A" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  
  <!-- Step 3 -->
  <rect x="80" y="450" width="920" height="90" rx="12" fill="#A855F7" opacity="0.1" stroke="#A855F7" stroke-width="2"/>
  <circle cx="130" cy="495" r="25" fill="#A855F7"/>
  <text x="130" y="502" font-family="system-ui, sans-serif" font-size="18" fill="#FAFAFA" text-anchor="middle" font-weight="700">3</text>
  <text x="180" y="485" font-family="system-ui, sans-serif" font-size="18" fill="#18181B" font-weight="600">DIAGNOSE: Identify the Problem</text>
  <text x="180" y="515" font-family="system-ui, sans-serif" font-size="14" fill="#71717A">Look for Seq Scans on large tables, bad row estimates, sorts spilling to disk, nested loops</text>
  
  <!-- Arrow down -->
  <path d="M540 540 L540 560" stroke="#71717A" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  
  <!-- Step 4 -->
  <rect x="80" y="570" width="920" height="90" rx="12" fill="#EF4444" opacity="0.1" stroke="#EF4444" stroke-width="2"/>
  <circle cx="130" cy="615" r="25" fill="#EF4444"/>
  <text x="130" y="622" font-family="system-ui, sans-serif" font-size="18" fill="#FAFAFA" text-anchor="middle" font-weight="700">4</text>
  <text x="180" y="605" font-family="system-ui, sans-serif" font-size="18" fill="#18181B" font-weight="600">FIX: Apply Targeted Solution</text>
  <text x="180" y="635" font-family="system-ui, sans-serif" font-size="14" fill="#71717A">Add/modify indexes, rewrite query, run ANALYZE, adjust work_mem, restructure schema</text>
  
  <!-- Common problems section -->
  <text x="540" y="710" font-family="system-ui, sans-serif" font-size="20" font-weight="600" fill="#18181B" text-anchor="middle">Common Problems &amp; Solutions</text>
  
  <!-- Problem boxes -->
  <rect x="80" y="740" width="290" height="130" rx="10" fill="#18181B"/>
  <text x="225" y="775" font-family="system-ui, sans-serif" font-size="14" fill="#EF4444" text-anchor="middle" font-weight="600">⚠ Seq Scan on Large Table</text>
  <text x="100" y="805" font-family="system-ui, sans-serif" font-size="12" fill="#FAFAFA">Problem: Full table scan</text>
  <text x="100" y="830" font-family="system-ui, sans-serif" font-size="12" fill="#22C55E">Solution: Add index on filter</text>
  <text x="100" y="855" font-family="system-ui, sans-serif" font-size="12" fill="#71717A">CREATE INDEX idx ON t(col)</text>
  
  <rect x="395" y="740" width="290" height="130" rx="10" fill="#18181B"/>
  <text x="540" y="775" font-family="system-ui, sans-serif" font-size="14" fill="#EF4444" text-anchor="middle" font-weight="600">⚠ Bad Row Estimates</text>
  <text x="415" y="805" font-family="system-ui, sans-serif" font-size="12" fill="#FAFAFA">Problem: rows=10000, actual=10</text>
  <text x="415" y="830" font-family="system-ui, sans-serif" font-size="12" fill="#22C55E">Solution: Update statistics</text>
  <text x="415" y="855" font-family="system-ui, sans-serif" font-size="12" fill="#71717A">ANALYZE table_name</text>
  
  <rect x="710" y="740" width="290" height="130" rx="10" fill="#18181B"/>
  <text x="855" y="775" font-family="system-ui, sans-serif" font-size="14" fill="#EF4444" text-anchor="middle" font-weight="600">⚠ Sort/Hash Spill to Disk</text>
  <text x="730" y="805" font-family="system-ui, sans-serif" font-size="12" fill="#FAFAFA">Problem: Sort Method: external</text>
  <text x="730" y="830" font-family="system-ui, sans-serif" font-size="12" fill="#22C55E">Solution: Increase memory</text>
  <text x="730" y="855" font-family="system-ui, sans-serif" font-size="12" fill="#71717A">SET work_mem = '256MB'</text>
  
  <!-- EXPLAIN output example -->
  <rect x="80" y="895" width="920" height="90" rx="10" fill="#18181B"/>
  <text x="120" y="925" font-family="monospace" font-size="12" fill="#22C55E">Seq Scan on orders</text>
  <text x="280" y="925" font-family="monospace" font-size="12" fill="#FAFAFA">(cost=0.00..25000 rows=100 width=100)</text>
  <text x="650" y="925" font-family="monospace" font-size="12" fill="#A855F7">(actual time=150.5..1523.2 rows=95)</text>
  <text x="120" y="950" font-family="monospace" font-size="12" fill="#71717A">  Filter: (user_id = 12345)</text>
  <text x="120" y="970" font-family="monospace" font-size="12" fill="#EF4444">  Rows Removed by Filter: 999905</text>
  <text x="420" y="970" font-family="system-ui, sans-serif" font-size="12" fill="#EF4444">← Red flag! Scanning 1M rows to find 95</text>
  
  <!-- Arrow markers -->
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#71717A"/>
    </marker>
  </defs>
  
  <!-- Footer -->
  <text x="540" y="1040" font-family="system-ui, sans-serif" font-size="14" fill="#71717A" text-anchor="middle">@devweekends</text>
</svg>