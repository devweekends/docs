<svg width="1080" height="1080" viewBox="0 0 1080 1080" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="1080" height="1080" fill="#18181B"/>

  <text x="60" y="80" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#FAFAFA" letter-spacing="3">DEV WEEKENDS</text>

  <rect x="60" y="140" width="260" height="40" fill="#0EA5E9"/>
  <text x="190" y="168" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#FAFAFA" text-anchor="middle" letter-spacing="2">DATABASE ENGINEERING</text>

  <text x="60" y="280" font-family="system-ui, sans-serif" font-size="48" font-weight="700" fill="#FAFAFA">Scaling</text>
  <text x="60" y="340" font-family="system-ui, sans-serif" font-size="48" font-weight="700" fill="#0EA5E9">PostgreSQL</text>

  <text x="60" y="400" font-family="system-ui, sans-serif" font-size="18" fill="#A1A1AA">A playbook from single node to distributed</text>

  <rect x="60" y="440" width="960" height="520" fill="#27272A" rx="8"/>

  <!-- Step 1: Optimize -->
  <rect x="90" y="470" width="270" height="200" fill="#0F172A" rx="8"/>
  <text x="225" y="505" font-family="system-ui, sans-serif" font-size="16" font-weight="600" fill="#22C55E" text-anchor="middle">1 · Optimize</text>
  <text x="225" y="530" font-family="system-ui, sans-serif" font-size="11" fill="#A1A1AA" text-anchor="middle">Make single instance healthy</text>

  <text x="110" y="560" font-family="system-ui, sans-serif" font-size="11" fill="#E5E5E5">• Proper indexes</text>
  <text x="110" y="580" font-family="system-ui, sans-serif" font-size="11" fill="#E5E5E5">• Query plans (EXPLAIN ANALYZE)</text>
  <text x="110" y="600" font-family="system-ui, sans-serif" font-size="11" fill="#E5E5E5">• Work_mem / shared_buffers</text>
  <text x="110" y="620" font-family="system-ui, sans-serif" font-size="11" fill="#E5E5E5">• Connection pooling</text>

  <rect x="140" y="640" width="170" height="40" fill="#1E293B" rx="4"/>
  <text x="225" y="665" font-family="system-ui, sans-serif" font-size="11" fill="#0EA5E9" text-anchor="middle">"Most systems don't need sharding yet"</text>

  <!-- Arrow -->
  <line x1="360" y1="570" x2="390" y2="570" stroke="#22C55E" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Step 2: Scale Up + Read Scale -->
  <rect x="390" y="470" width="300" height="200" fill="#0F172A" rx="8"/>
  <text x="540" y="505" font-family="system-ui, sans-serif" font-size="16" font-weight="600" fill="#22C55E" text-anchor="middle">2 · Scale Up + Reads</text>
  <text x="540" y="530" font-family="system-ui, sans-serif" font-size="11" fill="#A1A1AA" text-anchor="middle">Bigger box + replicas</text>

  <text x="410" y="560" font-family="system-ui, sans-serif" font-size="11" fill="#E5E5E5">• Vertical scaling (CPU, RAM, disk)</text>
  <text x="410" y="580" font-family="system-ui, sans-serif" font-size="11" fill="#E5E5E5">• Read replicas behind load balancer</text>
  <text x="410" y="600" font-family="system-ui, sans-serif" font-size="11" fill="#E5E5E5">• Promote replica for failover</text>

  <rect x="430" y="620" width="80" height="35" fill="#22C55E" rx="4"/>
  <text x="470" y="642" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" text-anchor="middle">Primary</text>
  <rect x="525" y="620" width="70" height="35" fill="#0EA5E9" rx="4"/>
  <text x="560" y="642" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" text-anchor="middle">Replica</text>
  <rect x="610" y="620" width="70" height="35" fill="#0EA5E9" rx="4"/>
  <text x="645" y="642" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" text-anchor="middle">Replica</text>

  <!-- Arrow -->
  <line x1="690" y1="570" x2="720" y2="570" stroke="#22C55E" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- Step 3: Partition / Shard -->
  <rect x="720" y="470" width="270" height="200" fill="#0F172A" rx="8"/>
  <text x="855" y="505" font-family="system-ui, sans-serif" font-size="16" font-weight="600" fill="#22C55E" text-anchor="middle">3 · Partition / Shard</text>
  <text x="855" y="530" font-family="system-ui, sans-serif" font-size="11" fill="#A1A1AA" text-anchor="middle">Multiple nodes</text>

  <text x="740" y="560" font-family="system-ui, sans-serif" font-size="11" fill="#E5E5E5">• Native partitioning first</text>
  <text x="740" y="580" font-family="system-ui, sans-serif" font-size="11" fill="#E5E5E5">• Then sharding (Citus, custom)</text>

  <rect x="745" y="600" width="60" height="35" fill="#22C55E" rx="4"/>
  <text x="775" y="622" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" text-anchor="middle">Shard 1</text>
  <rect x="815" y="600" width="60" height="35" fill="#22C55E" rx="4"/>
  <text x="845" y="622" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" text-anchor="middle">Shard 2</text>
  <rect x="885" y="600" width="60" height="35" fill="#22C55E" rx="4"/>
  <text x="915" y="622" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" text-anchor="middle">Shard 3</text>

  <!-- Decision hints -->
  <rect x="90" y="720" width="930" height="210" fill="#18181B" rx="8"/>
  <text x="555" y="755" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#0EA5E9" text-anchor="middle">When to move to the next step?</text>

  <text x="120" y="790" font-family="system-ui, sans-serif" font-size="11" fill="#E5E5E5">• Step 1 → 2: CPU / I/O still saturated after query + config tuning</text>
  <text x="120" y="815" font-family="system-ui, sans-serif" font-size="11" fill="#E5E5E5">• Step 2: Reads dominate, but writes still OK on single primary</text>
  <text x="120" y="840" font-family="system-ui, sans-serif" font-size="11" fill="#E5E5E5">• Step 3: Single primary write throughput is the bottleneck</text>

  <text x="120" y="865" font-family="system-ui, sans-serif" font-size="11" fill="#A1A1AA">• Consider complexity cost: migrations, cross-shard queries, ops load</text>

  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#22C55E"/>
    </marker>
  </defs>

  <text x="540" y="1040" font-family="system-ui, sans-serif" font-size="14" fill="#52525B" text-anchor="middle">@devweekends</text>
</svg>