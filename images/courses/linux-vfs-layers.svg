<svg width="1080" height="1080" viewBox="0 0 1080 1080" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="1080" height="1080" fill="#18181B"/>

  <text x="60" y="80" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#FAFAFA" letter-spacing="3">DEV WEEKENDS</text>

  <rect x="60" y="140" width="240" height="40" fill="#F97316"/>
  <text x="180" y="168" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#FAFAFA" text-anchor="middle" letter-spacing="2">LINUX INTERNALS</text>

  <text x="60" y="280" font-family="system-ui, sans-serif" font-size="52" font-weight="700" fill="#FAFAFA">VFS</text>
  <text x="60" y="340" font-family="system-ui, sans-serif" font-size="52" font-weight="700" fill="#F97316">Layers</text>

  <text x="60" y="400" font-family="system-ui, sans-serif" font-size="18" fill="#A1A1AA">Virtual File System abstraction</text>

  <!-- Main diagram area -->
  <rect x="60" y="440" width="960" height="520" fill="#27272A" rx="8"/>

  <!-- User Space -->
  <rect x="100" y="470" width="880" height="80" fill="#7C3AED" rx="8"/>
  <text x="540" y="500" font-family="system-ui, sans-serif" font-size="16" font-weight="700" fill="#FAFAFA" text-anchor="middle">USER SPACE</text>
  <rect x="130" y="515" width="820" height="25" fill="#6D28D9" rx="4"/>
  <text x="540" y="533" font-family="monospace" font-size="11" fill="#E9D5FF" text-anchor="middle">int fd = open("/path/file", O_RDONLY);  read(fd, buf, size);  close(fd);</text>

  <!-- Syscall interface -->
  <rect x="100" y="560" width="880" height="40" fill="#3F3F46" rx="6"/>
  <text x="540" y="585" font-family="system-ui, sans-serif" font-size="13" font-weight="600" fill="#0EA5E9" text-anchor="middle">SYSTEM CALL INTERFACE</text>

  <!-- VFS Layer -->
  <rect x="100" y="610" width="880" height="140" fill="#1E40AF" rx="8"/>
  <text x="540" y="640" font-family="system-ui, sans-serif" font-size="16" font-weight="700" fill="#FAFAFA" text-anchor="middle">VFS LAYER (Virtual File System)</text>

  <!-- VFS Components -->
  <rect x="130" y="655" width="190" height="80" fill="#1E3A8A" rx="6"/>
  <text x="225" y="680" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#93C5FD" text-anchor="middle">file</text>
  <text x="225" y="700" font-family="monospace" font-size="9" fill="#BFDBFE" text-anchor="middle">struct file</text>
  <circle cx="145" cy="718" r="2" fill="#93C5FD"/>
  <text x="155" y="721" font-family="system-ui, sans-serif" font-size="8" fill="#BFDBFE">Open file instance</text>

  <rect x="340" y="655" width="190" height="80" fill="#1E3A8A" rx="6"/>
  <text x="435" y="680" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#93C5FD" text-anchor="middle">dentry</text>
  <text x="435" y="700" font-family="monospace" font-size="9" fill="#BFDBFE" text-anchor="middle">struct dentry</text>
  <circle cx="355" cy="718" r="2" fill="#93C5FD"/>
  <text x="365" y="721" font-family="system-ui, sans-serif" font-size="8" fill="#BFDBFE">Directory entry cache</text>

  <rect x="550" y="655" width="190" height="80" fill="#1E3A8A" rx="6"/>
  <text x="645" y="680" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#93C5FD" text-anchor="middle">inode</text>
  <text x="645" y="700" font-family="monospace" font-size="9" fill="#BFDBFE" text-anchor="middle">struct inode</text>
  <circle cx="565" cy="718" r="2" fill="#93C5FD"/>
  <text x="575" y="721" font-family="system-ui, sans-serif" font-size="8" fill="#BFDBFE">File metadata</text>

  <rect x="760" y="655" width="190" height="80" fill="#1E3A8A" rx="6"/>
  <text x="855" y="680" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#93C5FD" text-anchor="middle">superblock</text>
  <text x="855" y="700" font-family="monospace" font-size="9" fill="#BFDBFE" text-anchor="middle">struct super_block</text>
  <circle cx="775" cy="718" r="2" fill="#93C5FD"/>
  <text x="785" y="721" font-family="system-ui, sans-serif" font-size="8" fill="#BFDBFE">Filesystem instance</text>

  <!-- Filesystem Implementations -->
  <rect x="100" y="760" width="880" height="110" fill="#166534" rx="8"/>
  <text x="540" y="790" font-family="system-ui, sans-serif" font-size="16" font-weight="700" fill="#FAFAFA" text-anchor="middle">FILESYSTEM IMPLEMENTATIONS</text>

  <rect x="130" y="805" width="120" height="50" fill="#14532D" rx="4"/>
  <text x="190" y="835" font-family="system-ui, sans-serif" font-size="13" font-weight="600" fill="#BBF7D0" text-anchor="middle">ext4</text>

  <rect x="270" y="805" width="120" height="50" fill="#14532D" rx="4"/>
  <text x="330" y="835" font-family="system-ui, sans-serif" font-size="13" font-weight="600" fill="#BBF7D0" text-anchor="middle">XFS</text>

  <rect x="410" y="805" width="120" height="50" fill="#14532D" rx="4"/>
  <text x="470" y="835" font-family="system-ui, sans-serif" font-size="13" font-weight="600" fill="#BBF7D0" text-anchor="middle">Btrfs</text>

  <rect x="550" y="805" width="120" height="50" fill="#14532D" rx="4"/>
  <text x="610" y="835" font-family="system-ui, sans-serif" font-size="13" font-weight="600" fill="#BBF7D0" text-anchor="middle">NFS</text>

  <rect x="690" y="805" width="120" height="50" fill="#14532D" rx="4"/>
  <text x="750" y="835" font-family="system-ui, sans-serif" font-size="13" font-weight="600" fill="#BBF7D0" text-anchor="middle">procfs</text>

  <rect x="830" y="805" width="120" height="50" fill="#14532D" rx="4"/>
  <text x="890" y="835" font-family="system-ui, sans-serif" font-size="13" font-weight="600" fill="#BBF7D0" text-anchor="middle">tmpfs</text>

  <!-- Block Layer / Storage -->
  <rect x="100" y="880" width="880" height="60" fill="#9A3412" rx="8"/>
  <text x="540" y="915" font-family="system-ui, sans-serif" font-size="16" font-weight="700" fill="#FAFAFA" text-anchor="middle">BLOCK LAYER / STORAGE</text>

  <!-- File Descriptor Table -->
  <rect x="60" y="970" width="450" height="90" fill="#27272A" rx="8"/>
  <text x="285" y="1000" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#7C3AED" text-anchor="middle">File Descriptor Table</text>
  <rect x="90" y="1010" width="390" height="40" fill="#3F3F46" rx="4"/>
  <text x="285" y="1025" font-family="monospace" font-size="9" fill="#E9D5FF" text-anchor="middle">0 (stdin)   1 (stdout)   2 (stderr)</text>
  <text x="285" y="1040" font-family="monospace" font-size="9" fill="#E9D5FF" text-anchor="middle">3 → file*   4 → file*   5 → socket*   ...</text>

  <!-- Page Cache -->
  <rect x="530" y="970" width="490" height="90" fill="#27272A" rx="8"/>
  <text x="775" y="1000" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#22C55E" text-anchor="middle">Page Cache (Buffer Cache)</text>
  <rect x="560" y="1010" width="430" height="40" fill="#3F3F46" rx="4"/>
  <circle cx="580" cy="1025" r="2" fill="#22C55E"/>
  <text x="590" y="1028" font-family="system-ui, sans-serif" font-size="9" fill="#BBF7D0">Caches file contents in RAM</text>
  <circle cx="580" cy="1040" r="2" fill="#22C55E"/>
  <text x="590" y="1043" font-family="system-ui, sans-serif" font-size="9" fill="#BBF7D0">read() and write() go through page cache</text>

  <!-- Key insight -->
  <rect x="60" y="1070" width="960" height="40" fill="#27272A" rx="8"/>
  <text x="540" y="1097" font-family="system-ui, sans-serif" font-size="14" fill="#A1A1AA" text-anchor="middle">VFS provides unified interface — <tspan fill="#0EA5E9">same syscalls</tspan> work for ext4, NFS, /proc, and even sockets!</text>

  <text x="540" y="1150" font-family="system-ui, sans-serif" font-size="14" fill="#52525B" text-anchor="middle">@devweekends</text>
</svg>
