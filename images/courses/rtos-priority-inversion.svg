<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 400">
  <!-- Background -->
  <rect width="800" height="400" fill="#1e1e1e" />
  
  <!-- Title -->
  <text x="400" y="40" font-family="Arial, sans-serif" font-size="24" fill="#ffffff" text-anchor="middle" font-weight="bold">Priority Inversion</text>
  
  <!-- Legend -->
  <g transform="translate(50, 70)">
    <rect x="0" y="0" width="20" height="20" fill="#F44336" rx="4" />
    <text x="30" y="15" font-family="Arial, sans-serif" font-size="14" fill="#cccccc">High Priority (H)</text>
    
    <rect x="200" y="0" width="20" height="20" fill="#FF9800" rx="4" />
    <text x="230" y="15" font-family="Arial, sans-serif" font-size="14" fill="#cccccc">Medium Priority (M)</text>
    
    <rect x="400" y="0" width="20" height="20" fill="#4CAF50" rx="4" />
    <text x="430" y="15" font-family="Arial, sans-serif" font-size="14" fill="#cccccc">Low Priority (L)</text>
    
    <rect x="600" y="0" width="20" height="20" fill="#555555" rx="4" />
    <text x="630" y="15" font-family="Arial, sans-serif" font-size="14" fill="#cccccc">Blocked</text>
  </g>

  <!-- Timeline Axis -->
  <line x1="50" y1="350" x2="750" y2="350" stroke="#555555" stroke-width="2" />
  
  <!-- High Priority Timeline -->
  <g transform="translate(0, 130)">
    <text x="40" y="25" font-family="Arial, sans-serif" font-size="14" fill="#ffffff" text-anchor="end">Task H</text>
    
    <!-- Arrives at t=2 -->
    <line x1="150" y1="0" x2="150" y2="50" stroke="#666" stroke-dasharray="4" />
    
    <!-- Runs 2-3 -->
    <rect x="150" y="10" width="50" height="30" fill="#F44336" rx="2" />
    
    <!-- Tries to lock mutex (held by L) -> BLOCKED -->
    <rect x="200" y="10" width="300" height="30" fill="#555555" rx="2" opacity="0.5" />
    <text x="350" y="30" font-family="Arial, sans-serif" font-size="12" fill="#ffffff" text-anchor="middle">Blocked on Mutex</text>
  </g>

  <!-- Medium Priority Timeline -->
  <g transform="translate(0, 200)">
    <text x="40" y="25" font-family="Arial, sans-serif" font-size="14" fill="#ffffff" text-anchor="end">Task M</text>
    
    <!-- Arrives at t=4 -->
    <line x1="250" y1="0" x2="250" y2="50" stroke="#666" stroke-dasharray="4" />
    
    <!-- Runs 4-8 (Preempts L because M > L) -->
    <rect x="250" y="10" width="200" height="30" fill="#FF9800" rx="2" />
    <text x="350" y="30" font-family="Arial, sans-serif" font-size="12" fill="#000000" text-anchor="middle">Running (Preempts L)</text>
  </g>

  <!-- Low Priority Timeline -->
  <g transform="translate(0, 270)">
    <text x="40" y="25" font-family="Arial, sans-serif" font-size="14" fill="#ffffff" text-anchor="end">Task L</text>
    
    <!-- Starts at t=0 -->
    <rect x="50" y="10" width="100" height="30" fill="#4CAF50" rx="2" />
    <text x="100" y="30" font-family="Arial, sans-serif" font-size="12" fill="#000000" text-anchor="middle">Holds Mutex</text>
    
    <!-- Preempted by H at t=2 -->
    
    <!-- Resumes at t=3 (H blocked) -->
    <rect x="200" y="10" width="50" height="30" fill="#4CAF50" rx="2" />
    
    <!-- Preempted by M at t=4 -->
    
    <!-- Resumes at t=8 (M done) -->
    <rect x="450" y="10" width="50" height="30" fill="#4CAF50" rx="2" />
    <text x="475" y="30" font-family="Arial, sans-serif" font-size="12" fill="#000000" text-anchor="middle">Release</text>
  </g>

  <!-- Critical Section Highlight -->
  <rect x="50" y="310" width="450" height="5" fill="#9C27B0" opacity="0.5" />
  <text x="275" y="330" font-family="Arial, sans-serif" font-size="12" fill="#9C27B0" text-anchor="middle">Mutex Held by L</text>

</svg>
