<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 500">
  <defs>
    <linearGradient id="bg-grad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0f172a"/>
      <stop offset="100%" style="stop-color:#1e293b"/>
    </linearGradient>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#DD0031"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="900" height="500" fill="url(#bg-grad)"/>
  
  <!-- Grid -->
  <g stroke="#334155" stroke-width="0.5" opacity="0.2">
    <line x1="0" y1="125" x2="900" y2="125"/>
    <line x1="0" y1="250" x2="900" y2="250"/>
    <line x1="0" y1="375" x2="900" y2="375"/>
  </g>
  
  <!-- Title -->
  <text x="450" y="35" font-family="system-ui, sans-serif" font-size="20" fill="#ffffff" text-anchor="middle" font-weight="bold">HTTP Client &amp; Interceptors</text>
  
  <!-- HTTP Flow Diagram -->
  <g transform="translate(50, 60)">
    <!-- Component -->
    <rect x="0" y="100" width="120" height="60" rx="8" fill="#1e293b" stroke="#DD0031" stroke-width="2"/>
    <text x="60" y="125" font-family="system-ui, sans-serif" font-size="11" fill="#DD0031" text-anchor="middle" font-weight="bold">Component</text>
    <text x="60" y="145" font-family="monospace" font-size="9" fill="#94a3b8" text-anchor="middle">http.get()</text>
    
    <path d="M 120 130 L 170 130" stroke="#DD0031" stroke-width="2" marker-end="url(#arrowhead)"/>
    
    <!-- Interceptor Chain -->
    <rect x="175" y="70" width="500" height="120" rx="8" fill="#0f172a" stroke="#DD0031" stroke-width="1" stroke-dasharray="5,5"/>
    <text x="425" y="90" font-family="system-ui, sans-serif" font-size="11" fill="#DD0031" text-anchor="middle" font-weight="bold">Interceptor Chain</text>
    
    <!-- Interceptor 1 -->
    <rect x="195" y="105" width="100" height="60" rx="6" fill="#1e293b" stroke="#DD0031" stroke-width="1"/>
    <text x="245" y="128" font-family="system-ui, sans-serif" font-size="10" fill="#DD0031" text-anchor="middle" font-weight="bold">Auth</text>
    <text x="245" y="145" font-family="monospace" font-size="8" fill="#94a3b8" text-anchor="middle">Add JWT token</text>
    
    <path d="M 295 135 L 325 135" stroke="#DD0031" stroke-width="1" marker-end="url(#arrowhead)"/>
    
    <!-- Interceptor 2 -->
    <rect x="330" y="105" width="100" height="60" rx="6" fill="#1e293b" stroke="#DD0031" stroke-width="1"/>
    <text x="380" y="128" font-family="system-ui, sans-serif" font-size="10" fill="#DD0031" text-anchor="middle" font-weight="bold">Logging</text>
    <text x="380" y="145" font-family="monospace" font-size="8" fill="#94a3b8" text-anchor="middle">Log requests</text>
    
    <path d="M 430 135 L 460 135" stroke="#DD0031" stroke-width="1" marker-end="url(#arrowhead)"/>
    
    <!-- Interceptor 3 -->
    <rect x="465" y="105" width="100" height="60" rx="6" fill="#1e293b" stroke="#DD0031" stroke-width="1"/>
    <text x="515" y="128" font-family="system-ui, sans-serif" font-size="10" fill="#DD0031" text-anchor="middle" font-weight="bold">Error</text>
    <text x="515" y="145" font-family="monospace" font-size="8" fill="#94a3b8" text-anchor="middle">Handle errors</text>
    
    <path d="M 565 135 L 595 135" stroke="#DD0031" stroke-width="1" marker-end="url(#arrowhead)"/>
    
    <!-- Cache Interceptor -->
    <rect x="600" y="105" width="60" height="60" rx="6" fill="#1e293b" stroke="#DD0031" stroke-width="1"/>
    <text x="630" y="135" font-family="system-ui, sans-serif" font-size="10" fill="#DD0031" text-anchor="middle" font-weight="bold">...</text>
    
    <path d="M 675 130 L 710 130" stroke="#DD0031" stroke-width="2" marker-end="url(#arrowhead)"/>
    
    <!-- Backend -->
    <rect x="715" y="100" width="120" height="60" rx="8" fill="#DD0031" stroke="#DD0031" stroke-width="2"/>
    <text x="775" y="125" font-family="system-ui, sans-serif" font-size="11" fill="#ffffff" text-anchor="middle" font-weight="bold">Backend API</text>
    <text x="775" y="145" font-family="monospace" font-size="9" fill="#ffffff" opacity="0.8" text-anchor="middle">/api/users</text>
  </g>
  
  <!-- Code Examples -->
  <g transform="translate(50, 260)">
    <!-- HTTP Service -->
    <rect x="0" y="0" width="400" height="200" rx="8" fill="#0f172a" stroke="#DD0031" stroke-width="1"/>
    <rect x="0" y="0" width="400" height="25" rx="8" fill="#DD0031" opacity="0.3"/>
    <text x="200" y="17" font-family="system-ui, sans-serif" font-size="11" fill="#DD0031" text-anchor="middle" font-weight="bold">Data Service</text>
    
    <text x="15" y="45" font-family="monospace" font-size="9" fill="#94a3b8">
      <tspan fill="#c084fc">@Injectable</tspan><tspan>({ providedIn: </tspan><tspan fill="#a5f3fc">'root'</tspan><tspan> })</tspan>
    </text>
    <text x="15" y="60" font-family="monospace" font-size="9" fill="#94a3b8">
      <tspan fill="#c084fc">export class</tspan><tspan fill="#fbbf24"> DataService </tspan><tspan>{</tspan>
    </text>
    <text x="15" y="75" font-family="monospace" font-size="9" fill="#94a3b8">
      <tspan x="25" dy="0" fill="#c084fc">private</tspan><tspan> http = </tspan><tspan fill="#fbbf24">inject</tspan><tspan>(HttpClient);</tspan>
    </text>
    <text x="15" y="95" font-family="monospace" font-size="9" fill="#94a3b8">
      <tspan x="25" dy="0" fill="#fbbf24">getUsers</tspan><tspan>(): Observable&lt;User[]&gt; {</tspan>
    </text>
    <text x="15" y="110" font-family="monospace" font-size="9" fill="#94a3b8">
      <tspan x="35" dy="0" fill="#c084fc">return this</tspan><tspan>.http.get&lt;User[]&gt;(</tspan>
    </text>
    <text x="15" y="125" font-family="monospace" font-size="9" fill="#94a3b8">
      <tspan x="45" dy="0" fill="#a5f3fc">'/api/users'</tspan>
    </text>
    <text x="15" y="140" font-family="monospace" font-size="9" fill="#94a3b8">
      <tspan x="35" dy="0">).pipe(</tspan>
    </text>
    <text x="15" y="155" font-family="monospace" font-size="9" fill="#94a3b8">
      <tspan x="45" dy="0" fill="#fbbf24">retry</tspan><tspan>({ count: 2, delay: 1000 }),</tspan>
    </text>
    <text x="15" y="170" font-family="monospace" font-size="9" fill="#94a3b8">
      <tspan x="45" dy="0" fill="#fbbf24">catchError</tspan><tspan>(</tspan><tspan fill="#c084fc">this</tspan><tspan>.handleError)</tspan>
    </text>
    <text x="15" y="185" font-family="monospace" font-size="9" fill="#94a3b8">
      <tspan x="35" dy="0">);</tspan>
    </text>
    <text x="15" y="195" font-family="monospace" font-size="9" fill="#94a3b8">
      <tspan x="25" dy="0">}</tspan>
    </text>
  </g>
  
  <g transform="translate(480, 260)">
    <!-- Interceptor Example -->
    <rect x="0" y="0" width="370" height="200" rx="8" fill="#0f172a" stroke="#DD0031" stroke-width="1"/>
    <rect x="0" y="0" width="370" height="25" rx="8" fill="#DD0031" opacity="0.3"/>
    <text x="185" y="17" font-family="system-ui, sans-serif" font-size="11" fill="#DD0031" text-anchor="middle" font-weight="bold">Auth Interceptor (Functional)</text>
    
    <text x="15" y="45" font-family="monospace" font-size="9" fill="#94a3b8">
      <tspan fill="#c084fc">export const</tspan><tspan fill="#fbbf24"> authInterceptor</tspan><tspan>:</tspan>
    </text>
    <text x="15" y="60" font-family="monospace" font-size="9" fill="#94a3b8">
      <tspan x="25" dy="0" fill="#4ade80">HttpInterceptorFn</tspan><tspan> = (req, next) =&gt; {</tspan>
    </text>
    <text x="15" y="80" font-family="monospace" font-size="9" fill="#94a3b8">
      <tspan x="25" dy="0" fill="#c084fc">const</tspan><tspan> auth = </tspan><tspan fill="#fbbf24">inject</tspan><tspan>(AuthService);</tspan>
    </text>
    <text x="15" y="95" font-family="monospace" font-size="9" fill="#94a3b8">
      <tspan x="25" dy="0" fill="#c084fc">const</tspan><tspan> token = auth.getToken();</tspan>
    </text>
    <text x="15" y="115" font-family="monospace" font-size="9" fill="#94a3b8">
      <tspan x="25" dy="0" fill="#c084fc">if</tspan><tspan> (token) {</tspan>
    </text>
    <text x="15" y="130" font-family="monospace" font-size="9" fill="#94a3b8">
      <tspan x="35" dy="0">req = req.</tspan><tspan fill="#fbbf24">clone</tspan><tspan>({</tspan>
    </text>
    <text x="15" y="145" font-family="monospace" font-size="9" fill="#94a3b8">
      <tspan x="45" dy="0">setHeaders: {</tspan>
    </text>
    <text x="15" y="160" font-family="monospace" font-size="9" fill="#94a3b8">
      <tspan x="55" dy="0">Authorization: </tspan><tspan fill="#a5f3fc">`Bearer ${token}`</tspan>
    </text>
    <text x="15" y="175" font-family="monospace" font-size="9" fill="#94a3b8">
      <tspan x="45" dy="0">}</tspan>
    </text>
    <text x="15" y="190" font-family="monospace" font-size="9" fill="#94a3b8">
      <tspan x="35" dy="0">});</tspan>
    </text>
    <text x="15" y="200" font-family="monospace" font-size="9" fill="#94a3b8">
      <tspan x="25" dy="0">}</tspan>
    </text>
  </g>
  
  <!-- Legend -->
  <text x="450" y="485" font-family="system-ui, sans-serif" font-size="11" fill="#64748b" text-anchor="middle">Interceptors process requests/responses in a chain - ideal for auth, logging, caching, error handling</text>
</svg>