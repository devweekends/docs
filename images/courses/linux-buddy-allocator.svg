<svg width="1080" height="1080" viewBox="0 0 1080 1080" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="1080" height="1080" fill="#18181B"/>

  <text x="60" y="80" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#FAFAFA" letter-spacing="3">DEV WEEKENDS</text>

  <rect x="60" y="140" width="240" height="40" fill="#F97316"/>
  <text x="180" y="168" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#FAFAFA" text-anchor="middle" letter-spacing="2">LINUX INTERNALS</text>

  <text x="60" y="260" font-family="system-ui, sans-serif" font-size="48" font-weight="700" fill="#FAFAFA">Buddy</text>
  <text x="60" y="315" font-family="system-ui, sans-serif" font-size="48" font-weight="700" fill="#F97316">Allocator</text>

  <text x="60" y="365" font-family="system-ui, sans-serif" font-size="16" fill="#A1A1AA">Physical page frame allocation</text>

  <!-- Main diagram area -->
  <rect x="60" y="390" width="960" height="620" fill="#27272A" rx="8"/>

  <!-- Free Lists -->
  <text x="100" y="420" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#FAFAFA">Free Lists by Order</text>

  <!-- Order 0 -->
  <rect x="100" y="435" width="880" height="45" fill="#3F3F46" rx="6"/>
  <text x="120" y="460" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#7C3AED">Order 0</text>
  <text x="190" y="460" font-family="monospace" font-size="9" fill="#71717A">(1 page = 4KB)</text>
  <rect x="340" y="444" width="25" height="25" fill="#7C3AED" rx="2"/>
  <rect x="372" y="444" width="25" height="25" fill="#7C3AED" rx="2"/>
  <rect x="404" y="444" width="25" height="25" fill="#7C3AED" rx="2"/>
  <rect x="436" y="444" width="25" height="25" fill="#7C3AED" rx="2"/>
  <text x="475" y="460" font-family="system-ui, sans-serif" font-size="9" fill="#71717A">→ NULL</text>

  <!-- Order 1 -->
  <rect x="100" y="487" width="880" height="45" fill="#3F3F46" rx="6"/>
  <text x="120" y="512" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#3B82F6">Order 1</text>
  <text x="190" y="512" font-family="monospace" font-size="9" fill="#71717A">(2 pages = 8KB)</text>
  <rect x="340" y="496" width="55" height="25" fill="#3B82F6" rx="2"/>
  <rect x="402" y="496" width="55" height="25" fill="#3B82F6" rx="2"/>
  <text x="470" y="512" font-family="system-ui, sans-serif" font-size="9" fill="#71717A">→ NULL</text>

  <!-- Order 2 -->
  <rect x="100" y="539" width="880" height="45" fill="#3F3F46" rx="6"/>
  <text x="120" y="564" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#22C55E">Order 2</text>
  <text x="190" y="564" font-family="monospace" font-size="9" fill="#71717A">(4 pages = 16KB)</text>
  <rect x="340" y="548" width="115" height="25" fill="#22C55E" rx="2"/>
  <rect x="462" y="548" width="115" height="25" fill="#22C55E" rx="2"/>
  <text x="590" y="564" font-family="system-ui, sans-serif" font-size="9" fill="#71717A">→ NULL</text>

  <!-- Order 3 -->
  <rect x="100" y="591" width="880" height="45" fill="#3F3F46" rx="6"/>
  <text x="120" y="616" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#F59E0B">Order 3</text>
  <text x="190" y="616" font-family="monospace" font-size="9" fill="#71717A">(8 pages = 32KB)</text>
  <rect x="340" y="600" width="240" height="25" fill="#F59E0B" rx="2"/>
  <text x="595" y="616" font-family="system-ui, sans-serif" font-size="9" fill="#71717A">→ NULL</text>

  <!-- Allocation Example -->
  <text x="100" y="670" font-family="system-ui, sans-serif" font-size="13" font-weight="600" fill="#FAFAFA">Allocation: Request 4 pages</text>

  <rect x="100" y="685" width="880" height="115" fill="#18181B" rx="6"/>

  <!-- Step 1 -->
  <text x="120" y="708" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#22C55E">Step 1: Check Order 2 (4 pages)</text>
  <rect x="120" y="715" width="840" height="20" fill="#14532D" rx="3"/>
  <text x="540" y="729" font-family="system-ui, sans-serif" font-size="9" fill="#BBF7D0" text-anchor="middle">Found free block - Allocate and return</text>

  <!-- Step 2 (alternative) -->
  <text x="120" y="755" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#F59E0B">Step 2 (if empty): Check Order 3</text>
  <rect x="120" y="762" width="840" height="30" fill="#7C2D12" rx="3"/>
  <circle cx="135" cy="773" r="2" fill="#FED7AA"/>
  <text x="145" y="776" font-family="system-ui, sans-serif" font-size="9" fill="#FED7AA">Split 8-page block into two 4-page blocks</text>
  <circle cx="135" cy="785" r="2" fill="#FED7AA"/>
  <text x="145" y="788" font-family="system-ui, sans-serif" font-size="9" fill="#FED7AA">Allocate one, add other to Order 2 free list</text>

  <!-- Deallocation/Coalescing -->
  <text x="100" y="830" font-family="system-ui, sans-serif" font-size="13" font-weight="600" fill="#FAFAFA">Deallocation</text>

  <rect x="100" y="845" width="420" height="90" fill="#18181B" rx="6"/>
  <text x="310" y="862" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="#EF4444" text-anchor="middle">Free 4 pages</text>

  <rect x="115" y="870" width="390" height="58" fill="#3F3F46" rx="4"/>
  <circle cx="130" cy="883" r="2" fill="#EF4444"/>
  <text x="138" y="885" font-family="system-ui, sans-serif" font-size="8" fill="#E5E5E5">Check if buddy free</text>

  <circle cx="130" cy="896" r="2" fill="#22C55E"/>
  <text x="138" y="898" font-family="system-ui, sans-serif" font-size="8" fill="#E5E5E5">Yes: Merge, recurse</text>

  <circle cx="130" cy="909" r="2" fill="#EF4444"/>
  <text x="138" y="911" font-family="system-ui, sans-serif" font-size="8" fill="#E5E5E5">No: Add to free list</text>

  <circle cx="130" cy="922" r="2" fill="#8B5CF6"/>
  <text x="138" y="924" font-family="system-ui, sans-serif" font-size="8" fill="#E5E5E5">Coalescing reduces fragmentation</text>

  <!-- Fragmentation -->
  <rect x="540" y="845" width="440" height="90" fill="#18181B" rx="6"/>
  <text x="760" y="862" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="#8B5CF6" text-anchor="middle">Fragmentation</text>

  <rect x="555" y="870" width="410" height="58" fill="#3F3F46" rx="4"/>
  <text x="760" y="888" font-family="system-ui, sans-serif" font-size="8" fill="#E5E5E5" text-anchor="middle">Small allocations prevent</text>
  <text x="760" y="900" font-family="system-ui, sans-serif" font-size="8" fill="#E5E5E5" text-anchor="middle">coalescing into large blocks</text>

  <text x="760" y="915" font-family="system-ui, sans-serif" font-size="8" fill="#8B5CF6" text-anchor="middle">Solution: Compaction</text>
  <text x="760" y="925" font-family="system-ui, sans-serif" font-size="7" fill="#71717A" text-anchor="middle">(migrate pages)</text>

  <!-- Limitations -->
  <text x="100" y="962" font-family="system-ui, sans-serif" font-size="13" font-weight="600" fill="#FAFAFA">Limitations</text>

  <rect x="100" y="975" width="880" height="25" fill="#3F3F46" rx="4"/>
  <circle cx="115" cy="987" r="2" fill="#EF4444"/>
  <text x="125" y="990" font-family="system-ui, sans-serif" font-size="9" fill="#E5E5E5">Max: 4MB (order 10) - use vmalloc() for larger</text>
  <circle cx="515" cy="987" r="2" fill="#F59E0B"/>
  <text x="525" y="990" font-family="system-ui, sans-serif" font-size="9" fill="#E5E5E5">Internal fragmentation in large orders</text>

  <text x="540" y="1055" font-family="system-ui, sans-serif" font-size="14" fill="#52525B" text-anchor="middle">@devweekends</text>
</svg>
