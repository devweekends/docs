<svg viewBox="0 0 1080 1080" xmlns="http://www.w3.org/2000/svg">
  <rect width="1080" height="1080" fill="#FAFAFA"/>
  
  <!-- Branding -->
  <text x="60" y="80" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#18181B" letter-spacing="3">DEV WEEKENDS</text>
  
  <!-- Title -->
  <text x="540" y="140" font-family="system-ui, sans-serif" font-size="36" font-weight="700" fill="#18181B" text-anchor="middle">Control Groups (cgroups)</text>
  <text x="540" y="175" font-family="system-ui, sans-serif" font-size="18" fill="#71717A" text-anchor="middle">Resource limits, accounting, and prioritization for containers</text>
  
  <!-- Cgroup hierarchy visualization -->
  <rect x="80" y="210" width="920" height="280" rx="16" fill="#22C55E" opacity="0.1" stroke="#22C55E" stroke-width="2"/>
  <text x="540" y="245" font-family="system-ui, sans-serif" font-size="20" font-weight="700" fill="#22C55E" text-anchor="middle">Cgroup v2 Hierarchy (Unified)</text>
  
  <!-- Root cgroup -->
  <rect x="440" y="270" width="200" height="50" rx="10" fill="#22C55E"/>
  <text x="540" y="300" font-family="system-ui, sans-serif" font-size="14" fill="#FAFAFA" font-weight="600" text-anchor="middle">/sys/fs/cgroup (root)</text>
  
  <line x1="540" y1="325" x2="540" y2="345" stroke="#18181B" stroke-width="2"/>
  <line x1="300" y1="345" x2="780" y2="345" stroke="#18181B" stroke-width="2"/>
  <line x1="300" y1="345" x2="300" y2="365" stroke="#18181B" stroke-width="2"/>
  <line x1="540" y1="345" x2="540" y2="365" stroke="#18181B" stroke-width="2"/>
  <line x1="780" y1="345" x2="780" y2="365" stroke="#18181B" stroke-width="2"/>
  
  <!-- System slice -->
  <rect x="180" y="370" width="240" height="100" rx="10" fill="#3B82F6"/>
  <text x="300" y="400" font-family="system-ui, sans-serif" font-size="13" fill="#FAFAFA" font-weight="600" text-anchor="middle">system.slice</text>
  <text x="300" y="420" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" text-anchor="middle">System services (systemd)</text>
  <rect x="200" y="435" width="80" height="25" rx="4" fill="#FAFAFA"/>
  <text x="240" y="453" font-family="system-ui, sans-serif" font-size="9" fill="#3B82F6" text-anchor="middle">sshd</text>
  <rect x="290" y="435" width="80" height="25" rx="4" fill="#FAFAFA"/>
  <text x="330" y="453" font-family="system-ui, sans-serif" font-size="9" fill="#3B82F6" text-anchor="middle">nginx</text>
  
  <!-- User slice -->
  <rect x="420" y="370" width="240" height="100" rx="10" fill="#A855F7"/>
  <text x="540" y="400" font-family="system-ui, sans-serif" font-size="13" fill="#FAFAFA" font-weight="600" text-anchor="middle">user.slice</text>
  <text x="540" y="420" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" text-anchor="middle">User sessions</text>
  <rect x="445" y="435" width="90" height="25" rx="4" fill="#FAFAFA"/>
  <text x="490" y="453" font-family="system-ui, sans-serif" font-size="9" fill="#A855F7" text-anchor="middle">user-1000</text>
  <rect x="545" y="435" width="90" height="25" rx="4" fill="#FAFAFA"/>
  <text x="590" y="453" font-family="system-ui, sans-serif" font-size="9" fill="#A855F7" text-anchor="middle">user-1001</text>
  
  <!-- Docker slice -->
  <rect x="660" y="370" width="240" height="100" rx="10" fill="#EF4444"/>
  <text x="780" y="400" font-family="system-ui, sans-serif" font-size="13" fill="#FAFAFA" font-weight="600" text-anchor="middle">docker.slice</text>
  <text x="780" y="420" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" text-anchor="middle">Docker containers</text>
  <rect x="680" y="435" width="90" height="25" rx="4" fill="#FAFAFA"/>
  <text x="725" y="453" font-family="system-ui, sans-serif" font-size="9" fill="#EF4444" text-anchor="middle">nginx-ctr</text>
  <rect x="780" y="435" width="100" height="25" rx="4" fill="#FAFAFA"/>
  <text x="830" y="453" font-family="system-ui, sans-serif" font-size="9" fill="#EF4444" text-anchor="middle">postgres-ctr</text>
  
  <!-- Controllers -->
  <rect x="80" y="510" width="440" height="280" rx="16" fill="#3B82F6" opacity="0.1" stroke="#3B82F6" stroke-width="2"/>
  <text x="300" y="545" font-family="system-ui, sans-serif" font-size="18" font-weight="600" fill="#3B82F6" text-anchor="middle">Cgroup Controllers</text>
  
  <!-- CPU controller -->
  <rect x="110" y="565" width="190" height="95" rx="8" fill="#3B82F6"/>
  <text x="205" y="590" font-family="system-ui, sans-serif" font-size="13" fill="#FAFAFA" font-weight="600" text-anchor="middle">cpu</text>
  <text x="205" y="612" font-family="monospace" font-size="9" fill="#FAFAFA" text-anchor="middle">cpu.max = 100000 100000</text>
  <text x="205" y="630" font-family="system-ui, sans-serif" font-size="9" fill="#FAFAFA" text-anchor="middle">Limit: 1 CPU core</text>
  <text x="205" y="650" font-family="monospace" font-size="9" fill="#FAFAFA" text-anchor="middle">cpu.weight = 100</text>
  
  <!-- Memory controller -->
  <rect x="320" y="565" width="190" height="95" rx="8" fill="#22C55E"/>
  <text x="415" y="590" font-family="system-ui, sans-serif" font-size="13" fill="#FAFAFA" font-weight="600" text-anchor="middle">memory</text>
  <text x="415" y="612" font-family="monospace" font-size="9" fill="#FAFAFA" text-anchor="middle">memory.max = 512M</text>
  <text x="415" y="630" font-family="system-ui, sans-serif" font-size="9" fill="#FAFAFA" text-anchor="middle">Hard limit (OOM killer)</text>
  <text x="415" y="650" font-family="monospace" font-size="9" fill="#FAFAFA" text-anchor="middle">memory.high = 400M</text>
  
  <!-- IO controller -->
  <rect x="110" y="675" width="190" height="95" rx="8" fill="#A855F7"/>
  <text x="205" y="700" font-family="system-ui, sans-serif" font-size="13" fill="#FAFAFA" font-weight="600" text-anchor="middle">io</text>
  <text x="205" y="722" font-family="monospace" font-size="9" fill="#FAFAFA" text-anchor="middle">io.max = 8:0 rbps=10M</text>
  <text x="205" y="740" font-family="system-ui, sans-serif" font-size="9" fill="#FAFAFA" text-anchor="middle">Limit read 10MB/s</text>
  <text x="205" y="758" font-family="monospace" font-size="9" fill="#FAFAFA" text-anchor="middle">io.weight = 100</text>
  
  <!-- PID controller -->
  <rect x="320" y="675" width="190" height="95" rx="8" fill="#EF4444"/>
  <text x="415" y="700" font-family="system-ui, sans-serif" font-size="13" fill="#FAFAFA" font-weight="600" text-anchor="middle">pids</text>
  <text x="415" y="722" font-family="monospace" font-size="9" fill="#FAFAFA" text-anchor="middle">pids.max = 100</text>
  <text x="415" y="740" font-family="system-ui, sans-serif" font-size="9" fill="#FAFAFA" text-anchor="middle">Fork bomb protection</text>
  <text x="415" y="758" font-family="monospace" font-size="9" fill="#FAFAFA" text-anchor="middle">pids.current = 15</text>
  
  <!-- Interface Files -->
  <rect x="560" y="510" width="440" height="280" rx="16" fill="#A855F7" opacity="0.1" stroke="#A855F7" stroke-width="2"/>
  <text x="780" y="545" font-family="system-ui, sans-serif" font-size="18" font-weight="600" fill="#A855F7" text-anchor="middle">Cgroup Interface Files</text>
  
  <!-- Core files -->
  <rect x="590" y="565" width="380" height="200" rx="10" fill="#18181B"/>
  <text x="780" y="595" font-family="system-ui, sans-serif" font-size="14" fill="#FAFAFA" font-weight="600" text-anchor="middle">Per-cgroup files (read/write)</text>
  
  <text x="620" y="625" font-family="monospace" font-size="11" fill="#22C55E">cgroup.controllers</text>
  <text x="850" y="625" font-family="system-ui, sans-serif" font-size="10" fill="#71717A">available controllers</text>
  
  <text x="620" y="650" font-family="monospace" font-size="11" fill="#22C55E">cgroup.subtree_control</text>
  <text x="850" y="650" font-family="system-ui, sans-serif" font-size="10" fill="#71717A">enabled for children</text>
  
  <text x="620" y="675" font-family="monospace" font-size="11" fill="#22C55E">cgroup.procs</text>
  <text x="850" y="675" font-family="system-ui, sans-serif" font-size="10" fill="#71717A">PIDs in this cgroup</text>
  
  <text x="620" y="700" font-family="monospace" font-size="11" fill="#3B82F6">cpu.stat</text>
  <text x="850" y="700" font-family="system-ui, sans-serif" font-size="10" fill="#71717A">usage_usec, nr_periods</text>
  
  <text x="620" y="725" font-family="monospace" font-size="11" fill="#3B82F6">memory.current</text>
  <text x="850" y="725" font-family="system-ui, sans-serif" font-size="10" fill="#71717A">current memory usage</text>
  
  <text x="620" y="750" font-family="monospace" font-size="11" fill="#3B82F6">memory.events</text>
  <text x="850" y="750" font-family="system-ui, sans-serif" font-size="10" fill="#71717A">oom, oom_kill, high</text>
  
  <!-- Docker example -->
  <rect x="80" y="810" width="920" height="150" rx="16" fill="#18181B"/>
  <text x="540" y="845" font-family="system-ui, sans-serif" font-size="18" fill="#FAFAFA" font-weight="700" text-anchor="middle">Docker Resource Limits â†’ Cgroups</text>
  
  <rect x="110" y="870" width="420" height="70" rx="10" fill="#FAFAFA"/>
  <text x="320" y="895" font-family="monospace" font-size="11" fill="#18181B" text-anchor="middle">docker run --cpus=2 --memory=1g nginx</text>
  <text x="320" y="920" font-family="system-ui, sans-serif" font-size="11" fill="#71717A" text-anchor="middle">Creates cgroup with cpu.max + memory.max</text>
  
  <path d="M535 905 L580 905" stroke="#22C55E" stroke-width="3" marker-end="url(#arrow-green)"/>
  
  <rect x="590" y="870" width="380" height="70" rx="10" fill="#22C55E"/>
  <text x="780" y="895" font-family="system-ui, sans-serif" font-size="12" fill="#FAFAFA" font-weight="600" text-anchor="middle">/sys/fs/cgroup/docker/[container-id]/</text>
  <text x="780" y="918" font-family="monospace" font-size="10" fill="#FAFAFA" text-anchor="middle">cpu.max=200000 100000  memory.max=1073741824</text>
  
  <!-- Arrow marker -->
  <defs>
    <marker id="arrow-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#22C55E"/>
    </marker>
  </defs>
  
  <!-- Footer -->
  <text x="540" y="1040" font-family="system-ui, sans-serif" font-size="14" fill="#71717A" text-anchor="middle">@devweekends</text>
</svg>