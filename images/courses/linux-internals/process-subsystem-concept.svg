<svg viewBox="0 0 1080 1080" xmlns="http://www.w3.org/2000/svg">
  <rect width="1080" height="1080" fill="#FAFAFA"/>
  
  <!-- Branding -->
  <text x="60" y="80" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#18181B" letter-spacing="3">DEV WEEKENDS</text>
  
  <!-- Title -->
  <text x="540" y="140" font-family="system-ui, sans-serif" font-size="36" font-weight="700" fill="#18181B" text-anchor="middle">Process Subsystem Deep Dive</text>
  <text x="540" y="175" font-family="system-ui, sans-serif" font-size="18" fill="#71717A" text-anchor="middle">task_struct, fork, clone, and CFS scheduler</text>
  
  <!-- task_struct visualization -->
  <rect x="80" y="210" width="440" height="380" rx="16" fill="#3B82F6" opacity="0.1" stroke="#3B82F6" stroke-width="2"/>
  <text x="300" y="245" font-family="system-ui, sans-serif" font-size="18" font-weight="600" fill="#3B82F6" text-anchor="middle">task_struct (~6-8 KB)</text>
  <text x="300" y="270" font-family="system-ui, sans-serif" font-size="12" fill="#71717A" text-anchor="middle">The "DNA" of every process/thread</text>
  
  <!-- task_struct fields -->
  <rect x="110" y="290" width="180" height="35" rx="6" fill="#3B82F6"/>
  <text x="200" y="313" font-family="system-ui, sans-serif" font-size="12" fill="#FAFAFA" text-anchor="middle">State (RUNNING, etc)</text>
  
  <rect x="310" y="290" width="180" height="35" rx="6" fill="#3B82F6"/>
  <text x="400" y="313" font-family="system-ui, sans-serif" font-size="12" fill="#FAFAFA" text-anchor="middle">pid, tgid</text>
  
  <rect x="110" y="340" width="180" height="35" rx="6" fill="#22C55E"/>
  <text x="200" y="363" font-family="system-ui, sans-serif" font-size="12" fill="#FAFAFA" text-anchor="middle">*mm (memory)</text>
  
  <rect x="310" y="340" width="180" height="35" rx="6" fill="#22C55E"/>
  <text x="400" y="363" font-family="system-ui, sans-serif" font-size="12" fill="#FAFAFA" text-anchor="middle">*files (fd table)</text>
  
  <rect x="110" y="390" width="180" height="35" rx="6" fill="#A855F7"/>
  <text x="200" y="413" font-family="system-ui, sans-serif" font-size="12" fill="#FAFAFA" text-anchor="middle">*signal (handlers)</text>
  
  <rect x="310" y="390" width="180" height="35" rx="6" fill="#A855F7"/>
  <text x="400" y="413" font-family="system-ui, sans-serif" font-size="12" fill="#FAFAFA" text-anchor="middle">*cred (uid, gid)</text>
  
  <rect x="110" y="440" width="180" height="35" rx="6" fill="#EF4444"/>
  <text x="200" y="463" font-family="system-ui, sans-serif" font-size="12" fill="#FAFAFA" text-anchor="middle">sched_entity (CFS)</text>
  
  <rect x="310" y="440" width="180" height="35" rx="6" fill="#EF4444"/>
  <text x="400" y="463" font-family="system-ui, sans-serif" font-size="12" fill="#FAFAFA" text-anchor="middle">cpus_mask (affinity)</text>
  
  <rect x="110" y="490" width="180" height="35" rx="6" fill="#18181B"/>
  <text x="200" y="513" font-family="system-ui, sans-serif" font-size="12" fill="#FAFAFA" text-anchor="middle">*nsproxy (namespaces)</text>
  
  <rect x="310" y="490" width="180" height="35" rx="6" fill="#18181B"/>
  <text x="400" y="513" font-family="system-ui, sans-serif" font-size="12" fill="#FAFAFA" text-anchor="middle">parent, children</text>
  
  <text x="300" y="560" font-family="system-ui, sans-serif" font-size="11" fill="#71717A" text-anchor="middle">Every subsystem stores its data here for O(1) access</text>
  
  <!-- Process creation comparison -->
  <rect x="560" y="210" width="440" height="380" rx="16" fill="#22C55E" opacity="0.1" stroke="#22C55E" stroke-width="2"/>
  <text x="780" y="245" font-family="system-ui, sans-serif" font-size="18" font-weight="600" fill="#22C55E" text-anchor="middle">Process Creation: fork vs clone</text>
  
  <!-- fork() -->
  <rect x="590" y="280" width="190" height="150" rx="10" fill="#FAFAFA" stroke="#3B82F6" stroke-width="2"/>
  <text x="685" y="305" font-family="system-ui, sans-serif" font-size="14" fill="#3B82F6" font-weight="600" text-anchor="middle">fork()</text>
  <text x="610" y="335" font-family="system-ui, sans-serif" font-size="11" fill="#18181B">Copy everything:</text>
  <text x="610" y="355" font-family="system-ui, sans-serif" font-size="11" fill="#22C55E">âœ“ Memory (COW)</text>
  <text x="610" y="375" font-family="system-ui, sans-serif" font-size="11" fill="#22C55E">âœ“ File descriptors</text>
  <text x="610" y="395" font-family="system-ui, sans-serif" font-size="11" fill="#22C55E">âœ“ Signal handlers</text>
  <text x="610" y="415" font-family="system-ui, sans-serif" font-size="11" fill="#22C55E">âœ“ New PID</text>
  
  <!-- pthread_create() -->
  <rect x="800" y="280" width="190" height="150" rx="10" fill="#FAFAFA" stroke="#A855F7" stroke-width="2"/>
  <text x="895" y="305" font-family="system-ui, sans-serif" font-size="14" fill="#A855F7" font-weight="600" text-anchor="middle">pthread_create()</text>
  <text x="820" y="335" font-family="system-ui, sans-serif" font-size="11" fill="#18181B">Share everything:</text>
  <text x="820" y="355" font-family="system-ui, sans-serif" font-size="11" fill="#A855F7">â€¢ Memory (CLONE_VM)</text>
  <text x="820" y="375" font-family="system-ui, sans-serif" font-size="11" fill="#A855F7">â€¢ File descriptors</text>
  <text x="820" y="395" font-family="system-ui, sans-serif" font-size="11" fill="#A855F7">â€¢ Signal handlers</text>
  <text x="820" y="415" font-family="system-ui, sans-serif" font-size="11" fill="#A855F7">â€¢ Same TGID</text>
  
  <!-- Clone flags -->
  <rect x="590" y="450" width="400" height="120" rx="10" fill="#18181B"/>
  <text x="790" y="480" font-family="system-ui, sans-serif" font-size="14" fill="#FAFAFA" font-weight="600" text-anchor="middle">clone() - The Swiss Army Knife</text>
  <text x="610" y="510" font-family="monospace" font-size="11" fill="#22C55E">CLONE_VM</text>
  <text x="720" y="510" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA">Share memory</text>
  <text x="610" y="530" font-family="monospace" font-size="11" fill="#22C55E">CLONE_NEWPID</text>
  <text x="720" y="530" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA">New PID namespace</text>
  <text x="610" y="550" font-family="monospace" font-size="11" fill="#22C55E">CLONE_NEWNET</text>
  <text x="720" y="550" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA">New network namespace</text>
  <text x="850" y="510" font-family="monospace" font-size="11" fill="#A855F7">CLONE_FILES</text>
  <text x="950" y="510" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA">Share FDs</text>
  
  <!-- CFS Scheduler -->
  <rect x="80" y="610" width="920" height="240" rx="16" fill="#EF4444" opacity="0.1" stroke="#EF4444" stroke-width="2"/>
  <text x="540" y="645" font-family="system-ui, sans-serif" font-size="18" font-weight="600" fill="#EF4444" text-anchor="middle">CFS Scheduler: Completely Fair Scheduler</text>
  
  <!-- vruntime concept -->
  <rect x="110" y="670" width="400" height="150" rx="10" fill="#FAFAFA" stroke="#EF4444" stroke-width="1"/>
  <text x="310" y="700" font-family="system-ui, sans-serif" font-size="14" fill="#EF4444" font-weight="600" text-anchor="middle">Virtual Runtime (vruntime)</text>
  <text x="130" y="730" font-family="system-ui, sans-serif" font-size="12" fill="#18181B">â€¢ Tracks "fair" CPU time per task</text>
  <text x="130" y="755" font-family="system-ui, sans-serif" font-size="12" fill="#18181B">â€¢ Lower vruntime = higher priority</text>
  <text x="130" y="780" font-family="system-ui, sans-serif" font-size="12" fill="#18181B">â€¢ Tasks in Red-Black tree by vruntime</text>
  <text x="130" y="805" font-family="system-ui, sans-serif" font-size="12" fill="#71717A">Pick leftmost (lowest vruntime) = O(1)</text>
  
  <!-- RB-tree visualization -->
  <rect x="550" y="670" width="420" height="150" rx="10" fill="#18181B"/>
  <text x="760" y="700" font-family="system-ui, sans-serif" font-size="14" fill="#FAFAFA" font-weight="600" text-anchor="middle">CFS Red-Black Tree</text>
  
  <!-- Tree nodes -->
  <circle cx="760" cy="740" r="20" fill="#EF4444"/>
  <text x="760" y="745" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" text-anchor="middle">100</text>
  
  <line x1="745" y1="755" x2="700" y2="780" stroke="#FAFAFA" stroke-width="2"/>
  <line x1="775" y1="755" x2="820" y2="780" stroke="#FAFAFA" stroke-width="2"/>
  
  <circle cx="700" cy="795" r="18" fill="#18181B" stroke="#EF4444" stroke-width="2"/>
  <text x="700" y="800" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" text-anchor="middle">50</text>
  
  <circle cx="820" cy="795" r="18" fill="#EF4444"/>
  <text x="820" y="800" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" text-anchor="middle">150</text>
  
  <!-- Leftmost pointer -->
  <path d="M620 795 L680 795" stroke="#22C55E" stroke-width="2" marker-end="url(#arrow-green)"/>
  <text x="595" y="795" font-family="system-ui, sans-serif" font-size="10" fill="#22C55E" text-anchor="end">Next to run</text>
  <text x="595" y="810" font-family="system-ui, sans-serif" font-size="10" fill="#22C55E" text-anchor="end">(leftmost)</text>
  
  <!-- Key insight -->
  <rect x="80" y="870" width="920" height="80" rx="12" fill="#A855F7" opacity="0.1" stroke="#A855F7" stroke-width="2"/>
  <text x="120" y="905" font-family="system-ui, sans-serif" font-size="16" fill="#A855F7" font-weight="600">ðŸ’¡ Interview Topics:</text>
  <text x="120" y="935" font-family="system-ui, sans-serif" font-size="14" fill="#18181B">â€¢ Explain clone() flags and how containers use them (CLONE_NEWPID, CLONE_NEWNET)</text>
  <text x="600" y="935" font-family="system-ui, sans-serif" font-size="14" fill="#18181B">â€¢ How does CFS ensure fairness? â€¢ What is CPU isolation?</text>
  
  <!-- Arrow markers -->
  <defs>
    <marker id="arrow-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#22C55E"/>
    </marker>
  </defs>
  
  <!-- Footer -->
  <text x="540" y="1040" font-family="system-ui, sans-serif" font-size="14" fill="#71717A" text-anchor="middle">@devweekends</text>
</svg>