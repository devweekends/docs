<svg viewBox="0 0 1080 1080" xmlns="http://www.w3.org/2000/svg">
  <rect width="1080" height="1080" fill="#FAFAFA"/>
  
  <!-- Branding -->
  <text x="60" y="80" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#18181B" letter-spacing="3">DEV WEEKENDS</text>
  
  <!-- Title -->
  <text x="540" y="140" font-family="system-ui, sans-serif" font-size="36" font-weight="700" fill="#18181B" text-anchor="middle">AWS NAT Gateway Flow</text>
  <text x="540" y="175" font-family="system-ui, sans-serif" font-size="18" fill="#71717A" text-anchor="middle">Private subnet instance accessing the internet</text>
  
  <!-- Main Container -->
  <rect x="80" y="210" width="920" height="720" rx="16" fill="#FAFAFA" stroke="#18181B" stroke-width="1"/>
  
  <!-- VPC -->
  <rect x="100" y="250" width="650" height="500" rx="12" fill="#F4F4F5" stroke="#F59E0B" stroke-width="2"/>
  <text x="130" y="280" font-family="system-ui, sans-serif" font-size="14" font-weight="700" fill="#F59E0B">VPC: 10.0.0.0/16</text>
  
  <!-- Public Subnet -->
  <rect x="120" y="300" width="280" height="200" rx="8" fill="#22C55E" fill-opacity="0.2" stroke="#22C55E" stroke-width="1"/>
  <text x="140" y="325" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#22C55E">Public Subnet</text>
  <text x="140" y="343" font-family="monospace" font-size="9" fill="#22C55E">10.0.1.0/24</text>
  
  <!-- NAT Gateway -->
  <rect x="160" y="370" width="120" height="80" rx="6" fill="#F59E0B"/>
  <text x="220" y="400" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" font-weight="600" text-anchor="middle">NAT Gateway</text>
  <text x="220" y="420" font-family="monospace" font-size="8" fill="#FEF3C7" text-anchor="middle">10.0.1.100</text>
  <text x="220" y="438" font-family="monospace" font-size="8" fill="#FEF3C7" text-anchor="middle">EIP: 54.23.x.x</text>
  
  <!-- Private Subnet -->
  <rect x="120" y="520" width="280" height="200" rx="8" fill="#3B82F6" fill-opacity="0.2" stroke="#3B82F6" stroke-width="1"/>
  <text x="140" y="545" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#3B82F6">Private Subnet</text>
  <text x="140" y="563" font-family="monospace" font-size="9" fill="#3B82F6">10.0.2.0/24</text>
  
  <!-- EC2 Instance -->
  <rect x="160" y="590" width="120" height="80" rx="6" fill="#3B82F6"/>
  <text x="220" y="620" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" font-weight="600" text-anchor="middle">EC2 Instance</text>
  <text x="220" y="640" font-family="monospace" font-size="8" fill="#BFDBFE" text-anchor="middle">10.0.2.50</text>
  <text x="220" y="658" font-family="system-ui, sans-serif" font-size="8" fill="#BFDBFE" text-anchor="middle">apt update...</text>
  
  <!-- Route Table - Private -->
  <rect x="430" y="550" width="200" height="120" rx="6" fill="#18181B"/>
  <text x="530" y="575" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" font-weight="600" text-anchor="middle">Private Route Table</text>
  <text x="450" y="600" font-family="monospace" font-size="8" fill="#71717A">10.0.0.0/16</text>
  <text x="550" y="600" font-family="monospace" font-size="8" fill="#22C55E">→ local</text>
  <text x="450" y="620" font-family="monospace" font-size="8" fill="#71717A">0.0.0.0/0</text>
  <text x="550" y="620" font-family="monospace" font-size="8" fill="#F59E0B">→ nat-gw-xxx</text>
  <text x="530" y="655" font-family="system-ui, sans-serif" font-size="8" fill="#71717A" text-anchor="middle">Default route → NAT GW</text>
  
  <!-- Route Table - Public -->
  <rect x="430" y="330" width="200" height="120" rx="6" fill="#18181B"/>
  <text x="530" y="355" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" font-weight="600" text-anchor="middle">Public Route Table</text>
  <text x="450" y="380" font-family="monospace" font-size="8" fill="#71717A">10.0.0.0/16</text>
  <text x="550" y="380" font-family="monospace" font-size="8" fill="#22C55E">→ local</text>
  <text x="450" y="400" font-family="monospace" font-size="8" fill="#71717A">0.0.0.0/0</text>
  <text x="550" y="400" font-family="monospace" font-size="8" fill="#A855F7">→ igw-xxx</text>
  <text x="530" y="435" font-family="system-ui, sans-serif" font-size="8" fill="#71717A" text-anchor="middle">Default route → Internet GW</text>
  
  <!-- Internet Gateway -->
  <rect x="780" y="360" width="100" height="80" rx="6" fill="#A855F7"/>
  <text x="830" y="395" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" font-weight="600" text-anchor="middle">Internet</text>
  <text x="830" y="415" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" font-weight="600" text-anchor="middle">Gateway</text>
  <text x="830" y="430" font-family="monospace" font-size="8" fill="#E9D5FF" text-anchor="middle">igw-xxx</text>
  
  <!-- Internet -->
  <ellipse cx="930" cy="400" rx="50" ry="40" fill="#EF4444"/>
  <text x="930" y="405" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" font-weight="600" text-anchor="middle">Internet</text>
  
  <!-- Flow Arrows -->
  <!-- Step 1: EC2 to NAT GW -->
  <path d="M220 590 L220 455" stroke="#3B82F6" stroke-width="3" marker-end="url(#arrowhead7)"/>
  <circle cx="170" cy="520" r="15" fill="#A855F7"/>
  <text x="170" y="525" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" text-anchor="middle" font-weight="700">1</text>
  
  <!-- Step 2: NAT GW to IGW -->
  <path d="M280 410 L775 400" stroke="#F59E0B" stroke-width="3" marker-end="url(#arrowhead7)"/>
  <circle cx="500" cy="395" r="15" fill="#A855F7"/>
  <text x="500" y="400" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" text-anchor="middle" font-weight="700">2</text>
  
  <!-- Step 3: IGW to Internet -->
  <path d="M880 400 L880 400" stroke="#A855F7" stroke-width="3"/>
  <circle cx="860" cy="340" r="15" fill="#A855F7"/>
  <text x="860" y="345" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" text-anchor="middle" font-weight="700">3</text>
  
  <!-- Step Explanations -->
  <rect x="100" y="770" width="880" height="130" rx="8" fill="#18181B"/>
  <text x="540" y="800" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#FAFAFA" text-anchor="middle">Packet Flow Explained</text>
  
  <circle cx="140" cy="840" r="15" fill="#A855F7"/>
  <text x="140" y="845" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" text-anchor="middle" font-weight="700">1</text>
  <text x="165" y="835" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA">EC2 sends packet: src=10.0.2.50, dst=151.101.1.140</text>
  <text x="165" y="855" font-family="system-ui, sans-serif" font-size="10" fill="#71717A">Route table sends to NAT Gateway</text>
  
  <circle cx="400" cy="840" r="15" fill="#A855F7"/>
  <text x="400" y="845" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" text-anchor="middle" font-weight="700">2</text>
  <text x="425" y="835" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA">NAT translates: src=54.23.x.x (EIP), dst unchanged</text>
  <text x="425" y="855" font-family="system-ui, sans-serif" font-size="10" fill="#71717A">Tracks connection in NAT table</text>
  
  <circle cx="700" cy="840" r="15" fill="#A855F7"/>
  <text x="700" y="845" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" text-anchor="middle" font-weight="700">3</text>
  <text x="725" y="835" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA">IGW routes to internet (and back)</text>
  <text x="725" y="855" font-family="system-ui, sans-serif" font-size="10" fill="#71717A">Response NAT'd back to 10.0.2.50</text>
  
  <!-- Key Points -->
  <rect x="780" y="510" width="180" height="180" rx="6" fill="#F4F4F5"/>
  <text x="870" y="535" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#18181B" text-anchor="middle">Key Points</text>
  <text x="800" y="560" font-family="system-ui, sans-serif" font-size="9" fill="#71717A">• NAT GW needs EIP</text>
  <text x="800" y="580" font-family="system-ui, sans-serif" font-size="9" fill="#71717A">• NAT GW in public subnet</text>
  <text x="800" y="600" font-family="system-ui, sans-serif" font-size="9" fill="#71717A">• Outbound only</text>
  <text x="800" y="620" font-family="system-ui, sans-serif" font-size="9" fill="#71717A">• Highly available per AZ</text>
  <text x="800" y="640" font-family="system-ui, sans-serif" font-size="9" fill="#71717A">• ~$0.045/hr + data</text>
  <text x="800" y="670" font-family="system-ui, sans-serif" font-size="8" fill="#22C55E">Private instances stay</text>
  <text x="800" y="685" font-family="system-ui, sans-serif" font-size="8" fill="#22C55E">secure, can still update!</text>
  
  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead7" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#18181B"/>
    </marker>
  </defs>
  
  <!-- Footer -->
  <text x="540" y="1040" font-family="system-ui, sans-serif" font-size="14" fill="#71717A" text-anchor="middle">@devweekends</text>
</svg>
