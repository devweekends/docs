<svg viewBox="0 0 1080 1080" xmlns="http://www.w3.org/2000/svg">
  <rect width="1080" height="1080" fill="#FAFAFA"/>
  
  <!-- Branding -->
  <text x="60" y="80" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#18181B" letter-spacing="3">DEV WEEKENDS</text>
  
  <!-- Title -->
  <text x="540" y="140" font-family="system-ui, sans-serif" font-size="36" font-weight="700" fill="#18181B" text-anchor="middle">Firewall &amp; Security Groups</text>
  <text x="540" y="175" font-family="system-ui, sans-serif" font-size="18" fill="#71717A" text-anchor="middle">Stateful vs Stateless filtering and defense in depth</text>
  
  <!-- Main Container -->
  <rect x="80" y="210" width="920" height="720" rx="16" fill="#FAFAFA" stroke="#18181B" stroke-width="1"/>
  
  <!-- Internet / External -->
  <rect x="100" y="260" width="140" height="100" rx="8" fill="#EF4444"/>
  <text x="170" y="300" font-family="system-ui, sans-serif" font-size="14" fill="#FAFAFA" font-weight="600" text-anchor="middle">Internet</text>
  <text x="170" y="320" font-family="system-ui, sans-serif" font-size="9" fill="#FEE2E2" text-anchor="middle">Untrusted Traffic</text>
  <text x="170" y="340" font-family="system-ui, sans-serif" font-size="9" fill="#FEE2E2" text-anchor="middle">0.0.0.0/0</text>
  
  <!-- Arrow to first firewall -->
  <path d="M240 310 L320 310" stroke="#18181B" stroke-width="2" marker-end="url(#arrowhead3)"/>
  
  <!-- Layer 1: Network ACL -->
  <rect x="330" y="240" width="120" height="140" rx="8" fill="#F59E0B"/>
  <text x="390" y="280" font-family="system-ui, sans-serif" font-size="12" fill="#FAFAFA" font-weight="600" text-anchor="middle">Network</text>
  <text x="390" y="298" font-family="system-ui, sans-serif" font-size="12" fill="#FAFAFA" font-weight="600" text-anchor="middle">ACL</text>
  <text x="390" y="325" font-family="system-ui, sans-serif" font-size="8" fill="#FEF3C7" text-anchor="middle">STATELESS</text>
  <text x="390" y="345" font-family="system-ui, sans-serif" font-size="8" fill="#FEF3C7" text-anchor="middle">Subnet level</text>
  <text x="390" y="365" font-family="system-ui, sans-serif" font-size="8" fill="#FEF3C7" text-anchor="middle">Explicit deny</text>
  
  <!-- Arrow to Security Group -->
  <path d="M450 310 L520 310" stroke="#18181B" stroke-width="2" marker-end="url(#arrowhead3)"/>
  
  <!-- Layer 2: Security Group -->
  <rect x="530" y="240" width="120" height="140" rx="8" fill="#22C55E"/>
  <text x="590" y="280" font-family="system-ui, sans-serif" font-size="12" fill="#FAFAFA" font-weight="600" text-anchor="middle">Security</text>
  <text x="590" y="298" font-family="system-ui, sans-serif" font-size="12" fill="#FAFAFA" font-weight="600" text-anchor="middle">Group</text>
  <text x="590" y="325" font-family="system-ui, sans-serif" font-size="8" fill="#BBF7D0" text-anchor="middle">STATEFUL</text>
  <text x="590" y="345" font-family="system-ui, sans-serif" font-size="8" fill="#BBF7D0" text-anchor="middle">Instance level</text>
  <text x="590" y="365" font-family="system-ui, sans-serif" font-size="8" fill="#BBF7D0" text-anchor="middle">Implicit deny</text>
  
  <!-- Arrow to Host Firewall -->
  <path d="M650 310 L720 310" stroke="#18181B" stroke-width="2" marker-end="url(#arrowhead3)"/>
  
  <!-- Layer 3: Host Firewall -->
  <rect x="730" y="240" width="120" height="140" rx="8" fill="#3B82F6"/>
  <text x="790" y="280" font-family="system-ui, sans-serif" font-size="12" fill="#FAFAFA" font-weight="600" text-anchor="middle">Host</text>
  <text x="790" y="298" font-family="system-ui, sans-serif" font-size="12" fill="#FAFAFA" font-weight="600" text-anchor="middle">Firewall</text>
  <text x="790" y="325" font-family="system-ui, sans-serif" font-size="8" fill="#BFDBFE" text-anchor="middle">iptables/nftables</text>
  <text x="790" y="345" font-family="system-ui, sans-serif" font-size="8" fill="#BFDBFE" text-anchor="middle">OS level</text>
  <text x="790" y="365" font-family="system-ui, sans-serif" font-size="8" fill="#BFDBFE" text-anchor="middle">Fine-grained</text>
  
  <!-- Arrow to App -->
  <path d="M850 310 L900 310" stroke="#18181B" stroke-width="2" marker-end="url(#arrowhead3)"/>
  
  <!-- Application -->
  <rect x="910" y="270" width="70" height="80" rx="8" fill="#A855F7"/>
  <text x="945" y="305" font-family="system-ui, sans-serif" font-size="11" fill="#FAFAFA" font-weight="600" text-anchor="middle">App</text>
  <text x="945" y="325" font-family="system-ui, sans-serif" font-size="8" fill="#E9D5FF" text-anchor="middle">:8080</text>
  
  <!-- Defense in Depth Label -->
  <text x="540" y="420" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#18181B" text-anchor="middle">Defense in Depth: Multiple layers of security</text>
  
  <!-- Stateful vs Stateless Comparison -->
  <rect x="100" y="450" width="430" height="200" rx="8" fill="#F4F4F5"/>
  <text x="315" y="485" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#18181B" text-anchor="middle">Stateless Firewall (NACL)</text>
  
  <text x="130" y="520" font-family="system-ui, sans-serif" font-size="10" fill="#18181B" font-weight="500">Inbound Rule:</text>
  <text x="240" y="520" font-family="monospace" font-size="9" fill="#22C55E">ALLOW TCP 443 from 0.0.0.0/0</text>
  
  <text x="130" y="550" font-family="system-ui, sans-serif" font-size="10" fill="#18181B" font-weight="500">Outbound Rule:</text>
  <text x="250" y="550" font-family="monospace" font-size="9" fill="#22C55E">ALLOW TCP 1024-65535 to 0.0.0.0/0</text>
  
  <text x="130" y="585" font-family="system-ui, sans-serif" font-size="10" fill="#EF4444" font-weight="500">Must explicitly allow return traffic!</text>
  <text x="130" y="610" font-family="system-ui, sans-serif" font-size="9" fill="#71717A">Ephemeral ports (1024-65535) needed for responses</text>
  <text x="130" y="635" font-family="system-ui, sans-serif" font-size="9" fill="#71717A">Rule order matters (evaluated top to bottom)</text>
  
  <rect x="550" y="450" width="430" height="200" rx="8" fill="#22C55E"/>
  <text x="765" y="485" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#FAFAFA" text-anchor="middle">Stateful Firewall (Security Group)</text>
  
  <text x="580" y="520" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" font-weight="500">Inbound Rule:</text>
  <text x="690" y="520" font-family="monospace" font-size="9" fill="#BBF7D0">ALLOW TCP 443 from 0.0.0.0/0</text>
  
  <text x="580" y="550" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" font-weight="500">Outbound Rule:</text>
  <text x="690" y="550" font-family="monospace" font-size="9" fill="#BBF7D0">Not needed! (auto-tracked)</text>
  
  <text x="580" y="585" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" font-weight="500">âœ“ Tracks connection state automatically</text>
  <text x="580" y="610" font-family="system-ui, sans-serif" font-size="9" fill="#E9D5FF">Response traffic allowed automatically</text>
  <text x="580" y="635" font-family="system-ui, sans-serif" font-size="9" fill="#E9D5FF">Only allow rules (no explicit deny needed)</text>
  
  <!-- Common Security Group Rules -->
  <rect x="100" y="680" width="880" height="220" rx="8" fill="#18181B"/>
  <text x="540" y="715" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#FAFAFA" text-anchor="middle">Common Security Group Rules</text>
  
  <!-- Web Server -->
  <rect x="130" y="740" width="250" height="140" rx="6" fill="#27272A"/>
  <text x="255" y="765" font-family="system-ui, sans-serif" font-size="11" fill="#22C55E" font-weight="600" text-anchor="middle">Web Server SG</text>
  
  <text x="145" y="790" font-family="monospace" font-size="9" fill="#71717A">Inbound:</text>
  <text x="145" y="810" font-family="monospace" font-size="8" fill="#FAFAFA">  TCP 80  from 0.0.0.0/0  (HTTP)</text>
  <text x="145" y="830" font-family="monospace" font-size="8" fill="#FAFAFA">  TCP 443 from 0.0.0.0/0  (HTTPS)</text>
  <text x="145" y="850" font-family="monospace" font-size="8" fill="#FAFAFA">  TCP 22  from 10.0.0.0/8 (SSH internal)</text>
  
  <!-- App Server -->
  <rect x="415" y="740" width="250" height="140" rx="6" fill="#27272A"/>
  <text x="540" y="765" font-family="system-ui, sans-serif" font-size="11" fill="#3B82F6" font-weight="600" text-anchor="middle">App Server SG</text>
  
  <text x="430" y="790" font-family="monospace" font-size="9" fill="#71717A">Inbound:</text>
  <text x="430" y="810" font-family="monospace" font-size="8" fill="#FAFAFA">  TCP 8080 from sg-web     (from LB)</text>
  <text x="430" y="830" font-family="monospace" font-size="8" fill="#FAFAFA">  TCP 22   from sg-bastion (SSH)</text>
  <text x="430" y="855" font-family="system-ui, sans-serif" font-size="8" fill="#71717A">Reference SG IDs for dynamic IPs!</text>
  
  <!-- Database Server -->
  <rect x="700" y="740" width="250" height="140" rx="6" fill="#27272A"/>
  <text x="825" y="765" font-family="system-ui, sans-serif" font-size="11" fill="#F59E0B" font-weight="600" text-anchor="middle">Database SG</text>
  
  <text x="715" y="790" font-family="monospace" font-size="9" fill="#71717A">Inbound:</text>
  <text x="715" y="810" font-family="monospace" font-size="8" fill="#FAFAFA">  TCP 5432 from sg-app (PostgreSQL)</text>
  <text x="715" y="830" font-family="monospace" font-size="8" fill="#FAFAFA">  TCP 3306 from sg-app (MySQL)</text>
  <text x="715" y="855" font-family="system-ui, sans-serif" font-size="8" fill="#EF4444">Never expose DB to 0.0.0.0/0!</text>
  
  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead3" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#18181B"/>
    </marker>
  </defs>
  
  <!-- Footer -->
  <text x="540" y="1040" font-family="system-ui, sans-serif" font-size="14" fill="#71717A" text-anchor="middle">@devweekends</text>
</svg>
