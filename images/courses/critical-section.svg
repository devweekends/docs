<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 400">
  <!-- Background -->
  <rect width="800" height="400" fill="#1e1e1e" />
  
  <!-- Title -->
  <text x="400" y="40" font-family="Arial, sans-serif" font-size="24" fill="#ffffff" text-anchor="middle" font-weight="bold">Critical Section Pattern</text>
  
  <!-- Thread Columns -->
  <text x="150" y="80" font-family="Arial, sans-serif" font-size="18" fill="#4CAF50" text-anchor="middle" font-weight="bold">Thread A</text>
  <text x="400" y="80" font-family="Arial, sans-serif" font-size="18" fill="#FF9800" text-anchor="middle" font-weight="bold">Thread B</text>
  <text x="650" y="80" font-family="Arial, sans-serif" font-size="18" fill="#2196F3" text-anchor="middle" font-weight="bold">Thread C</text>
  
  <!-- Entry Section Boxes -->
  <rect x="100" y="100" width="100" height="50" fill="#333" stroke="#4CAF50" stroke-width="2" rx="4" />
  <text x="150" y="130" font-family="Arial, sans-serif" font-size="14" fill="#ffffff" text-anchor="middle">Entry (Lock)</text>
  
  <rect x="350" y="100" width="100" height="50" fill="#333" stroke="#FF9800" stroke-width="2" rx="4" />
  <text x="400" y="130" font-family="Arial, sans-serif" font-size="14" fill="#ffffff" text-anchor="middle">Entry (Wait)</text>
  
  <rect x="600" y="100" width="100" height="50" fill="#333" stroke="#2196F3" stroke-width="2" rx="4" />
  <text x="650" y="130" font-family="Arial, sans-serif" font-size="14" fill="#ffffff" text-anchor="middle">Entry (Wait)</text>
  
  <!-- Critical Section Box -->
  <rect x="250" y="200" width="300" height="100" fill="#d32f2f" rx="10" />
  <text x="400" y="240" font-family="Arial, sans-serif" font-size="20" fill="#ffffff" text-anchor="middle" font-weight="bold">CRITICAL SECTION</text>
  <text x="400" y="270" font-family="Arial, sans-serif" font-size="14" fill="#ffffff" text-anchor="middle">Shared Resource Access</text>
  
  <!-- Arrows -->
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="0" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#ffffff" />
    </marker>
  </defs>
  
  <!-- Thread A enters -->
  <line x1="150" y1="150" x2="250" y2="220" stroke="#4CAF50" stroke-width="3" marker-end="url(#arrow)" />
  
  <!-- Thread B blocked -->
  <line x1="400" y1="150" x2="400" y2="190" stroke="#FF9800" stroke-width="3" stroke-dasharray="5,5" />
  <line x1="380" y1="190" x2="420" y2="190" stroke="#FF9800" stroke-width="3" /> <!-- Stop bar -->
  <text x="430" y="180" font-family="Arial, sans-serif" font-size="12" fill="#FF9800">Blocked</text>
  
  <!-- Thread C blocked -->
  <line x1="650" y1="150" x2="650" y2="190" stroke="#2196F3" stroke-width="3" stroke-dasharray="5,5" />
  <line x1="630" y1="190" x2="670" y2="190" stroke="#2196F3" stroke-width="3" /> <!-- Stop bar -->
  <text x="680" y="180" font-family="Arial, sans-serif" font-size="12" fill="#2196F3">Blocked</text>
  
  <!-- Exit Section -->
  <rect x="100" y="320" width="100" height="50" fill="#333" stroke="#4CAF50" stroke-width="2" rx="4" />
  <text x="150" y="350" font-family="Arial, sans-serif" font-size="14" fill="#ffffff" text-anchor="middle">Exit (Unlock)</text>
  
  <!-- Thread A leaves -->
  <line x1="250" y1="280" x2="150" y2="320" stroke="#4CAF50" stroke-width="3" marker-end="url(#arrow)" />
  
  <!-- Signal Arrow -->
  <path d="M 200 345 Q 400 380 400 160" stroke="#888" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrow)" fill="none" />
  <text x="300" y="360" font-family="Arial, sans-serif" font-size="12" fill="#888">Signal / Wakeup</text>

</svg>
