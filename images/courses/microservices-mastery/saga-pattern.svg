<svg width="1080" height="1080" viewBox="0 0 1080 1080" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="1080" height="1080" fill="#18181B"/>
  
  <text x="60" y="80" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#FAFAFA" letter-spacing="3">DEV WEEKENDS</text>
  
  <rect x="60" y="140" width="280" height="40" fill="#8B5CF6"/>
  <text x="200" y="168" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#FAFAFA" text-anchor="middle" letter-spacing="2">MICROSERVICES MASTERY</text>
  
  <text x="60" y="280" font-family="system-ui, sans-serif" font-size="48" font-weight="700" fill="#FAFAFA">Saga Pattern</text>
  <text x="60" y="340" font-family="system-ui, sans-serif" font-size="48" font-weight="700" fill="#8B5CF6">for Distributed Transactions</text>
  
  <text x="60" y="400" font-family="system-ui, sans-serif" font-size="18" fill="#A1A1AA">Managing data consistency across multiple services</text>
  
  <!-- Saga Flow Diagram -->
  <rect x="60" y="440" width="960" height="350" fill="#27272A" rx="8"/>
  <text x="540" y="480" font-family="system-ui, sans-serif" font-size="18" font-weight="700" fill="#FAFAFA" text-anchor="middle">Choreography Saga: Order Creation Flow</text>
  
  <!-- Order Service -->
  <rect x="100" y="520" width="140" height="80" fill="#3B82F6" rx="6"/>
  <text x="170" y="555" font-family="system-ui, sans-serif" font-size="13" font-weight="600" fill="#FAFAFA" text-anchor="middle">Order Service</text>
  <text x="170" y="575" font-family="system-ui, sans-serif" font-size="10" fill="#93C5FD" text-anchor="middle">Create Order</text>
  <text x="170" y="610" font-family="system-ui, sans-serif" font-size="11" fill="#22C55E" text-anchor="middle">1. OrderCreated</text>
  
  <!-- Arrow 1 -->
  <line x1="240" y1="560" x2="300" y2="560" stroke="#22C55E" stroke-width="2" marker-end="url(#arrow-success)"/>
  
  <!-- Payment Service -->
  <rect x="300" y="520" width="140" height="80" fill="#F59E0B" rx="6"/>
  <text x="370" y="555" font-family="system-ui, sans-serif" font-size="13" font-weight="600" fill="#FAFAFA" text-anchor="middle">Payment Svc</text>
  <text x="370" y="575" font-family="system-ui, sans-serif" font-size="10" fill="#FDE68A" text-anchor="middle">Process Payment</text>
  <text x="370" y="610" font-family="system-ui, sans-serif" font-size="11" fill="#22C55E" text-anchor="middle">2. PaymentProcessed</text>
  
  <!-- Arrow 2 -->
  <line x1="440" y1="560" x2="500" y2="560" stroke="#22C55E" stroke-width="2" marker-end="url(#arrow-success)"/>
  
  <!-- Inventory Service -->
  <rect x="500" y="520" width="140" height="80" fill="#22C55E" rx="6"/>
  <text x="570" y="555" font-family="system-ui, sans-serif" font-size="13" font-weight="600" fill="#FAFAFA" text-anchor="middle">Inventory Svc</text>
  <text x="570" y="575" font-family="system-ui, sans-serif" font-size="10" fill="#BBF7D0" text-anchor="middle">Reserve Items</text>
  <text x="570" y="610" font-family="system-ui, sans-serif" font-size="11" fill="#22C55E" text-anchor="middle">3. ItemsReserved</text>
  
  <!-- Arrow 3 -->
  <line x1="640" y1="560" x2="700" y2="560" stroke="#22C55E" stroke-width="2" marker-end="url(#arrow-success)"/>
  
  <!-- Shipping Service -->
  <rect x="700" y="520" width="140" height="80" fill="#A855F7" rx="6"/>
  <text x="770" y="555" font-family="system-ui, sans-serif" font-size="13" font-weight="600" fill="#FAFAFA" text-anchor="middle">Shipping Svc</text>
  <text x="770" y="575" font-family="system-ui, sans-serif" font-size="10" fill="#E9D5FF" text-anchor="middle">Create Shipment</text>
  <text x="770" y="610" font-family="system-ui, sans-serif" font-size="11" fill="#22C55E" text-anchor="middle">4. ShipmentCreated</text>
  
  <!-- Success indicator -->
  <rect x="880" y="530" width="100" height="60" fill="#166534" rx="6"/>
  <text x="930" y="565" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#FAFAFA" text-anchor="middle">✓ DONE</text>
  
  <line x1="840" y1="560" x2="880" y2="560" stroke="#22C55E" stroke-width="2"/>
  
  <!-- Compensating Transactions (Failure Path) -->
  <text x="540" y="680" font-family="system-ui, sans-serif" font-size="16" font-weight="700" fill="#EF4444" text-anchor="middle">Compensating Transactions (Rollback on Failure)</text>
  
  <!-- Failure scenario -->
  <rect x="100" y="710" width="140" height="50" fill="#991B1B" rx="4"/>
  <text x="170" y="740" font-family="system-ui, sans-serif" font-size="11" fill="#FCA5A5" text-anchor="middle">CancelOrder</text>
  
  <rect x="300" y="710" width="140" height="50" fill="#991B1B" rx="4"/>
  <text x="370" y="740" font-family="system-ui, sans-serif" font-size="11" fill="#FCA5A5" text-anchor="middle">RefundPayment</text>
  
  <rect x="500" y="710" width="140" height="50" fill="#991B1B" rx="4"/>
  <text x="570" y="740" font-family="system-ui, sans-serif" font-size="11" fill="#FCA5A5" text-anchor="middle">ReleaseItems</text>
  
  <!-- Compensation arrows -->
  <line x1="370" y1="710" x2="240" y2="710" stroke="#EF4444" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="570" y1="710" x2="440" y2="710" stroke="#EF4444" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="770" y1="600" x2="640" y2="680" stroke="#EF4444" stroke-width="2" stroke-dasharray="5,5"/>
  
  <text x="770" y="640" font-family="system-ui, sans-serif" font-size="10" fill="#EF4444">Shipping Failed!</text>
  
  <!-- Pattern Comparison -->
  <rect x="60" y="810" width="470" height="150" fill="#27272A" rx="8"/>
  <text x="295" y="845" font-family="system-ui, sans-serif" font-size="16" font-weight="700" fill="#3B82F6" text-anchor="middle">Choreography</text>
  <text x="295" y="870" font-family="system-ui, sans-serif" font-size="12" fill="#A1A1AA" text-anchor="middle">Services communicate via events</text>
  <text x="295" y="900" font-family="system-ui, sans-serif" font-size="11" fill="#22C55E" text-anchor="middle">✓ Loosely coupled</text>
  <text x="295" y="920" font-family="system-ui, sans-serif" font-size="11" fill="#22C55E" text-anchor="middle">✓ No central coordinator</text>
  <text x="295" y="940" font-family="system-ui, sans-serif" font-size="11" fill="#EF4444" text-anchor="middle">✗ Harder to understand flow</text>
  
  <rect x="550" y="810" width="470" height="150" fill="#27272A" rx="8"/>
  <text x="785" y="845" font-family="system-ui, sans-serif" font-size="16" font-weight="700" fill="#F59E0B" text-anchor="middle">Orchestration</text>
  <text x="785" y="870" font-family="system-ui, sans-serif" font-size="12" fill="#A1A1AA" text-anchor="middle">Central coordinator manages flow</text>
  <text x="785" y="900" font-family="system-ui, sans-serif" font-size="11" fill="#22C55E" text-anchor="middle">✓ Easy to understand</text>
  <text x="785" y="920" font-family="system-ui, sans-serif" font-size="11" fill="#22C55E" text-anchor="middle">✓ Centralized error handling</text>
  <text x="785" y="940" font-family="system-ui, sans-serif" font-size="11" fill="#EF4444" text-anchor="middle">✗ Single point of failure</text>
  
  <!-- Key Insight -->
  <rect x="60" y="980" width="960" height="40" fill="#27272A" rx="8"/>
  <text x="540" y="1007" font-family="system-ui, sans-serif" font-size="14" fill="#A1A1AA" text-anchor="middle">Saga = <tspan fill="#8B5CF6">Sequence of local transactions</tspan> + <tspan fill="#EF4444">Compensating transactions</tspan> for rollback</text>
  
  <text x="540" y="1060" font-family="system-ui, sans-serif" font-size="14" fill="#52525B" text-anchor="middle">@devweekends</text>
  
  <defs>
    <marker id="arrow-success" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#22C55E"/>
    </marker>
  </defs>
</svg>
