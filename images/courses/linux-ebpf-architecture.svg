<svg width="1080" height="1080" viewBox="0 0 1080 1080" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="1080" height="1080" fill="#18181B"/>

  <text x="60" y="80" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#FAFAFA" letter-spacing="3">DEV WEEKENDS</text>

  <rect x="60" y="140" width="240" height="40" fill="#F97316"/>
  <text x="180" y="168" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#FAFAFA" text-anchor="middle" letter-spacing="2">LINUX INTERNALS</text>

  <text x="60" y="260" font-family="system-ui, sans-serif" font-size="52" font-weight="700" fill="#FAFAFA">eBPF</text>
  <text x="60" y="315" font-family="system-ui, sans-serif" font-size="52" font-weight="700" fill="#F97316">Architecture</text>

  <text x="60" y="365" font-family="system-ui, sans-serif" font-size="16" fill="#A1A1AA">Kernel programmability framework</text>

  <!-- Main diagram area -->
  <rect x="60" y="390" width="960" height="600" fill="#27272A" rx="8"/>

  <!-- User Space -->
  <rect x="100" y="420" width="880" height="110" fill="#7C3AED" rx="8"/>
  <text x="540" y="445" font-family="system-ui, sans-serif" font-size="16" font-weight="700" fill="#FAFAFA" text-anchor="middle">USER SPACE</text>

  <rect x="130" y="460" width="200" height="55" fill="#6D28D9" rx="6"/>
  <text x="230" y="480" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#E9D5FF" text-anchor="middle">1. Write eBPF Program</text>
  <text x="230" y="497" font-family="monospace" font-size="8" fill="#E9D5FF" text-anchor="middle">C code with helpers</text>
  <text x="230" y="508" font-family="monospace" font-size="8" fill="#E9D5FF" text-anchor="middle">bpf_trace_printk()</text>

  <rect x="350" y="460" width="200" height="55" fill="#6D28D9" rx="6"/>
  <text x="450" y="480" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#E9D5FF" text-anchor="middle">2. Compile</text>
  <text x="450" y="497" font-family="monospace" font-size="8" fill="#E9D5FF" text-anchor="middle">clang -target bpf</text>
  <text x="450" y="508" font-family="monospace" font-size="8" fill="#E9D5FF" text-anchor="middle">→ .o (ELF)</text>

  <rect x="570" y="460" width="200" height="55" fill="#6D28D9" rx="6"/>
  <text x="670" y="480" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#E9D5FF" text-anchor="middle">3. Load</text>
  <text x="670" y="497" font-family="monospace" font-size="8" fill="#E9D5FF" text-anchor="middle">bpf() syscall</text>
  <text x="670" y="508" font-family="monospace" font-size="8" fill="#E9D5FF" text-anchor="middle">libbpf / bpftool</text>

  <rect x="790" y="460" width="160" height="55" fill="#6D28D9" rx="6"/>
  <text x="870" y="480" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#E9D5FF" text-anchor="middle">4. Maps</text>
  <text x="870" y="497" font-family="monospace" font-size="8" fill="#E9D5FF" text-anchor="middle">Shared data</text>
  <text x="870" y="508" font-family="monospace" font-size="8" fill="#E9D5FF" text-anchor="middle">kernel ↔ user</text>

  <!-- Arrow -->
  <path d="M 540 530 L 540 560" stroke="#F97316" stroke-width="3" marker-end="url(#arrowEbpf1)"/>
  <defs>
    <marker id="arrowEbpf1" markerWidth="10" markerHeight="7" refX="5" refY="7" orient="auto">
      <polygon points="0 0, 10 0, 5 7" fill="#F97316"/>
    </marker>
  </defs>

  <!-- Verifier -->
  <rect x="100" y="560" width="880" height="85" fill="#1E40AF" rx="8"/>
  <text x="540" y="585" font-family="system-ui, sans-serif" font-size="16" font-weight="700" fill="#FAFAFA" text-anchor="middle">eBPF VERIFIER (Safety Check)</text>

  <rect x="130" y="600" width="820" height="35" fill="#1E3A8A" rx="4"/>
  <circle cx="150" cy="612" r="2" fill="#93C5FD"/>
  <text x="160" y="615" font-family="system-ui, sans-serif" font-size="8" fill="#BFDBFE">Bounds checking</text>
  <circle cx="270" cy="612" r="2" fill="#93C5FD"/>
  <text x="280" y="615" font-family="system-ui, sans-serif" font-size="8" fill="#BFDBFE">No loops (or bounded)</text>
  <circle cx="420" cy="612" r="2" fill="#93C5FD"/>
  <text x="430" y="615" font-family="system-ui, sans-serif" font-size="8" fill="#BFDBFE">Memory access valid</text>
  <circle cx="590" cy="612" r="2" fill="#93C5FD"/>
  <text x="600" y="615" font-family="system-ui, sans-serif" font-size="8" fill="#BFDBFE">Reachable return</text>
  <circle cx="150" cy="628" r="2" fill="#93C5FD"/>
  <text x="160" y="631" font-family="system-ui, sans-serif" font-size="8" fill="#BFDBFE">Stack depth limits</text>
  <circle cx="290" cy="628" r="2" fill="#93C5FD"/>
  <text x="300" y="631" font-family="system-ui, sans-serif" font-size="8" fill="#BFDBFE">No kernel crashes possible</text>

  <!-- Arrow -->
  <path d="M 540 645 L 540 675" stroke="#F97316" stroke-width="3" marker-end="url(#arrowEbpf2)"/>
  <defs>
    <marker id="arrowEbpf2" markerWidth="10" markerHeight="7" refX="5" refY="7" orient="auto">
      <polygon points="0 0, 10 0, 5 7" fill="#F97316"/>
    </marker>
  </defs>

  <!-- JIT Compiler -->
  <rect x="100" y="675" width="880" height="60" fill="#166534" rx="8"/>
  <text x="540" y="700" font-family="system-ui, sans-serif" font-size="16" font-weight="700" fill="#FAFAFA" text-anchor="middle">JIT COMPILER</text>
  <rect x="130" y="710" width="820" height="18" fill="#14532D" rx="3"/>
  <text x="540" y="722" font-family="system-ui, sans-serif" font-size="9" fill="#BBF7D0" text-anchor="middle">Translate eBPF bytecode → Native machine code (x86-64, ARM64, etc.)</text>

  <!-- Arrow -->
  <path d="M 540 735 L 540 765" stroke="#F97316" stroke-width="3" marker-end="url(#arrowEbpf3)"/>
  <defs>
    <marker id="arrowEbpf3" markerWidth="10" markerHeight="7" refX="5" refY="7" orient="auto">
      <polygon points="0 0, 10 0, 5 7" fill="#F97316"/>
    </marker>
  </defs>

  <!-- Attach Points -->
  <rect x="100" y="765" width="880" height="110" fill="#9A3412" rx="8"/>
  <text x="540" y="790" font-family="system-ui, sans-serif" font-size="16" font-weight="700" fill="#FAFAFA" text-anchor="middle">ATTACH POINTS (Hook Locations)</text>

  <rect x="130" y="805" width="160" height="55" fill="#7C2D12" rx="4"/>
  <text x="210" y="825" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="#FED7AA" text-anchor="middle">Tracepoints</text>
  <text x="210" y="840" font-family="system-ui, sans-serif" font-size="7" fill="#FED7AA" text-anchor="middle">Kernel static hooks</text>
  <text x="210" y="850" font-family="system-ui, sans-serif" font-size="7" fill="#FED7AA" text-anchor="middle">sched, syscall, net</text>

  <rect x="305" y="805" width="160" height="55" fill="#7C2D12" rx="4"/>
  <text x="385" y="825" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="#FED7AA" text-anchor="middle">kprobes</text>
  <text x="385" y="840" font-family="system-ui, sans-serif" font-size="7" fill="#FED7AA" text-anchor="middle">Dynamic attach to</text>
  <text x="385" y="850" font-family="system-ui, sans-serif" font-size="7" fill="#FED7AA" text-anchor="middle">any kernel function</text>

  <rect x="480" y="805" width="160" height="55" fill="#7C2D12" rx="4"/>
  <text x="560" y="825" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="#FED7AA" text-anchor="middle">XDP</text>
  <text x="560" y="840" font-family="system-ui, sans-serif" font-size="7" fill="#FED7AA" text-anchor="middle">Packet processing</text>
  <text x="560" y="850" font-family="system-ui, sans-serif" font-size="7" fill="#FED7AA" text-anchor="middle">at NIC driver level</text>

  <rect x="655" y="805" width="160" height="55" fill="#7C2D12" rx="4"/>
  <text x="735" y="825" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="#FED7AA" text-anchor="middle">TC (Traffic Ctrl)</text>
  <text x="735" y="840" font-family="system-ui, sans-serif" font-size="7" fill="#FED7AA" text-anchor="middle">Packet filtering</text>
  <text x="735" y="850" font-family="system-ui, sans-serif" font-size="7" fill="#FED7AA" text-anchor="middle">ingress/egress</text>

  <rect x="830" y="805" width="120" height="55" fill="#7C2D12" rx="4"/>
  <text x="890" y="825" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="#FED7AA" text-anchor="middle">LSM</text>
  <text x="890" y="840" font-family="system-ui, sans-serif" font-size="7" fill="#FED7AA" text-anchor="middle">Security hooks</text>

  <!-- Execution -->
  <rect x="100" y="890" width="880" height="90" fill="#0F172A" rx="8"/>
  <text x="540" y="915" font-family="system-ui, sans-serif" font-size="16" font-weight="700" fill="#FAFAFA" text-anchor="middle">KERNEL EXECUTION</text>

  <rect x="130" y="930" width="390" height="40" fill="#1E293B" rx="4"/>
  <text x="325" y="947" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#0EA5E9" text-anchor="middle">Helpers</text>
  <circle cx="150" cy="963" r="2" fill="#0EA5E9"/>
  <text x="160" y="966" font-family="system-ui, sans-serif" font-size="8" fill="#E5E5E5">bpf_probe_read()</text>
  <circle cx="280" cy="963" r="2" fill="#0EA5E9"/>
  <text x="290" y="966" font-family="system-ui, sans-serif" font-size="8" fill="#E5E5E5">bpf_get_current_pid_tgid()</text>

  <rect x="540" y="930" width="410" height="40" fill="#1E293B" rx="4"/>
  <text x="745" y="947" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#22C55E" text-anchor="middle">Maps (Data Structures)</text>
  <circle cx="560" cy="963" r="2" fill="#22C55E"/>
  <text x="570" y="966" font-family="system-ui, sans-serif" font-size="8" fill="#E5E5E5">Hash, Array, Ring Buffer</text>

  <text x="540" y="1055" font-family="system-ui, sans-serif" font-size="14" fill="#52525B" text-anchor="middle">@devweekends</text>
</svg>
