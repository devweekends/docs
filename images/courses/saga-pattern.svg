<svg width="1080" height="1080" viewBox="0 0 1080 1080" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="1080" height="1080" fill="#18181B"/>
  
  <text x="60" y="80" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#FAFAFA" letter-spacing="3">DEV WEEKENDS</text>
  
  <rect x="60" y="140" width="260" height="40" fill="#A855F7"/>
  <text x="190" y="168" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#FAFAFA" text-anchor="middle" letter-spacing="2">DISTRIBUTED SYSTEMS</text>
  
  <text x="60" y="280" font-family="system-ui, sans-serif" font-size="48" font-weight="700" fill="#FAFAFA">Saga</text>
  <text x="60" y="340" font-family="system-ui, sans-serif" font-size="48" font-weight="700" fill="#A855F7">Pattern</text>
  
  <text x="60" y="400" font-family="system-ui, sans-serif" font-size="18" fill="#A1A1AA">Long-running transactions without distributed locks</text>
  
  <!-- Main diagram area -->
  <rect x="60" y="440" width="960" height="520" fill="#27272A" rx="8"/>
  
  <!-- Choreography vs Orchestration -->
  <text x="540" y="475" font-family="system-ui, sans-serif" font-size="16" font-weight="600" fill="#FAFAFA" text-anchor="middle">Two Approaches</text>
  
  <!-- Choreography Side -->
  <rect x="100" y="490" width="420" height="430" fill="#1E3A8A" rx="8"/>
  <text x="310" y="520" font-family="system-ui, sans-serif" font-size="18" font-weight="600" fill="#FAFAFA" text-anchor="middle">Choreography</text>
  <text x="310" y="540" font-family="system-ui, sans-serif" font-size="11" fill="#93C5FD" text-anchor="middle">Event-driven, decentralized</text>
  
  <!-- Services -->
  <rect x="130" y="560" width="120" height="50" fill="#3B82F6" rx="4"/>
  <text x="190" y="590" font-family="system-ui, sans-serif" font-size="12" fill="#FAFAFA" text-anchor="middle">Order Service</text>
  
  <rect x="270" y="560" width="120" height="50" fill="#3B82F6" rx="4"/>
  <text x="330" y="590" font-family="system-ui, sans-serif" font-size="12" fill="#FAFAFA" text-anchor="middle">Payment Service</text>
  
  <rect x="410" y="560" width="120" height="50" fill="#3B82F6" rx="4"/>
  <text x="470" y="590" font-family="system-ui, sans-serif" font-size="12" fill="#FAFAFA" text-anchor="middle">Inventory Service</text>
  
  <!-- Event Flow -->
  <path d="M 190 610 L 190 640 L 330 640 L 330 610" stroke="#22C55E" stroke-width="2" fill="none" marker-end="url(#arrow1)"/>
  <text x="260" y="635" font-family="system-ui, sans-serif" font-size="9" fill="#22C55E" text-anchor="middle">OrderCreated</text>
  
  <path d="M 330 610 L 330 670 L 470 670 L 470 610" stroke="#22C55E" stroke-width="2" fill="none" marker-end="url(#arrow2)"/>
  <text x="400" y="665" font-family="system-ui, sans-serif" font-size="9" fill="#22C55E" text-anchor="middle">PaymentProcessed</text>
  
  <defs>
    <marker id="arrow1" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#22C55E"/>
    </marker>
    <marker id="arrow2" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#22C55E"/>
    </marker>
  </defs>
  
  <!-- Compensation -->
  <text x="310" y="710" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#EF4444" text-anchor="middle">If failure → Compensate</text>
  
  <path d="M 470 730 L 470 760 L 330 760 L 330 730" stroke="#EF4444" stroke-width="2" stroke-dasharray="4,4" fill="none" marker-end="url(#arrow3)"/>
  <text x="400" y="755" font-family="system-ui, sans-serif" font-size="9" fill="#EF4444" text-anchor="middle">ReleaseInventory</text>
  
  <path d="M 330 730 L 330 790 L 190 790 L 190 730" stroke="#EF4444" stroke-width="2" stroke-dasharray="4,4" fill="none" marker-end="url(#arrow4)"/>
  <text x="260" y="785" font-family="system-ui, sans-serif" font-size="9" fill="#EF4444" text-anchor="middle">RefundPayment</text>
  
  <defs>
    <marker id="arrow3" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#EF4444"/>
    </marker>
    <marker id="arrow4" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#EF4444"/>
    </marker>
  </defs>
  
  <!-- Pros/Cons -->
  <text x="130" y="830" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#22C55E">Pros:</text>
  <text x="130" y="850" font-family="system-ui, sans-serif" font-size="9" fill="#E5E5E5">• Loose coupling</text>
  <text x="130" y="865" font-family="system-ui, sans-serif" font-size="9" fill="#E5E5E5">• High scalability</text>
  
  <text x="300" y="830" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#EF4444">Cons:</text>
  <text x="300" y="850" font-family="system-ui, sans-serif" font-size="9" fill="#E5E5E5">• Hard to track flow</text>
  <text x="300" y="865" font-family="system-ui, sans-serif" font-size="9" fill="#E5E5E5">• Complex debugging</text>
  
  <!-- Orchestration Side -->
  <rect x="560" y="490" width="420" height="430" fill="#14532D" rx="8"/>
  <text x="770" y="520" font-family="system-ui, sans-serif" font-size="18" font-weight="600" fill="#FAFAFA" text-anchor="middle">Orchestration</text>
  <text x="770" y="540" font-family="system-ui, sans-serif" font-size="11" fill="#BBF7D0" text-anchor="middle">Centralized coordinator</text>
  
  <!-- Orchestrator -->
  <rect x="710" y="560" width="120" height="50" fill="#22C55E" rx="4"/>
  <text x="770" y="590" font-family="system-ui, sans-serif" font-size="12" fill="#FAFAFA" text-anchor="middle">Saga Orchestrator</text>
  
  <!-- Services -->
  <rect x="590" y="660" width="100" height="40" fill="#166534" rx="4"/>
  <text x="640" y="685" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" text-anchor="middle">Order</text>
  
  <rect x="710" y="660" width="100" height="40" fill="#166534" rx="4"/>
  <text x="760" y="685" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" text-anchor="middle">Payment</text>
  
  <rect x="830" y="660" width="100" height="40" fill="#166534" rx="4"/>
  <text x="880" y="685" font-family="system-ui, sans-serif" font-size="10" fill="#FAFAFA" text-anchor="middle">Inventory</text>
  
  <!-- Command Flow -->
  <path d="M 770 610 L 640 660" stroke="#3B82F6" stroke-width="2" fill="none" marker-end="url(#arrow5)"/>
  <text x="690" y="630" font-family="system-ui, sans-serif" font-size="8" fill="#3B82F6">1. Create</text>
  
  <path d="M 770 610 L 760 660" stroke="#3B82F6" stroke-width="2" fill="none" marker-end="url(#arrow6)"/>
  <text x="770" y="630" font-family="system-ui, sans-serif" font-size="8" fill="#3B82F6">2. Pay</text>
  
  <path d="M 770 610 L 880 660" stroke="#3B82F6" stroke-width="2" fill="none" marker-end="url(#arrow7)"/>
  <text x="840" y="630" font-family="system-ui, sans-serif" font-size="8" fill="#3B82F6">3. Reserve</text>
  
  <defs>
    <marker id="arrow5" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#3B82F6"/>
    </marker>
    <marker id="arrow6" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#3B82F6"/>
    </marker>
    <marker id="arrow7" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#3B82F6"/>
    </marker>
  </defs>
  
  <!-- Compensation -->
  <text x="770" y="730" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#EF4444" text-anchor="middle">If failure → Orchestrator compensates</text>
  
  <path d="M 770 750 L 880 790" stroke="#EF4444" stroke-width="2" stroke-dasharray="4,4" fill="none"/>
  <path d="M 770 750 L 760 790" stroke="#EF4444" stroke-width="2" stroke-dasharray="4,4" fill="none"/>
  <path d="M 770 750 L 640 790" stroke="#EF4444" stroke-width="2" stroke-dasharray="4,4" fill="none"/>
  
  <!-- Pros/Cons -->
  <text x="590" y="830" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#22C55E">Pros:</text>
  <text x="590" y="850" font-family="system-ui, sans-serif" font-size="9" fill="#E5E5E5">• Clear flow visibility</text>
  <text x="590" y="865" font-family="system-ui, sans-serif" font-size="9" fill="#E5E5E5">• Easier debugging</text>
  
  <text x="780" y="830" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#EF4444">Cons:</text>
  <text x="780" y="850" font-family="system-ui, sans-serif" font-size="9" fill="#E5E5E5">• Single point of failure</text>
  <text x="780" y="865" font-family="system-ui, sans-serif" font-size="9" fill="#E5E5E5">• Tight coupling</text>
  
  <!-- Key insight -->
  <rect x="60" y="980" width="960" height="40" fill="#27272A" rx="8"/>
  <text x="540" y="1007" font-family="system-ui, sans-serif" font-size="14" fill="#A1A1AA" text-anchor="middle">Use <tspan fill="#3B82F6">Choreography</tspan> for simple flows, <tspan fill="#22C55E">Orchestration</tspan> for complex business logic</text>
  
  <text x="540" y="1050" font-family="system-ui, sans-serif" font-size="14" fill="#52525B" text-anchor="middle">@devweekends</text>
</svg>
