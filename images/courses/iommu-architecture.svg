<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 400">
  <!-- Background -->
  <rect width="700" height="400" fill="#1e1e1e" />
  
  <!-- Title -->
  <text x="350" y="40" font-family="Arial, sans-serif" font-size="24" fill="#ffffff" text-anchor="middle" font-weight="bold">IOMMU Architecture</text>
  
  <!-- Device -->
  <g transform="translate(50, 100)">
    <rect x="0" y="0" width="120" height="80" fill="#2196F3" rx="4" />
    <text x="60" y="35" font-family="Arial, sans-serif" font-size="16" fill="#fff" text-anchor="middle" font-weight="bold">Device</text>
    <text x="60" y="55" font-family="Arial, sans-serif" font-size="12" fill="#fff" text-anchor="middle">(NIC/GPU)</text>
    
    <text x="60" y="100" font-family="Arial, sans-serif" font-size="12" fill="#ccc" text-anchor="middle">DMA Request</text>
    <text x="60" y="115" font-family="Arial, sans-serif" font-size="12" fill="#ccc" text-anchor="middle">IOVA: 0x1000</text>
  </g>
  
  <!-- Arrow -->
  <line x1="170" y1="140" x2="230" y2="140" stroke="#fff" stroke-width="2" marker-end="url(#arrow)" />
  
  <!-- IOMMU -->
  <g transform="translate(230, 80)">
    <rect x="0" y="0" width="200" height="200" fill="#FF9800" rx="4" />
    <text x="100" y="30" font-family="Arial, sans-serif" font-size="18" fill="#fff" text-anchor="middle" font-weight="bold">IOMMU</text>
    
    <!-- Internal Logic -->
    <rect x="20" y="50" width="160" height="40" fill="#333" />
    <text x="100" y="75" font-family="Arial, sans-serif" font-size="12" fill="#fff" text-anchor="middle">Device ID Check</text>
    
    <rect x="20" y="100" width="160" height="40" fill="#333" />
    <text x="100" y="125" font-family="Arial, sans-serif" font-size="12" fill="#fff" text-anchor="middle">Page Table Walk</text>
    
    <rect x="20" y="150" width="160" height="40" fill="#333" />
    <text x="100" y="175" font-family="Arial, sans-serif" font-size="12" fill="#fff" text-anchor="middle">Permission Check</text>
  </g>
  
  <!-- Arrow -->
  <line x1="430" y1="140" x2="490" y2="140" stroke="#fff" stroke-width="2" marker-end="url(#arrow)" />
  
  <!-- Physical Memory -->
  <g transform="translate(490, 80)">
    <rect x="0" y="0" width="160" height="200" fill="#4CAF50" rx="4" />
    <text x="80" y="30" font-family="Arial, sans-serif" font-size="18" fill="#fff" text-anchor="middle" font-weight="bold">RAM</text>
    
    <!-- Allowed Region -->
    <rect x="10" y="50" width="140" height="40" fill="#8BC34A" stroke="#fff" stroke-dasharray="4" />
    <text x="80" y="75" font-family="Arial, sans-serif" font-size="12" fill="#000" text-anchor="middle">Allowed (0x8000)</text>
    
    <!-- Blocked Region -->
    <rect x="10" y="100" width="140" height="40" fill="#F44336" opacity="0.5" />
    <text x="80" y="125" font-family="Arial, sans-serif" font-size="12" fill="#fff" text-anchor="middle">Kernel (Blocked)</text>
  </g>
  
  <!-- Status -->
  <text x="350" y="350" font-family="Arial, sans-serif" font-size="14" fill="#ccc" text-anchor="middle">IOVA 0x1000 -> Phys 0x8000 (Access Granted)</text>

  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#fff" />
    </marker>
  </defs>
</svg>
