<svg width="1080" height="1080" viewBox="0 0 1080 1080" fill="none" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="1080" height="1080" fill="#FAFAFA"/>
  
  <!-- Header -->
  <text x="60" y="80" font-family="system-ui, sans-serif" font-size="14" font-weight="600" letter-spacing="3">
    <tspan fill="#667EEA">DEV</tspan><tspan fill="#764BA2"> WEEKENDS</tspan>
  </text>
  
  <!-- Topic Tag -->
  <rect x="60" y="110" width="200" height="36" rx="18" fill="#FF6B6B"/>
  <text x="160" y="134" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#FFFFFF" text-anchor="middle" letter-spacing="2">SYSTEM DESIGN</text>
  
  <!-- Title -->
  <text x="60" y="220" font-family="system-ui, sans-serif" font-size="52" font-weight="800" fill="#1a1a2e">WhatsApp</text>
  <text x="60" y="285" font-family="system-ui, sans-serif" font-size="52" font-weight="800" fill="#FF6B6B">Architecture</text>
  
  <!-- High Level Architecture -->
  <rect x="60" y="320" width="960" height="440" rx="16" fill="#F3F4F6"/>
  
  <!-- Users -->
  <rect x="100" y="380" width="100" height="80" rx="8" fill="#3B82F6"/>
  <text x="150" y="415" font-family="system-ui, sans-serif" font-size="24" fill="#FFFFFF" text-anchor="middle">ğŸ“±</text>
  <text x="150" y="445" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#FFFFFF" text-anchor="middle">User A</text>
  
  <rect x="100" y="550" width="100" height="80" rx="8" fill="#3B82F6"/>
  <text x="150" y="585" font-family="system-ui, sans-serif" font-size="24" fill="#FFFFFF" text-anchor="middle">ğŸ“±</text>
  <text x="150" y="615" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#FFFFFF" text-anchor="middle">User B</text>
  
  <!-- WebSocket arrows -->
  <line x1="200" y1="420" x2="280" y2="420" stroke="#10B981" stroke-width="2"/>
  <line x1="200" y1="590" x2="280" y2="590" stroke="#10B981" stroke-width="2"/>
  <text x="240" y="410" font-family="system-ui, sans-serif" font-size="9" fill="#10B981">WebSocket</text>
  <text x="240" y="580" font-family="system-ui, sans-serif" font-size="9" fill="#10B981">WebSocket</text>
  
  <!-- Gateway -->
  <rect x="290" y="360" width="140" height="280" rx="8" fill="#10B981"/>
  <text x="360" y="400" font-family="system-ui, sans-serif" font-size="14" font-weight="700" fill="#FFFFFF" text-anchor="middle">WebSocket</text>
  <text x="360" y="420" font-family="system-ui, sans-serif" font-size="14" font-weight="700" fill="#FFFFFF" text-anchor="middle">Gateway</text>
  <line x1="310" y1="440" x2="410" y2="440" stroke="#34D399" stroke-width="1"/>
  <text x="315" y="465" font-family="system-ui, sans-serif" font-size="10" fill="#D1FAE5">â€¢ Persistent connections</text>
  <text x="315" y="485" font-family="system-ui, sans-serif" font-size="10" fill="#D1FAE5">â€¢ Connection pooling</text>
  <text x="315" y="505" font-family="system-ui, sans-serif" font-size="10" fill="#D1FAE5">â€¢ Heartbeat/ping</text>
  <text x="315" y="545" font-family="system-ui, sans-serif" font-size="10" fill="#D1FAE5">Tracks:</text>
  <text x="315" y="565" font-family="system-ui, sans-serif" font-size="10" fill="#D1FAE5">user_id â†’ server_id</text>
  <text x="315" y="585" font-family="system-ui, sans-serif" font-size="10" fill="#D1FAE5">user_id â†’ connection</text>
  
  <!-- Arrow to Chat Service -->
  <line x1="430" y1="500" x2="480" y2="500" stroke="#6B7280" stroke-width="2"/>
  <polygon points="480,495 495,500 480,505" fill="#6B7280"/>
  
  <!-- Chat Service -->
  <rect x="500" y="380" width="140" height="140" rx="8" fill="#8B5CF6"/>
  <text x="570" y="420" font-family="system-ui, sans-serif" font-size="14" font-weight="700" fill="#FFFFFF" text-anchor="middle">Chat Service</text>
  <line x1="520" y1="440" x2="620" y2="440" stroke="#A78BFA" stroke-width="1"/>
  <text x="530" y="465" font-family="system-ui, sans-serif" font-size="10" fill="#EDE9FE">â€¢ Route messages</text>
  <text x="530" y="485" font-family="system-ui, sans-serif" font-size="10" fill="#EDE9FE">â€¢ Group messaging</text>
  <text x="530" y="505" font-family="system-ui, sans-serif" font-size="10" fill="#EDE9FE">â€¢ Delivery receipts</text>
  
  <!-- Message Queue -->
  <rect x="500" y="540" width="140" height="80" rx="8" fill="#F59E0B"/>
  <text x="570" y="575" font-family="system-ui, sans-serif" font-size="14" font-weight="700" fill="#FFFFFF" text-anchor="middle">Message Queue</text>
  <text x="570" y="605" font-family="system-ui, sans-serif" font-size="10" fill="#FEF3C7" text-anchor="middle">Kafka / RabbitMQ</text>
  
  <!-- Arrow Chat to Queue -->
  <line x1="570" y1="520" x2="570" y2="540" stroke="#6B7280" stroke-width="2"/>
  
  <!-- Arrow to Presence Service -->
  <line x1="640" y1="450" x2="700" y2="450" stroke="#6B7280" stroke-width="2"/>
  <polygon points="700,445 715,450 700,455" fill="#6B7280"/>
  
  <!-- Presence Service -->
  <rect x="720" y="360" width="140" height="100" rx="8" fill="#EC4899"/>
  <text x="790" y="400" font-family="system-ui, sans-serif" font-size="13" font-weight="700" fill="#FFFFFF" text-anchor="middle">Presence Service</text>
  <line x1="740" y1="420" x2="840" y2="420" stroke="#F472B6" stroke-width="1"/>
  <text x="750" y="445" font-family="system-ui, sans-serif" font-size="10" fill="#FCE7F3">â€¢ Online/Offline status</text>
  <text x="750" y="460" font-family="system-ui, sans-serif" font-size="10" fill="#FCE7F3">â€¢ "Last seen" timestamp</text>
  
  <!-- Message Store -->
  <rect x="720" y="480" width="140" height="100" rx="8" fill="#EF4444"/>
  <text x="790" y="515" font-family="system-ui, sans-serif" font-size="13" font-weight="700" fill="#FFFFFF" text-anchor="middle">Message Store</text>
  <line x1="740" y1="535" x2="840" y2="535" stroke="#FCA5A5" stroke-width="1"/>
  <text x="750" y="555" font-family="system-ui, sans-serif" font-size="10" fill="#FEE2E2">â€¢ Cassandra (chat history)</text>
  <text x="750" y="570" font-family="system-ui, sans-serif" font-size="10" fill="#FEE2E2">â€¢ Partitioned by chat_id</text>
  
  <!-- Arrow Queue to Store -->
  <line x1="640" y1="580" x2="720" y2="530" stroke="#6B7280" stroke-width="2"/>
  
  <!-- Redis for Presence -->
  <rect x="880" y="380" width="110" height="70" rx="8" fill="#14B8A6"/>
  <text x="935" y="415" font-family="system-ui, sans-serif" font-size="12" font-weight="700" fill="#FFFFFF" text-anchor="middle">Redis</text>
  <text x="935" y="440" font-family="system-ui, sans-serif" font-size="10" fill="#CCFBF1" text-anchor="middle">Session store</text>
  
  <!-- Arrow Presence to Redis -->
  <line x1="860" y1="410" x2="880" y2="415" stroke="#6B7280" stroke-width="2"/>
  
  <!-- Key Features -->
  <text x="60" y="800" font-family="system-ui, sans-serif" font-size="20" font-weight="700" fill="#1F2937">ğŸ”‘ Key Design Features</text>
  
  <!-- E2E Encryption -->
  <rect x="60" y="830" width="300" height="100" rx="12" fill="#FFFFFF" stroke="#10B981" stroke-width="2"/>
  <text x="90" y="865" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#059669">ğŸ” End-to-End Encryption</text>
  <text x="90" y="895" font-family="system-ui, sans-serif" font-size="11" fill="#047857">Signal Protocol (Double Ratchet)</text>
  <text x="90" y="915" font-family="system-ui, sans-serif" font-size="11" fill="#6B7280">Server can't read messages!</text>
  
  <!-- Message Delivery -->
  <rect x="380" y="830" width="300" height="100" rx="12" fill="#FFFFFF" stroke="#3B82F6" stroke-width="2"/>
  <text x="410" y="865" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#1E40AF">âœ“âœ“ Message Status</text>
  <text x="410" y="895" font-family="system-ui, sans-serif" font-size="11" fill="#3B82F6">âœ“ Sent (to server)</text>
  <text x="510" y="895" font-family="system-ui, sans-serif" font-size="11" fill="#3B82F6">âœ“âœ“ Delivered</text>
  <text x="410" y="915" font-family="system-ui, sans-serif" font-size="11" fill="#3B82F6">âœ“âœ“ Read (blue ticks)</text>
  
  <!-- Offline Support -->
  <rect x="700" y="830" width="320" height="100" rx="12" fill="#FFFFFF" stroke="#8B5CF6" stroke-width="2"/>
  <text x="730" y="865" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#6D28D9">ğŸ“´ Offline Message Handling</text>
  <text x="730" y="895" font-family="system-ui, sans-serif" font-size="11" fill="#8B5CF6">Store in queue until recipient online</text>
  <text x="730" y="915" font-family="system-ui, sans-serif" font-size="11" fill="#6B7280">Push notification via FCM/APNs</text>
  
  <!-- Scale Numbers -->
  <rect x="60" y="950" width="960" height="80" rx="12" fill="#EFF6FF" stroke="#3B82F6" stroke-width="2"/>
  <text x="90" y="985" font-family="system-ui, sans-serif" font-size="14" font-weight="700" fill="#1E40AF">ğŸ“Š WhatsApp Scale (Real Numbers)</text>
  <text x="90" y="1010" font-family="system-ui, sans-serif" font-size="12" fill="#3B82F6">2B+ users â€¢ 100B+ messages/day â€¢ 1M connections per server</text>
  <text x="600" y="1010" font-family="system-ui, sans-serif" font-size="12" fill="#3B82F6">Erlang for millions of concurrent connections</text>
  
  <!-- Footer -->
  <text x="540" y="1055" font-family="system-ui, sans-serif" font-size="14" fill="#9CA3AF" text-anchor="middle">@devweekends</text>
</svg>