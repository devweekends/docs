<svg width="1080" height="800" viewBox="0 0 1080 800" fill="none" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="1080" height="800" fill="#FAFAFA"/>
  
  <!-- Header -->
  <text x="60" y="50" font-family="system-ui, sans-serif" font-size="14" font-weight="600" letter-spacing="3">
    <tspan fill="#667EEA">DEV</tspan><tspan fill="#764BA2"> WEEKENDS</tspan>
  </text>
  
  <!-- Topic Tag -->
  <rect x="60" y="70" width="200" height="32" rx="16" fill="#10B981"/>
  <text x="160" y="92" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#FFFFFF" text-anchor="middle" letter-spacing="2">DATABASE SHARDING</text>
  
  <!-- Title -->
  <text x="60" y="145" font-family="system-ui, sans-serif" font-size="32" font-weight="800" fill="#1a1a2e">Sharding Implementation</text>
  <text x="60" y="175" font-family="system-ui, sans-serif" font-size="16" fill="#6B7280">Horizontal partitioning for massive scale</text>
  
  <!-- Application Layer -->
  <rect x="380" y="200" width="200" height="60" rx="10" fill="#3B82F6" stroke="#2563EB" stroke-width="2"/>
  <text x="480" y="235" font-family="system-ui, sans-serif" font-size="14" font-weight="700" fill="#FFFFFF" text-anchor="middle">Application</text>
  
  <!-- Shard Router -->
  <rect x="340" y="300" width="280" height="80" rx="10" fill="#8B5CF6" stroke="#7C3AED" stroke-width="2"/>
  <text x="480" y="335" font-family="system-ui, sans-serif" font-size="16" font-weight="700" fill="#FFFFFF" text-anchor="middle">Shard Router</text>
  <text x="480" y="360" font-family="system-ui, sans-serif" font-size="11" fill="#E9D5FF" text-anchor="middle">hash(user_id) % num_shards</text>
  
  <!-- Arrow from App to Router -->
  <path d="M480 260 L480 295" stroke="#3B82F6" stroke-width="2" marker-end="url(#blueArrow3)"/>
  
  <!-- Shards -->
  <rect x="60" y="440" width="180" height="140" rx="12" fill="#ECFDF5" stroke="#10B981" stroke-width="2"/>
  <text x="150" y="475" font-family="system-ui, sans-serif" font-size="14" font-weight="700" fill="#10B981" text-anchor="middle">Shard 0</text>
  <rect x="80" y="495" width="140" height="25" rx="4" fill="#FFFFFF"/>
  <text x="150" y="513" font-family="system-ui, sans-serif" font-size="10" fill="#6B7280" text-anchor="middle">Users 0, 4, 8, 12...</text>
  <rect x="80" y="530" width="140" height="25" rx="4" fill="#FFFFFF"/>
  <text x="150" y="548" font-family="system-ui, sans-serif" font-size="10" fill="#6B7280" text-anchor="middle">Orders for users</text>
  
  <rect x="280" y="440" width="180" height="140" rx="12" fill="#EFF6FF" stroke="#3B82F6" stroke-width="2"/>
  <text x="370" y="475" font-family="system-ui, sans-serif" font-size="14" font-weight="700" fill="#3B82F6" text-anchor="middle">Shard 1</text>
  <rect x="300" y="495" width="140" height="25" rx="4" fill="#FFFFFF"/>
  <text x="370" y="513" font-family="system-ui, sans-serif" font-size="10" fill="#6B7280" text-anchor="middle">Users 1, 5, 9, 13...</text>
  <rect x="300" y="530" width="140" height="25" rx="4" fill="#FFFFFF"/>
  <text x="370" y="548" font-family="system-ui, sans-serif" font-size="10" fill="#6B7280" text-anchor="middle">Orders for users</text>
  
  <rect x="500" y="440" width="180" height="140" rx="12" fill="#FEF3C7" stroke="#F59E0B" stroke-width="2"/>
  <text x="590" y="475" font-family="system-ui, sans-serif" font-size="14" font-weight="700" fill="#F59E0B" text-anchor="middle">Shard 2</text>
  <rect x="520" y="495" width="140" height="25" rx="4" fill="#FFFFFF"/>
  <text x="590" y="513" font-family="system-ui, sans-serif" font-size="10" fill="#6B7280" text-anchor="middle">Users 2, 6, 10, 14...</text>
  <rect x="520" y="530" width="140" height="25" rx="4" fill="#FFFFFF"/>
  <text x="590" y="548" font-family="system-ui, sans-serif" font-size="10" fill="#6B7280" text-anchor="middle">Orders for users</text>
  
  <rect x="720" y="440" width="180" height="140" rx="12" fill="#F3E8FF" stroke="#8B5CF6" stroke-width="2"/>
  <text x="810" y="475" font-family="system-ui, sans-serif" font-size="14" font-weight="700" fill="#8B5CF6" text-anchor="middle">Shard 3</text>
  <rect x="740" y="495" width="140" height="25" rx="4" fill="#FFFFFF"/>
  <text x="810" y="513" font-family="system-ui, sans-serif" font-size="10" fill="#6B7280" text-anchor="middle">Users 3, 7, 11, 15...</text>
  <rect x="740" y="530" width="140" height="25" rx="4" fill="#FFFFFF"/>
  <text x="810" y="548" font-family="system-ui, sans-serif" font-size="10" fill="#6B7280" text-anchor="middle">Orders for users</text>
  
  <!-- Arrows from Router to Shards -->
  <path d="M380 380 L150 435" stroke="#8B5CF6" stroke-width="2" marker-end="url(#purpleArrow3)"/>
  <path d="M420 380 L370 435" stroke="#8B5CF6" stroke-width="2" marker-end="url(#purpleArrow3)"/>
  <path d="M540 380 L590 435" stroke="#8B5CF6" stroke-width="2" marker-end="url(#purpleArrow3)"/>
  <path d="M580 380 L810 435" stroke="#8B5CF6" stroke-width="2" marker-end="url(#purpleArrow3)"/>
  
  <!-- Arrow Definitions -->
  <defs>
    <marker id="blueArrow3" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#3B82F6"/>
    </marker>
    <marker id="purpleArrow3" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#8B5CF6"/>
    </marker>
    <marker id="greenArrow3" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#10B981"/>
    </marker>
  </defs>
  
  <!-- Query Examples -->
  <text x="60" y="620" font-family="system-ui, sans-serif" font-size="18" font-weight="700" fill="#1a1a2e">Query Routing Examples</text>
  
  <!-- Point Query -->
  <rect x="60" y="640" width="300" height="100" rx="10" fill="#ECFDF5" stroke="#10B981" stroke-width="1"/>
  <text x="80" y="670" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#10B981">âœ“ Point Query (Fast)</text>
  <text x="80" y="695" font-family="system-ui, sans-serif" font-size="11" fill="#6B7280">find_by_id(user_id="user_123")</text>
  <text x="80" y="720" font-family="system-ui, sans-serif" font-size="10" fill="#9CA3AF">â†’ Routes to exactly 1 shard</text>
  
  <!-- Scatter-Gather Query -->
  <rect x="390" y="640" width="300" height="100" rx="10" fill="#FEF3C7" stroke="#F59E0B" stroke-width="1"/>
  <text x="410" y="670" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#F59E0B">âš  Scatter-Gather (Slow)</text>
  <text x="410" y="695" font-family="system-ui, sans-serif" font-size="11" fill="#6B7280">find_by_email("alice@ex.com")</text>
  <text x="410" y="720" font-family="system-ui, sans-serif" font-size="10" fill="#9CA3AF">â†’ Must query ALL shards</text>
  
  <!-- Cross-Shard Join -->
  <rect x="720" y="640" width="300" height="100" rx="10" fill="#FEF2F2" stroke="#EF4444" stroke-width="1"/>
  <text x="740" y="670" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#EF4444">âœ— Cross-Shard Join (Avoid)</text>
  <text x="740" y="695" font-family="system-ui, sans-serif" font-size="11" fill="#6B7280">users JOIN orders (diff shards)</text>
  <text x="740" y="720" font-family="system-ui, sans-serif" font-size="10" fill="#9CA3AF">â†’ Denormalize or use same shard key</text>
  
  <!-- Best Practices -->
  <rect x="60" y="760" width="960" height="30" rx="6" fill="#EFF6FF"/>
  <text x="540" y="782" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#3B82F6" text-anchor="middle">ðŸ’¡ Best Practice: Choose shard key that matches your most common query pattern (usually user_id)</text>
  
  <!-- Footer -->
  <text x="540" y="810" font-family="system-ui, sans-serif" font-size="12" fill="#9CA3AF" text-anchor="middle">@devweekends</text>
</svg>
