<svg width="1080" height="1080" viewBox="0 0 1080 1080" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="1080" height="1080" fill="#18181B"/>

  <text x="60" y="80" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#FAFAFA" letter-spacing="3">DEV WEEKENDS</text>

  <rect x="60" y="140" width="240" height="40" fill="#F59E0B"/>
  <text x="180" y="168" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#FAFAFA" text-anchor="middle" letter-spacing="2">OPERATING SYSTEMS</text>

  <text x="60" y="280" font-family="system-ui, sans-serif" font-size="48" font-weight="700" fill="#FAFAFA">Virtual Memory</text>
  <text x="60" y="340" font-family="system-ui, sans-serif" font-size="48" font-weight="700" fill="#F59E0B">& Paging</text>

  <text x="60" y="400" font-family="system-ui, sans-serif" font-size="18" fill="#A1A1AA">Memory abstraction and address translation</text>

  <!-- Main diagram area -->
  <rect x="60" y="440" width="960" height="520" fill="#27272A" rx="8"/>

  <!-- Virtual Address Space -->
  <rect x="100" y="470" width="280" height="460" fill="#3F3F46" rx="8"/>
  <text x="240" y="500" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#0EA5E9" text-anchor="middle">Virtual Address Space</text>
  <text x="240" y="520" font-family="system-ui, sans-serif" font-size="10" fill="#71717A" text-anchor="middle">(Process View)</text>

  <!-- Virtual pages -->
  <rect x="130" y="540" width="180" height="45" fill="#7C3AED" rx="4"/>
  <text x="220" y="565" font-family="monospace" font-size="11" fill="#FAFAFA" text-anchor="middle">VPage 0 (0x0000)</text>

  <rect x="130" y="595" width="180" height="45" fill="#3B82F6" rx="4"/>
  <text x="220" y="620" font-family="monospace" font-size="11" fill="#FAFAFA" text-anchor="middle">VPage 1 (0x1000)</text>

  <rect x="130" y="650" width="180" height="45" fill="#22C55E" rx="4"/>
  <text x="220" y="675" font-family="monospace" font-size="11" fill="#FAFAFA" text-anchor="middle">VPage 2 (0x2000)</text>

  <rect x="130" y="705" width="180" height="45" fill="#F59E0B" rx="4"/>
  <text x="220" y="730" font-family="monospace" font-size="11" fill="#FAFAFA" text-anchor="middle">VPage 3 (0x3000)</text>

  <rect x="130" y="760" width="180" height="45" fill="#EF4444" rx="4"/>
  <text x="220" y="785" font-family="monospace" font-size="11" fill="#FAFAFA" text-anchor="middle">VPage 4 (0x4000)</text>

  <rect x="130" y="815" width="180" height="45" fill="#8B5CF6" rx="4"/>
  <text x="220" y="840" font-family="monospace" font-size="11" fill="#FAFAFA" text-anchor="middle">VPage 5 (0x5000)</text>

  <text x="240" y="885" font-family="system-ui, sans-serif" font-size="10" fill="#71717A" text-anchor="middle">...more pages...</text>

  <!-- Page Table -->
  <rect x="410" y="470" width="200" height="460" fill="#3F3F46" rx="8"/>
  <text x="510" y="500" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#F59E0B" text-anchor="middle">Page Table</text>
  <text x="510" y="520" font-family="system-ui, sans-serif" font-size="10" fill="#71717A" text-anchor="middle">(Translation)</text>

  <!-- Page table entries -->
  <rect x="430" y="540" width="160" height="45" fill="#27272A" rx="3"/>
  <text x="510" y="558" font-family="monospace" font-size="9" fill="#FCD34D" text-anchor="middle">Frame 5 | V:1 R:1 W:0</text>
  <text x="510" y="572" font-family="system-ui, sans-serif" font-size="8" fill="#71717A" text-anchor="middle">Valid, Read-only</text>

  <rect x="430" y="595" width="160" height="45" fill="#27272A" rx="3"/>
  <text x="510" y="613" font-family="monospace" font-size="9" fill="#FCD34D" text-anchor="middle">Frame 2 | V:1 R:1 W:1</text>
  <text x="510" y="627" font-family="system-ui, sans-serif" font-size="8" fill="#71717A" text-anchor="middle">Valid, Read-write</text>

  <rect x="430" y="650" width="160" height="45" fill="#27272A" rx="3"/>
  <text x="510" y="668" font-family="monospace" font-size="9" fill="#FCD34D" text-anchor="middle">Disk | V:0</text>
  <text x="510" y="682" font-family="system-ui, sans-serif" font-size="8" fill="#EF4444" text-anchor="middle">Swapped out</text>

  <rect x="430" y="705" width="160" height="45" fill="#27272A" rx="3"/>
  <text x="510" y="723" font-family="monospace" font-size="9" fill="#FCD34D" text-anchor="middle">Frame 0 | V:1 R:1 W:1</text>
  <text x="510" y="737" font-family="system-ui, sans-serif" font-size="8" fill="#71717A" text-anchor="middle">Valid, Read-write</text>

  <rect x="430" y="760" width="160" height="45" fill="#27272A" rx="3"/>
  <text x="510" y="778" font-family="monospace" font-size="9" fill="#FCD34D" text-anchor="middle">Disk | V:0</text>
  <text x="510" y="792" font-family="system-ui, sans-serif" font-size="8" fill="#EF4444" text-anchor="middle">Swapped out</text>

  <rect x="430" y="815" width="160" height="45" fill="#27272A" rx="3"/>
  <text x="510" y="833" font-family="monospace" font-size="9" fill="#FCD34D" text-anchor="middle">Frame 1 | V:1 R:1 W:0</text>
  <text x="510" y="847" font-family="system-ui, sans-serif" font-size="8" fill="#71717A" text-anchor="middle">Valid, Read-only</text>

  <!-- Physical Memory -->
  <rect x="640" y="470" width="320" height="460" fill="#3F3F46" rx="8"/>
  <text x="800" y="500" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#22C55E" text-anchor="middle">Physical Memory (RAM)</text>
  <text x="800" y="520" font-family="system-ui, sans-serif" font-size="10" fill="#71717A" text-anchor="middle">(Hardware View)</text>

  <!-- Physical frames -->
  <rect x="670" y="705" width="250" height="45" fill="#F59E0B" rx="4"/>
  <text x="795" y="730" font-family="monospace" font-size="11" fill="#FAFAFA" text-anchor="middle">Frame 0 ← VPage 3</text>

  <rect x="670" y="815" width="250" height="45" fill="#8B5CF6" rx="4"/>
  <text x="795" y="840" font-family="monospace" font-size="11" fill="#FAFAFA" text-anchor="middle">Frame 1 ← VPage 5</text>

  <rect x="670" y="595" width="250" height="45" fill="#3B82F6" rx="4"/>
  <text x="795" y="620" font-family="monospace" font-size="11" fill="#FAFAFA" text-anchor="middle">Frame 2 ← VPage 1</text>

  <rect x="670" y="870" width="250" height="45" fill="#71717A" rx="4"/>
  <text x="795" y="895" font-family="monospace" font-size="11" fill="#A1A1AA" text-anchor="middle">Frame 3 (Free)</text>

  <rect x="670" y="650" width="250" height="45" fill="#71717A" rx="4"/>
  <text x="795" y="675" font-family="monospace" font-size="11" fill="#A1A1AA" text-anchor="middle">Frame 4 (Free)</text>

  <rect x="670" y="540" width="250" height="45" fill="#7C3AED" rx="4"/>
  <text x="795" y="565" font-family="monospace" font-size="11" fill="#FAFAFA" text-anchor="middle">Frame 5 ← VPage 0</text>

  <!-- Mapping arrows -->
  <path d="M 310 563 L 430 563" stroke="#7C3AED" stroke-width="2" marker-end="url(#arrowMap1)"/>
  <path d="M 590 563 L 670 563" stroke="#7C3AED" stroke-width="2" marker-end="url(#arrowMap1)"/>
  <defs>
    <marker id="arrowMap1" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#7C3AED"/>
    </marker>
  </defs>

  <path d="M 310 618 L 430 618" stroke="#3B82F6" stroke-width="2" marker-end="url(#arrowMap2)"/>
  <path d="M 590 618 L 670 618" stroke="#3B82F6" stroke-width="2" marker-end="url(#arrowMap2)"/>
  <defs>
    <marker id="arrowMap2" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#3B82F6"/>
    </marker>
  </defs>

  <path d="M 310 728 L 430 728" stroke="#F59E0B" stroke-width="2" marker-end="url(#arrowMap3)"/>
  <path d="M 590 728 L 670 728" stroke="#F59E0B" stroke-width="2" marker-end="url(#arrowMap3)"/>
  <defs>
    <marker id="arrowMap3" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#F59E0B"/>
    </marker>
  </defs>

  <path d="M 310 838 L 430 838" stroke="#8B5CF6" stroke-width="2" marker-end="url(#arrowMap4)"/>
  <path d="M 590 838 L 670 838" stroke="#8B5CF6" stroke-width="2" marker-end="url(#arrowMap4)"/>
  <defs>
    <marker id="arrowMap4" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#8B5CF6"/>
    </marker>
  </defs>

  <!-- Page fault indicator -->
  <path d="M 310 673 L 430 673" stroke="#EF4444" stroke-width="2" stroke-dasharray="4,4" marker-end="url(#arrowFault)"/>
  <text x="365" y="668" font-family="system-ui, sans-serif" font-size="8" fill="#EF4444">Page Fault!</text>
  <defs>
    <marker id="arrowFault" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#EF4444"/>
    </marker>
  </defs>

  <!-- Key insight -->
  <rect x="60" y="970" width="960" height="50" fill="#27272A" rx="8"/>
  <text x="540" y="992" font-family="system-ui, sans-serif" font-size="14" fill="#A1A1AA" text-anchor="middle">Page size typically <tspan fill="#F59E0B">4KB</tspan> — virtual memory allows each process to have its own <tspan fill="#0EA5E9">isolated</tspan> address space</text>
  <text x="540" y="1012" font-family="system-ui, sans-serif" font-size="12" fill="#71717A" text-anchor="middle">MMU (Memory Management Unit) translates virtual → physical addresses using page tables (TLB cache for speed)</text>

  <text x="540" y="1050" font-family="system-ui, sans-serif" font-size="14" fill="#52525B" text-anchor="middle">@devweekends</text>
</svg>
