---
title: "Kubernetes on Windows & Linux"
sidebarTitle: "Windows & Linux"
description: "Running hybrid clusters with Windows and Linux nodes"
icon: "window-maximize"
---

# Kubernetes on Windows & Linux

Kubernetes was originally Linux-only, but now supports Windows worker nodes, enabling hybrid clusters.

---

## Why Windows Containers?

- **Legacy Apps**: Lift-and-shift .NET Framework applications.
- **Unified Management**: Manage Windows and Linux apps with the same tool (Kubernetes).
- **Modernization**: Slowly refactor monoliths into microservices.

---

## Architecture: Hybrid Cluster

A Kubernetes cluster can contain both Linux and Windows nodes.
- **Control Plane**: MUST run on Linux.
- **Worker Nodes**: Can be Linux or Windows.

```mermaid
graph TD
    subgraph Control Plane (Linux)
        API[API Server]
        Sched[Scheduler]
    end
    
    subgraph Linux Worker
        KubeletL[Kubelet]
        PodL[Linux Pod (Nginx)]
    end
    
    subgraph Windows Worker
        KubeletW[Kubelet.exe]
        PodW[Windows Pod (IIS)]
    end
    
    API --- KubeletL
    API --- KubeletW
```

---

## Scheduling Workloads

You must ensure Windows Pods land on Windows Nodes and Linux Pods land on Linux Nodes.

### Using `nodeSelector`

```yaml
# Windows Pod
apiVersion: v1
kind: Pod
metadata:
  name: iis-web
spec:
  containers:
  - name: iis
    image: mcr.microsoft.com/windows/servercore/iis:windowsservercore-ltsc2019
  nodeSelector:
    kubernetes.io/os: windows
```

```yaml
# Linux Pod
apiVersion: v1
kind: Pod
metadata:
  name: nginx
spec:
  containers:
  - name: nginx
    image: nginx:latest
  nodeSelector:
    kubernetes.io/os: linux
```

### Using Taints and Tolerations

To prevent Linux pods from accidentally landing on Windows nodes (and vice-versa).

1.  **Taint the Windows Node:**
    ```bash
    kubectl taint nodes win-node1 os=windows:NoSchedule
    ```

2.  **Add Toleration to Windows Pod:**
    ```yaml
    spec:
      tolerations:
      - key: "os"
        operator: "Equal"
        value: "windows"
        effect: "NoSchedule"
    ```

---

## Key Differences & Limitations

| Feature | Linux | Windows |
|---------|-------|---------|
| **Container Base Image** | Small (Alpine ~5MB) | Large (Server Core ~3GB) |
| **Startup Time** | Seconds | Seconds to Minutes |
| **Networking** | Bridge, Overlay | Host Networking not supported |
| **Privileged Containers** | Supported | Not Supported |
| **Filesystem** | Case-sensitive | Case-insensitive |
| **Active Directory** | Via LDAP/Kerberos | GMSA (Group Managed Service Accounts) |

---

## Best Practices

<AccordionGroup>
  <Accordion title="Use Taints and Tolerations" icon="shield-halved">
    Always taint Windows nodes to prevent Linux pods (like DaemonSets) from failing to start on them.
  </Accordion>
  
  <Accordion title="Image Management" icon="image">
    Windows images are large. Use a local registry or caching to speed up pulls. Match the container OS version with the host OS version (Process Isolation).
  </Accordion>
  
  <Accordion title="GMSA for Auth" icon="id-card">
    Use Group Managed Service Accounts (GMSA) for Windows pods that need to authenticate with Active Directory.
  </Accordion>
</AccordionGroup>

---

ðŸŽ‰ **Congratulations!** You've completed the Kubernetes Crash Course and the entire DevOps Tools Mastery course!

Next: [Back to Overview â†’](/courses/devops-tools/overview)
