---
title: "Kubernetes Configuration"
sidebarTitle: "Configuration"
description: "Managing application configuration with ConfigMaps and Secrets"
icon: "gear"
---

# Kubernetes Configuration

Decouple configuration artifacts from image content to keep containerized applications portable.

---

## 1. ConfigMaps

Used to store non-confidential data in key-value pairs.
- Environment variables
- Command-line arguments
- Configuration files

### Creating ConfigMaps

**Imperative (CLI):**
```bash
kubectl create configmap app-config --from-literal=LOG_LEVEL=info
```

**Declarative (YAML):**
```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
data:
  # Key-value pair
  database_host: "postgres-service"
  log_level: "debug"
  
  # File content
  nginx.conf: |
    server {
      listen 80;
      server_name localhost;
    }
```

### Using ConfigMaps in Pods

**As Environment Variables:**

```yaml
spec:
  containers:
  - name: app
    env:
    # Single variable
    - name: LOG_LEVEL
      valueFrom:
        configMapKeyRef:
          name: app-config
          key: log_level
    
    # All variables from ConfigMap
    envFrom:
    - configMapRef:
        name: app-config
```

**As a Volume (Mounting files):**

```yaml
spec:
  containers:
  - name: nginx
    volumeMounts:
    - name: config-volume
      mountPath: /etc/nginx/conf.d
  volumes:
  - name: config-volume
    configMap:
      name: app-config
      items:
      - key: nginx.conf
        path: default.conf
```

---

## 2. Secrets

Used to store sensitive information, such as passwords, OAuth tokens, and SSH keys.
- Stored in `etcd` (encrypted at rest if configured).
- Mounted into pods as files or environment variables.
- **Base64 encoded** (not encrypted by default in YAML!).

### Creating Secrets

**Imperative:**
```bash
kubectl create secret generic db-pass --from-literal=password=supersecret123
```

**Declarative:**
```yaml
apiVersion: v1
kind: Secret
metadata:
  name: db-pass
type: Opaque
data:
  # Must be Base64 encoded!
  # echo -n "supersecret123" | base64
  password: c3VwZXJzZWNyZXQxMjM=
```

### Using Secrets in Pods

**As Environment Variables:**

```yaml
spec:
  containers:
  - name: app
    env:
    - name: DB_PASSWORD
      valueFrom:
        secretKeyRef:
          name: db-pass
          key: password
```

**As a Volume:**

```yaml
spec:
  containers:
  - name: app
    volumeMounts:
    - name: secret-volume
      mountPath: /etc/certs
      readOnly: true
  volumes:
  - name: secret-volume
    secret:
      secretName: ssl-certs
```

---

## Best Practices

<AccordionGroup>
  <Accordion title="Don't Commit Secrets to Git" icon="git-alt">
    Never commit YAML files containing Base64 encoded secrets. Use tools like **Sealed Secrets**, **External Secrets Operator**, or **Vault**.
  </Accordion>
  
  <Accordion title="Immutable ConfigMaps" icon="lock">
    Set `immutable: true` for ConfigMaps/Secrets to prevent accidental updates and improve performance.
  </Accordion>
  
  <Accordion title="Hot Reloading" icon="rotate">
    If you mount a ConfigMap as a volume, updates propagate to the file automatically (eventually). Apps need to watch the file for changes to reload without restart.
  </Accordion>
</AccordionGroup>

---

## Key Takeaways

- Use **ConfigMaps** for plain text config.
- Use **Secrets** for sensitive data.
- Inject as **Environment Variables** for simple values.
- Mount as **Volumes** for config files.
- **Base64 is NOT encryption!**

---

Next: [Kubernetes Storage â†’](/courses/devops-tools/kubernetes-storage)
