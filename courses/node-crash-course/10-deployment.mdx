---
title: "10. Deployment & Best Practices"
description: "Learn how to prepare your Node.js application for production and deploy it."
---

# Deployment & Best Practices

## Environment Variables

Never hardcode sensitive information (API keys, database passwords, ports) in your code. Use environment variables.

1.  Install `dotenv`:
    ```bash
    npm install dotenv
    ```

2.  Create a `.env` file:
    ```
    PORT=5000
    DB_URI=mongodb://localhost:27017/myapp
    SECRET_KEY=mysecretkey
    ```

3.  Use it in your code:
    ```javascript
    require('dotenv').config();
    
    const PORT = process.env.PORT || 3000;
    console.log(process.env.DB_URI);
    ```

4.  **Important**: Add `.env` to your `.gitignore` file so it's not committed to version control.

## Production Best Practices

1.  **Use Gzip Compression**: Use the `compression` middleware to decrease the size of the response body.
    ```javascript
    const compression = require('compression');
    app.use(compression());
    ```

2.  **Security Headers**: Use `helmet` to set various HTTP headers for security.
    ```javascript
    const helmet = require('helmet');
    app.use(helmet());
    ```

3.  **Logging**: Use a logger like `morgan` or `winston` instead of `console.log`.

4.  **Error Handling**: Implement a global error handling middleware.

5.  **Clustering**: Use Node.js Cluster module or a process manager like PM2 to take advantage of multi-core systems.

## Deployment Options

### 1. Heroku (PaaS)

Heroku is a popular platform for deploying Node.js apps.

1.  Create a `Procfile` in the root:
    ```
    web: node server.js
    ```
2.  Install Heroku CLI and login.
3.  `heroku create`
4.  `git push heroku main`

### 2. Vercel / Netlify (Serverless)

Great for static sites and serverless functions. Next.js apps deploy seamlessly on Vercel.

### 3. VPS (DigitalOcean, AWS EC2, Linode)

For full control, you can rent a Virtual Private Server.
- Set up Linux (Ubuntu).
- Install Node.js and Nginx (as a reverse proxy).
- Use **PM2** to keep your app running.

## Using PM2

PM2 is a production process manager for Node.js.

```bash
npm install pm2 -g
pm2 start server.js
```

Commands:
- `pm2 list`: List running processes.
- `pm2 stop <id>`: Stop a process.
- `pm2 restart <id>`: Restart a process.
- `pm2 logs`: View logs.

## Summary

- Use **Environment Variables** for configuration.
- Follow security best practices (Helmet, Compression).
- Use a process manager like **PM2** for VPS deployments.
- Platforms like **Heroku** and **Vercel** offer easy deployment workflows.
