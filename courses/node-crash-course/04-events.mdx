---
title: "04. Events & EventEmitter"
description: "Master the Event-Driven Architecture of Node.js using the EventEmitter class."
---

# Events & EventEmitter

Node.js is built around an **event-driven architecture**. This means that certain objects (called "emitters") emit named events that cause Function objects ("listeners") to be called.

For example, a `net.Server` object emits an event each time a peer connects to it; an `fs.ReadStream` emits an event when the file is opened; a stream emits an event whenever data is available to be read.

All objects that emit events are instances of the `EventEmitter` class.

## The `events` Module

To use events, we need the `events` module.

```javascript
const EventEmitter = require('events');
const myEmitter = new EventEmitter();
```

## Basic Usage

### Registering a Listener

Use `.on()` to register a listener function for a specific event.

```javascript
myEmitter.on('event', () => {
  console.log('An event occurred!');
});
```

### Emitting an Event

Use `.emit()` to trigger the event.

```javascript
myEmitter.emit('event');
// Output: An event occurred!
```

## Passing Arguments

You can pass arguments to the event listener.

```javascript
myEmitter.on('greet', (name) => {
  console.log(`Hello, ${name}!`);
});

myEmitter.emit('greet', 'Alice');
// Output: Hello, Alice!
```

## Extending EventEmitter

In real-world applications, you usually extend the `EventEmitter` class to create your own modules that emit events.

Let's create a `Logger` class that emits a 'message' event whenever a message is logged.

**logger.js**
```javascript
const EventEmitter = require('events');
const uuid = require('uuid'); // Hypothetical dependency for IDs

class Logger extends EventEmitter {
  log(msg) {
    // Call event
    this.emit('message', { id: Date.now(), msg });
    console.log(msg);
  }
}

module.exports = Logger;
```

**app.js**
```javascript
const Logger = require('./logger');
const logger = new Logger();

// Register listener
logger.on('message', (data) => {
  console.log('Called Listener:', data);
});

logger.log('Hello World');
logger.log('Hi there');
```

## Handling Errors

When an error occurs within an `EventEmitter` instance, the typical action is for an 'error' event to be emitted. If an `EventEmitter` does not have at least one listener registered for the 'error' event, and an 'error' event is emitted, the error is thrown, a stack trace is printed, and the Node.js process exits.

```javascript
myEmitter.on('error', (err) => {
  console.error('Whoops! There was an error');
});

myEmitter.emit('error', new Error('Something went wrong'));
```

## Once

If you want a listener to be called only once, use `.once()`.

```javascript
myEmitter.once('log', () => console.log('Log once'));

myEmitter.emit('log'); // Prints "Log once"
myEmitter.emit('log'); // Ignored
```

## Summary

- **Event-Driven Architecture** is core to Node.js.
- The **EventEmitter** class is used to bind events and listeners.
- Use `.on()` to listen for events.
- Use `.emit()` to trigger events.
- You can **extend** `EventEmitter` to build custom classes that emit events.
- Always handle the `'error'` event to prevent crashes.
